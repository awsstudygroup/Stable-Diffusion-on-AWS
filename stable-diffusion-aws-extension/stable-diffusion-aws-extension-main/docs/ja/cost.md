
# コスト

このソリューションを実行する際の AWS サービスの使用コストは、あなたの責任となります。

## 自動スケーリング Amazon SageMaker 推論エンドポイントを使用してイメージを推論する

2023 年 12 月時点の例として、1日8時間、月 20 営業日の画像推論を行う場合(標準的な Stable Diffusion XL モデルを使用して 1024 X 1024 の画像を生成するのに平均7秒かかると仮定。この実行時間で1ヶ月で 72,000 枚の画像を生成できます)、米国東部(バージニア )(us-east-1) でこのソリューションを使用した場合の推定月額コストは **$310.45** です。

|  サービス  | 使用量 | 月額コスト | 
|  ----  | ----  | ----  |  
| Amazon SageMaker | $276.00 | エンドポイントあたりのモデル数 (1)、ストレージ(汎用 SSD(gp2))、インスタンス名 (ml.g5.2xlarge)、デプロイされるモデルの数 (1)、エンドポイントあたりのインスタンス数 (1)、エンドポイントの1日あたりの時間 (8)、1ヶ月あたりの営業日数 (20)、ストレージ量 (240 GB/ 月 ) | 
| AWS Lambda | $0.02 | アーキテクチャ (x86)、インボークモード(バッファ付き)、割り当てられた一時ストレージの量 (10 GB)、リクエスト数 (30 万/月)、並行性 (10) | 
| Amazon API Gateway | $1.05 | REST API リクエストユニット(千)、キャッシュメモリサイズ (GB)( なし)、WebSocket メッセージユニット(千)、HTTP API リクエストユニット(千)、平均メッセージサイズ (32 KB)、リクエスト数 (300 万/月 ) | 
| Amazon Simple Storage Service (S3) | $27.70 | S3 Standard ストレージ (1000 GB/ 月)、PUT、COPY、POST、LIST S3 Standard リクエスト ()、S3 Standard からの GET、SELECT、その他すべてのリクエスト (100 万)、S3 Select で返されたデータ (1000 GB/ 月)、DT 着信: 他のすべての地域 (0 TB/ 月)、DT 発信: インターネット (40 GB/ 月 ) | 
| Amazon DynamoDB | $0.50 | テーブルクラス (Standard)、平均アイテムサイズ(すべての属性 )(1 KB)、データストレージサイズ (2 GB) | 
| AWS Step Functions | $0.13 | ワークフロー リクエスト (600/ 月)、ワークフローあたりの状態遷移 (15) | 
| Amazon CloudWatch | $5.05 | 標準ログ: データ取り込み (10 GB) | 
| 合計 | $310.45 || 


## Amazon SageMaker を使用してモデルをトレーニングする

推論画像をもとに、ユーザーが月間 300 時間のトレーニングを行うと仮定した場合 (Kohya を使用して、Stable Diffusion V1.5 ベースの新しい safetensor モデルをファインチューニングする。1,000 ステップの反復で 387 秒かかる。300 時間のトレーニングは1ヶ月で **2,790 モデル** をトレーニングできます)、このソリューションを使用する際のコストは米国東部(バージニア)(us-east-1) で **$526.18** 増加します。

|  サービス  | 使用量 | 月額コスト | 
|  ----  | ----  | ----  |  
| Amazon SageMaker | $526.18 | ストレージ(汎用 SSD(gp2))、インスタンス名 (ml.g5.2xlarge)、月間トレーニングジョブ数 (300)、ジョブあたりのインスタンス数 (1)、インスタンスあたりの時間/ジョブ (1) | 
