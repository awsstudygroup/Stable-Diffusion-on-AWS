{
 "Description": "(SO8032) - Stable-Diffusion AWS Extension",
 "Parameters": {
  "SdExtensionApiKey": {
   "Type": "String",
   "Default": "09876543210987654321",
   "AllowedPattern": "[A-Za-z0-9]+",
   "Description": "Enter a string of 20 characters that includes a combination of alphanumeric characters",
   "MaxLength": 20,
   "MinLength": 20
  },
  "Bucket": {
   "Type": "String",
   "AllowedPattern": "^(?!.*\\.\\.)(?!xn--)(?!sthree-)(?!.*-s3alias$)(?!.*--ol-s3$)(?!.*\\.$)(?!.*^\\.)[a-z0-9][a-z0-9.-]{1,61}[a-z0-9]$",
   "Description": "New bucket name or Existing Bucket name",
   "MaxLength": 63,
   "MinLength": 3
  },
  "Email": {
   "Type": "String",
   "Default": "example@example.com",
   "AllowedPattern": "\\w[-\\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\\.)+[A-Za-z]{2,14}",
   "Description": "Email address to receive notifications"
  },
  "LogLevel": {
   "Type": "String",
   "Default": "ERROR",
   "AllowedValues": [
    "ERROR",
    "INFO",
    "DEBUG"
   ],
   "Description": "Log level, example: ERROR | INFO | DEBUG"
  },
  "ApiEndpointType": {
   "Type": "String",
   "Default": "REGIONAL",
   "AllowedValues": [
    "REGIONAL",
    "PRIVATE",
    "EDGE"
   ],
   "Description": "API Endpoint, example: REGIONAL | PRIVATE | EDGE"
  }
 },
 "Conditions": {
  "IsChina": {
   "Fn::Equals": [
    {
     "Ref": "AWS::Partition"
    },
    "aws-cn"
   ]
  },
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "il-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-2"
       ]
      }
     ]
    }
   ]
  }
 },
 "Resources": {
  "ResourcesProviderdeploycheckrole166E5860": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesProvider/deploy-check-role/Resource"
   }
  },
  "ResourcesProviderdeploycheckroleDefaultPolicyBDBBFD3D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:CreateTable",
        "dynamodb:UpdateTable",
        "dynamodb:PutItem",
        "dynamodb:DescribeTable",
        "sns:CreateTopic",
        "iam:GetRole",
        "iam:CreateRole",
        "iam:PutRolePolicy",
        "iam:ListRolePolicies",
        "sts:AssumeRole",
        "kms:CreateKey",
        "kms:CreateAlias",
        "kms:DisableKeyRotation",
        "kms:ListAliases",
        "cloudwatch:PutDashboard"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "s3:ListBucket",
        "s3:CreateBucket",
        "s3:PutBucketCORS",
        "s3:GetObject",
        "s3:PutObject",
        "s3:HeadObject",
        "s3:DeleteObject",
        "s3:GetBucketLocation"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":s3:::*"
         ]
        ]
       }
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt",
        "kms:CancelKeyDeletion",
        "kms:EnableKey"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "iam:PassRole",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":iam::",
          {
           "Ref": "AWS::AccountId"
          },
          ":role/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ResourcesProviderdeploycheckroleDefaultPolicyBDBBFD3D",
    "Roles": [
     {
      "Ref": "ResourcesProviderdeploycheckrole166E5860"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesProvider/deploy-check-role/DefaultPolicy/Resource"
   }
  },
  "ResourceManagerHandler839ED822": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/c2bb2deb14519a6526f54ec5bc5b07630000464a3dd33cdf2496bb69ecec4678.zip"
    },
    "Environment": {
     "Variables": {
      "ROLE_ARN": {
       "Fn::GetAtt": [
        "ResourcesProviderdeploycheckrole166E5860",
        "Arn"
       ]
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "ResourcesProviderdeploycheckrole166E5860",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourcesProviderdeploycheckroleDefaultPolicyBDBBFD3D",
    "ResourcesProviderdeploycheckrole166E5860"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourceManagerHandler/Resource",
    "aws:asset:path": "asset.c2bb2deb14519a6526f54ec5bc5b07630000464a3dd33cdf2496bb69ecec4678",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ResourceProviderframeworkonEventServiceRole0C5450E7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourceProvider/framework-onEvent/ServiceRole/Resource"
   }
  },
  "ResourceProviderframeworkonEventServiceRoleDefaultPolicyD6E38BA1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ResourceManagerHandler839ED822",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ResourceManagerHandler839ED822",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ResourceProviderframeworkonEventServiceRoleDefaultPolicyD6E38BA1",
    "Roles": [
     {
      "Ref": "ResourceProviderframeworkonEventServiceRole0C5450E7"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourceProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ResourceProviderframeworkonEventE93EA26F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/d9861ea7a45affd23e47a614acb2fddc6e45c20a891284c958187dafbf9ee36b.zip"
    },
    "Description": "AWS CDK resource provider framework - onEvent (Extension-for-Stable-Diffusion-on-AWS/ResourceProvider)",
    "Environment": {
     "Variables": {
      "USER_ON_EVENT_FUNCTION_ARN": {
       "Fn::GetAtt": [
        "ResourceManagerHandler839ED822",
        "Arn"
       ]
      }
     }
    },
    "Handler": "framework.onEvent",
    "Role": {
     "Fn::GetAtt": [
      "ResourceProviderframeworkonEventServiceRole0C5450E7",
      "Arn"
     ]
    },
    "Runtime": {
     "Fn::FindInMap": [
      "LatestNodeRuntimeMap",
      {
       "Ref": "AWS::Region"
      },
      "value"
     ]
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "ResourceProviderframeworkonEventServiceRoleDefaultPolicyD6E38BA1",
    "ResourceProviderframeworkonEventServiceRole0C5450E7"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourceProvider/framework-onEvent/Resource",
    "aws:asset:path": "asset.d9861ea7a45affd23e47a614acb2fddc6e45c20a891284c958187dafbf9ee36b",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ResourceProviderframeworkonEventLogRetention09383077": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ResourceProviderframeworkonEventE93EA26F"
       }
      ]
     ]
    },
    "RetentionInDays": 1
   },
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourceProvider/framework-onEvent/LogRetention/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:PutRetentionPolicy",
        "logs:DeleteRetentionPolicy"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "Roles": [
     {
      "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Handler": "index.handler",
    "Runtime": {
     "Fn::FindInMap": [
      "LatestNodeRuntimeMap",
      {
       "Ref": "AWS::Region"
      },
      "value"
     ]
    },
    "Timeout": 900,
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/4e26bf2d0a26f2097fb2b261f22bb51e3f6b4b52635777b1e54edbd8e2d58c35.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource",
    "aws:asset:path": "asset.4e26bf2d0a26f2097fb2b261f22bb51e3f6b4b52635777b1e54edbd8e2d58c35",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ResourceManager": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "ResourceProviderframeworkonEventE93EA26F",
      "Arn"
     ]
    },
    "bucketName": {
     "Ref": "Bucket"
    },
    "esdVersion": "v1.7.0-e2d48cf",
    "timestamp": "2024-07-25T06:29:36.631Z"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourceManager/Default"
   }
  },
  "sdcommonlayercommonlayer24D6FB4D": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "python3.10"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/d8cc5d72c30c9528f2fda65dbbf21a8a8b5f430c620e5065d651fa8193164491.zip"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-common-layer-common-layer/Resource",
    "aws:asset:path": "asset.d8cc5d72c30c9528f2fda65dbbf21a8a8b5f430c620e5065d651fa8193164491",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Content"
   }
  },
  "aigcapilogs7BCD6BF9": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/aigc-api-logs/Resource"
   }
  },
  "sdextensiondeployapi34DC5501": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "Extension for Stable Diffusion on AWS API - v1.7.0-e2d48cf",
    "EndpointConfiguration": {
     "Types": [
      {
       "Ref": "ApiEndpointType"
      }
     ]
    },
    "Name": "Extension-for-Stable-Diffusion-on-AWS",
    "Policy": {
     "Statement": [
      {
       "Action": "execute-api:Invoke",
       "Effect": "Allow",
       "Principal": {
        "AWS": "*"
       },
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Resource"
   }
  },
  "sdextensiondeployapiCloudWatchRole74764746": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "apigateway.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/CloudWatchRole/Resource"
   }
  },
  "sdextensiondeployapiAccountB4079FD9": {
   "Type": "AWS::ApiGateway::Account",
   "Properties": {
    "CloudWatchRoleArn": {
     "Fn::GetAtt": [
      "sdextensiondeployapiCloudWatchRole74764746",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "sdextensiondeployapi34DC5501"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Account"
   }
  },
  "sdextensiondeployapiDeploymentD8E6E82C0ed9f3ec2549b8785ad12d4db5099c4b": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Extension for Stable Diffusion on AWS API - v1.7.0-e2d48cf",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ApiDocrespmodelD0F8CDC6",
    "CreateCheckPointmodelF6F23349",
    "CreateCheckPointupdatemodelCB7E5EDA",
    "CreateCheckPointurlmodelA073EBC6",
    "CreateDatasetmodelE6CFAAD2",
    "CreateDatasetrespmodel59B1C852",
    "CreateEndpointmodel3E3769CB",
    "CreateEndpointrespmodelF7E14284",
    "CreateInferenceJobasyncrespmodel04D85D60",
    "CreateInferenceJobmodelEA4EB1DF",
    "CreateInferenceJobrespmodel1B21B14D",
    "CreateInferenceJobrtrespmodel33FEC3D5",
    "CreateRolemodelC684973C",
    "CreateRolerespmodel56A0B0EC",
    "CreateSchemamodel86CC657A",
    "CreateSchemarespmodel5F1842F8",
    "CreateTrainingJobmodel970E2BC9",
    "CreateTrainingJobrespmodel89BD8503",
    "CreateUsermodel42A05A14",
    "CreateUserrespmodel704ED8F4",
    "CreateWorkflowmodelC93E9CED",
    "CreateWorkflowrespmodelF09E2CD2",
    "CropDatasetmodel2E943C9D",
    "CropDatasetrespmodel7E953A77",
    "DeleteCheckpointsmodel5CCD2761",
    "DeleteDatasetsmodel197FBE84",
    "DeleteEndpointsmodel0D179DC1",
    "DeleteExecutesApimodel065B306E",
    "DeleteInferenceJobsmodelC7FB385F",
    "DeleteRolesmodel44B0F205",
    "DeleteSchemasmodelB256AF99",
    "DeleteTrainingJobsmodelB77A2D58",
    "DeleteUsersmodel0B3B8742",
    "DeleteWorkflowsmodel4639EE85",
    "esdapivalidatorB43244EF",
    "Executemodel36C77011",
    "Executerespmodel341E04E6",
    "GetDatasetrespmodel08BFD8B8",
    "GetExecuterespmodel3901F0C0",
    "GetExecuteLogslogsrespmodelABB6CDB7",
    "GetInferenceJobrespmodel962C793C",
    "GetSchemarespmodel1BEBD6F4",
    "GetTrainingJobrespmodelC996A2ED",
    "GetWorkflowrespmodel09672583",
    "ListCheckPointsrespmodel6CE97E27",
    "ListDatasetsrespmodelC11FD768",
    "ListEndpointsrespmodel96F81C4F",
    "ListInferenceJobsrespmodelD9572698",
    "ListRolesrespmodelAE77328B",
    "ListSchemasrespmodel11CA216C",
    "ListTrainingJobsrespmodel332BFAB7",
    "ListUsersrespmodelC16B5613",
    "ListWorkflowsJobsrespmodelF70EDC12",
    "MergeExecutemodel4AA79B75",
    "model20226849A90",
    "model204246F72D1",
    "model400C0FF62F1",
    "model401AB3D433F",
    "model40314FF7085",
    "model404F3874FC7",
    "model504C7085997",
    "Pingrespmodel9DBF51CB",
    "Preparemodel6EA19166",
    "QueryExecuterespmodel41A604C8",
    "ResourceManager",
    "RootApirespmodelEC143A47",
    "sdextensiondeployapiBADREQUESTBODY05FF7670",
    "sdextensiondeployapiBADREQUESTPARAMETERS6B417F50",
    "sdextensiondeployapiDEFAULT4XXB982CE33",
    "sdextensiondeployapiDEFAULT5XX94934491",
    "sdextensiondeployapiGET11448746",
    "sdextensiondeployapiOPTIONS615C1132",
    "sdextensiondeployapi1AF27370",
    "sdextensiondeployapicheckpointsidOPTIONS51BACFE0",
    "sdextensiondeployapicheckpointsidPUTACDA28EA",
    "sdextensiondeployapicheckpointsidB595ACCA",
    "sdextensiondeployapicheckpointsDELETECFF6984F",
    "sdextensiondeployapicheckpointsGET5C096E44",
    "sdextensiondeployapicheckpointsOPTIONS22A03870",
    "sdextensiondeployapicheckpointsPOST63374088",
    "sdextensiondeployapicheckpoints4CDF0CCC",
    "sdextensiondeployapidatasetsidcropOPTIONSF179D6E8",
    "sdextensiondeployapidatasetsidcropPOSTC7EA0B1D",
    "sdextensiondeployapidatasetsidcropB46EE946",
    "sdextensiondeployapidatasetsidGETF56C2546",
    "sdextensiondeployapidatasetsidOPTIONS1A559FA5",
    "sdextensiondeployapidatasetsidPUT907AA315",
    "sdextensiondeployapidatasetsid8A61A089",
    "sdextensiondeployapidatasetsDELETEA1F505EA",
    "sdextensiondeployapidatasetsGET47985D6C",
    "sdextensiondeployapidatasetsOPTIONS80F32F1C",
    "sdextensiondeployapidatasetsPOST46D311B7",
    "sdextensiondeployapidatasets42E897F4",
    "sdextensiondeployapiendpointsDELETEBB35848A",
    "sdextensiondeployapiendpointsGETA56FE750",
    "sdextensiondeployapiendpointsOPTIONS17167B46",
    "sdextensiondeployapiendpointsPOST326F95B5",
    "sdextensiondeployapiendpoints094BFA7E",
    "sdextensiondeployapiexecutesidGET9DD4F92F",
    "sdextensiondeployapiexecutesidlogsGET9C4EA080",
    "sdextensiondeployapiexecutesidlogsOPTIONSBBD3C49F",
    "sdextensiondeployapiexecutesidlogsC47449CF",
    "sdextensiondeployapiexecutesidOPTIONSF4175E50",
    "sdextensiondeployapiexecutesidEFF22F5B",
    "sdextensiondeployapiexecutesDELETEF7D7EAEB",
    "sdextensiondeployapiexecutesGET2EA2E14F",
    "sdextensiondeployapiexecutesOPTIONS3BD23F0F",
    "sdextensiondeployapiexecutesPOST95161B01",
    "sdextensiondeployapiexecutesE7044A47",
    "sdextensiondeployapiGET2E88816B",
    "sdextensiondeployapiinferencesidGET9B423093",
    "sdextensiondeployapiinferencesidOPTIONS411E2FA3",
    "sdextensiondeployapiinferencesidAAEAB462",
    "sdextensiondeployapiinferencesidstartOPTIONS2F608BA4",
    "sdextensiondeployapiinferencesidstartPUT68683867",
    "sdextensiondeployapiinferencesidstart0D314361",
    "sdextensiondeployapiinferencesDELETE98C320D7",
    "sdextensiondeployapiinferencesGETCCFB7648",
    "sdextensiondeployapiinferencesOPTIONS8CCB3CA5",
    "sdextensiondeployapiinferencesPOSTA002C849",
    "sdextensiondeployapiinferences12D38E37",
    "sdextensiondeployapimergeOPTIONS09B70966",
    "sdextensiondeployapimergePOSTCD1C02A1",
    "sdextensiondeployapimerge97F8C42C",
    "sdextensiondeployapiOPTIONS9A8D4E64",
    "sdextensiondeployapipingGETA3919CE9",
    "sdextensiondeployapipingOPTIONS2657C237",
    "sdextensiondeployapiping8F0285C3",
    "sdextensiondeployapiprepareidGET6893BE31",
    "sdextensiondeployapiprepareidOPTIONS4F47DFD7",
    "sdextensiondeployapiprepareidA2A5C23B",
    "sdextensiondeployapiprepareOPTIONS80FE92EE",
    "sdextensiondeployapipreparePOST9A800D8E",
    "sdextensiondeployapiprepareECD1D80D",
    "sdextensiondeployapirolesDELETEE45C7A67",
    "sdextensiondeployapirolesGET031F9631",
    "sdextensiondeployapirolesOPTIONS154057AF",
    "sdextensiondeployapirolesPOSTC252ED5D",
    "sdextensiondeployapiroles25032CFE",
    "sdextensiondeployapischemasnameGET8B3DC34C",
    "sdextensiondeployapischemasnameOPTIONS9204BD61",
    "sdextensiondeployapischemasnamePUT57499A38",
    "sdextensiondeployapischemasname7281C9CC",
    "sdextensiondeployapischemasDELETE4D9CE0EF",
    "sdextensiondeployapischemasGET00AD0229",
    "sdextensiondeployapischemasOPTIONS309ED882",
    "sdextensiondeployapischemasPOSTA0B6693D",
    "sdextensiondeployapischemasF0AA5066",
    "sdextensiondeployapisyncidGETFB22FC92",
    "sdextensiondeployapisyncidOPTIONS06BF95F0",
    "sdextensiondeployapisyncidE2E9BDF2",
    "sdextensiondeployapisyncOPTIONS066DA2FA",
    "sdextensiondeployapisyncPOSTF3761C55",
    "sdextensiondeployapisync51B71603",
    "sdextensiondeployapitrainingsidGET701D2A24",
    "sdextensiondeployapitrainingsidOPTIONSE7261705",
    "sdextensiondeployapitrainingsid1C682511",
    "sdextensiondeployapitrainingsDELETE000C8F48",
    "sdextensiondeployapitrainingsGETAC8B507F",
    "sdextensiondeployapitrainingsOPTIONS756F1BC2",
    "sdextensiondeployapitrainingsPOST7C7CF1C9",
    "sdextensiondeployapitrainings6310C1BF",
    "sdextensiondeployapiusersDELETE1E092369",
    "sdextensiondeployapiusersGET7701152F",
    "sdextensiondeployapiusersOPTIONS1415A4D7",
    "sdextensiondeployapiusersPOST335EBDC1",
    "sdextensiondeployapiusers978D28A4",
    "sdextensiondeployapiworkflowsnameGETAF689641",
    "sdextensiondeployapiworkflowsnameOPTIONS415854C8",
    "sdextensiondeployapiworkflowsname8EC925EA",
    "sdextensiondeployapiworkflowsDELETEA4E090A5",
    "sdextensiondeployapiworkflowsGETBBBE1FDE",
    "sdextensiondeployapiworkflowsOPTIONS9FC9CDE4",
    "sdextensiondeployapiworkflowsPOST219DF9CE",
    "sdextensiondeployapiworkflowsE6170A44",
    "StartInferenceJobrespmodel188C4505",
    "StartInferenceJobrtrespmodel769E5E3B",
    "SyncMsgmodel1FA2D2EE",
    "UpdateCheckPointmodelC3EDC1E5",
    "UpdateCheckPointrenamemodelEE368B4B",
    "UpdateCheckPointupdatemodel8BD91451",
    "UpdateDatasetmodelB5FE867C",
    "UpdateDatasetrespmodel0F902480",
    "UpdateSchemamodel2657A7AA",
    "UpdateSchemarespmodelCF1D9E91"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Deployment/Resource"
   }
  },
  "sdextensiondeployapiDeploymentStageprod6D37142C": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "AccessLogSetting": {
     "DestinationArn": {
      "Fn::GetAtt": [
       "aigcapilogs7BCD6BF9",
       "Arn"
      ]
     },
     "Format": "$context.identity.sourceIp $context.identity.caller $context.identity.user [$context.requestTime] \"$context.httpMethod $context.resourcePath $context.protocol\" $context.status $context.responseLength $context.requestId"
    },
    "DeploymentId": {
     "Ref": "sdextensiondeployapiDeploymentD8E6E82C0ed9f3ec2549b8785ad12d4db5099c4b"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "StageName": "prod",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager",
    "sdextensiondeployapiAccountB4079FD9"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/DeploymentStage.prod/Resource"
   }
  },
  "sdextensiondeployapiOPTIONS9A8D4E64": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapi1AF27370": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "api",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/api/Resource"
   }
  },
  "sdextensiondeployapiOPTIONS615C1132": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapi1AF27370"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/api/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETapi889A34C0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiDoclambda652963C2",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/api"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/api/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..api"
   }
  },
  "sdextensiondeployapiGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETapi1F281C36": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiDoclambda652963C2",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/api"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/api/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..api"
   }
  },
  "sdextensiondeployapiGET11448746": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiDoclambda652963C2",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ApiDocrespmodelD0F8CDC6"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "GetApiOAS",
    "ResourceId": {
     "Ref": "sdextensiondeployapi1AF27370"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/api/GET/Resource"
   }
  },
  "sdextensiondeployapiping8F0285C3": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "ping",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/ping/Resource"
   }
  },
  "sdextensiondeployapipingOPTIONS2657C237": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiping8F0285C3"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/ping/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapipingGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETping4C0B0ED3": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "Pinglambda324263A8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/ping"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/ping/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..ping"
   }
  },
  "sdextensiondeployapipingGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETping80351FCC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "Pinglambda324263A8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/ping"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/ping/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..ping"
   }
  },
  "sdextensiondeployapipingGETA3919CE9": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "Pinglambda324263A8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "Pingrespmodel9DBF51CB"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "Ping",
    "ResourceId": {
     "Ref": "sdextensiondeployapiping8F0285C3"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/ping/GET/Resource"
   }
  },
  "sdextensiondeployapicheckpoints4CDF0CCC": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "checkpoints",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/Resource"
   }
  },
  "sdextensiondeployapicheckpointsOPTIONS22A03870": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapicheckpoints4CDF0CCC"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapicheckpointsGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETcheckpoints28A0A943": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListCheckPointslambda52E5746A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/checkpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..checkpoints"
   }
  },
  "sdextensiondeployapicheckpointsGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETcheckpoints8919DA4E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListCheckPointslambda52E5746A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/checkpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..checkpoints"
   }
  },
  "sdextensiondeployapicheckpointsGET5C096E44": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListCheckPointslambda52E5746A",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListCheckPointsrespmodel6CE97E27"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "ListCheckpoints",
    "RequestParameters": {
     "method.request.querystring.page": false,
     "method.request.querystring.per_page": false,
     "method.request.querystring.username": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapicheckpoints4CDF0CCC"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/GET/Resource"
   }
  },
  "sdextensiondeployapicheckpointsPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTcheckpoints6D781A04": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateCheckPointlambdaF7965573",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/checkpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..checkpoints"
   }
  },
  "sdextensiondeployapicheckpointsPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTcheckpointsAB9E028E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateCheckPointlambdaF7965573",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/checkpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..checkpoints"
   }
  },
  "sdextensiondeployapicheckpointsPOST63374088": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateCheckPointlambdaF7965573",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateCheckPointupdatemodelCB7E5EDA"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "201"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateCheckPointurlmodelA073EBC6"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "CreateCheckpoint",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateCheckPointmodelF6F23349"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapicheckpoints4CDF0CCC"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/POST/Resource"
   }
  },
  "sdextensiondeployapicheckpointsidB595ACCA": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapicheckpoints4CDF0CCC"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/{id}/Resource"
   }
  },
  "sdextensiondeployapicheckpointsidOPTIONS51BACFE0": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapicheckpointsidB595ACCA"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/{id}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapicheckpointsidPUTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTcheckpointsidC9C89A14": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "UpdateCheckPointlambdaB0714034",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/PUT/checkpoints/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/{id}/PUT/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..checkpoints.{id}"
   }
  },
  "sdextensiondeployapicheckpointsidPUTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTcheckpointsid66F10451": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "UpdateCheckPointlambdaB0714034",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/PUT/checkpoints/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/{id}/PUT/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..checkpoints.{id}"
   }
  },
  "sdextensiondeployapicheckpointsidPUTACDA28EA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "UpdateCheckPointlambdaB0714034",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "UpdateCheckPointupdatemodel8BD91451"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "UpdateCheckPointrenamemodelEE368B4B"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "UpdateCheckpoint",
    "RequestModels": {
     "application/json": {
      "Ref": "UpdateCheckPointmodelC3EDC1E5"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapicheckpointsidB595ACCA"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/{id}/PUT/Resource"
   }
  },
  "sdextensiondeployapicheckpointsDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEcheckpoints7BEC1238": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteCheckpointslambdaE2D0C125",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/checkpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..checkpoints"
   }
  },
  "sdextensiondeployapicheckpointsDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEcheckpoints486323B9": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteCheckpointslambdaE2D0C125",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/checkpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..checkpoints"
   }
  },
  "sdextensiondeployapicheckpointsDELETECFF6984F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteCheckpointslambdaE2D0C125",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "DeleteCheckpoints",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteCheckpointsmodel5CCD2761"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapicheckpoints4CDF0CCC"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/checkpoints/DELETE/Resource"
   }
  },
  "sdextensiondeployapidatasets42E897F4": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "datasets",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/Resource"
   }
  },
  "sdextensiondeployapidatasetsOPTIONS80F32F1C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasets42E897F4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapidatasetsPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTdatasets08300E1E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateDatasetlambdaE4C5E2A4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/datasets"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..datasets"
   }
  },
  "sdextensiondeployapidatasetsPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTdatasetsCEF6C5ED": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateDatasetlambdaE4C5E2A4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/datasets"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..datasets"
   }
  },
  "sdextensiondeployapidatasetsPOST46D311B7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateDatasetlambdaE4C5E2A4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateDatasetrespmodel59B1C852"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "201"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "CreateDataset",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateDatasetmodelE6CFAAD2"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasets42E897F4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/POST/Resource"
   }
  },
  "sdextensiondeployapidatasetsid8A61A089": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapidatasets42E897F4"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/Resource"
   }
  },
  "sdextensiondeployapidatasetsidOPTIONS1A559FA5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasetsid8A61A089"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapidatasetsidPUTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTdatasetsid69DB7E13": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "UpdateDatasetlambda285EA6F4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/PUT/datasets/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/PUT/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..datasets.{id}"
   }
  },
  "sdextensiondeployapidatasetsidPUTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTdatasetsid42216153": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "UpdateDatasetlambda285EA6F4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/PUT/datasets/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/PUT/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..datasets.{id}"
   }
  },
  "sdextensiondeployapidatasetsidPUT907AA315": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "UpdateDatasetlambda285EA6F4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "UpdateDatasetrespmodel0F902480"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "UpdateDataset",
    "RequestModels": {
     "application/json": {
      "Ref": "UpdateDatasetmodelB5FE867C"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasetsid8A61A089"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/PUT/Resource"
   }
  },
  "sdextensiondeployapidatasetsidGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETdatasetsidE1555F59": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetDatasetlambda5273A45E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/datasets/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..datasets.{id}"
   }
  },
  "sdextensiondeployapidatasetsidGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETdatasetsid72E6149E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetDatasetlambda5273A45E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/datasets/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..datasets.{id}"
   }
  },
  "sdextensiondeployapidatasetsidGETF56C2546": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetDatasetlambda5273A45E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "GetDatasetrespmodel08BFD8B8"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "GetDataset",
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasetsid8A61A089"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/GET/Resource"
   }
  },
  "sdextensiondeployapidatasetsidcropB46EE946": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapidatasetsid8A61A089"
    },
    "PathPart": "crop",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/crop/Resource"
   }
  },
  "sdextensiondeployapidatasetsidcropOPTIONSF179D6E8": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasetsidcropB46EE946"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/crop/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapidatasetsidcropPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTdatasetsidcrop912736D8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CropDatasetlambda3D2CD9C3",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/datasets/*/crop"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/crop/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..datasets.{id}.crop"
   }
  },
  "sdextensiondeployapidatasetsidcropPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTdatasetsidcrop953D5EF1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CropDatasetlambda3D2CD9C3",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/datasets/*/crop"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/crop/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..datasets.{id}.crop"
   }
  },
  "sdextensiondeployapidatasetsidcropPOSTC7EA0B1D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CropDatasetlambda3D2CD9C3",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CropDatasetrespmodel7E953A77"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "CropDataset",
    "RequestModels": {
     "application/json": {
      "Ref": "CropDatasetmodel2E943C9D"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasetsidcropB46EE946"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/{id}/crop/POST/Resource"
   }
  },
  "sdextensiondeployapidatasetsGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETdatasetsC6E4A93C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListDatasetslambda67F22742",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/datasets"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..datasets"
   }
  },
  "sdextensiondeployapidatasetsGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETdatasetsA1B74074": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListDatasetslambda67F22742",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/datasets"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..datasets"
   }
  },
  "sdextensiondeployapidatasetsGET47985D6C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListDatasetslambda67F22742",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListDatasetsrespmodelC11FD768"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "ListDatasets",
    "RequestParameters": {
     "method.request.querystring.limit": false,
     "method.request.querystring.exclusive_start_key": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasets42E897F4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/GET/Resource"
   }
  },
  "sdextensiondeployapidatasetsDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEdatasets6930A639": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteDatasetslambda4ED0BD09",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/datasets"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..datasets"
   }
  },
  "sdextensiondeployapidatasetsDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEdatasets39D4CF84": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteDatasetslambda4ED0BD09",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/datasets"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..datasets"
   }
  },
  "sdextensiondeployapidatasetsDELETEA1F505EA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteDatasetslambda4ED0BD09",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "DeleteDatasets",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteDatasetsmodel197FBE84"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapidatasets42E897F4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/datasets/DELETE/Resource"
   }
  },
  "sdextensiondeployapiusers978D28A4": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "users",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/Resource"
   }
  },
  "sdextensiondeployapiusersOPTIONS1415A4D7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiusers978D28A4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiusersPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTusers49810232": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateUserlambda000FE6B1",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/users"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..users"
   }
  },
  "sdextensiondeployapiusersPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTusersA48161FC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateUserlambda000FE6B1",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/users"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..users"
   }
  },
  "sdextensiondeployapiusersPOST335EBDC1": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateUserlambda000FE6B1",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateUserrespmodel704ED8F4"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "201"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "CreateUser",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateUsermodel42A05A14"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiusers978D28A4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/POST/Resource"
   }
  },
  "sdextensiondeployapiusersDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEusers096B7473": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserslambda86471CA5",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/users"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..users"
   }
  },
  "sdextensiondeployapiusersDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEusers1D05D266": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserslambda86471CA5",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/users"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..users"
   }
  },
  "sdextensiondeployapiusersDELETE1E092369": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteUserslambda86471CA5",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "DeleteUsers",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteUsersmodel0B3B8742"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiusers978D28A4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/DELETE/Resource"
   }
  },
  "sdextensiondeployapiusersGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETusers2E1A206F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListUserslambda4DDAE5BC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/users"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..users"
   }
  },
  "sdextensiondeployapiusersGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETusersF6AC6CA9": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListUserslambda4DDAE5BC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/users"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..users"
   }
  },
  "sdextensiondeployapiusersGET7701152F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListUserslambda4DDAE5BC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListUsersrespmodelC16B5613"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "ListUsers",
    "ResourceId": {
     "Ref": "sdextensiondeployapiusers978D28A4"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/users/GET/Resource"
   }
  },
  "sdextensiondeployapiroles25032CFE": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "roles",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/Resource"
   }
  },
  "sdextensiondeployapirolesOPTIONS154057AF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiroles25032CFE"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapirolesPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTroles0C3DD3A4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateRolelambda12D93D44",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/roles"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..roles"
   }
  },
  "sdextensiondeployapirolesPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTroles92689E75": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateRolelambda12D93D44",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/roles"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..roles"
   }
  },
  "sdextensiondeployapirolesPOSTC252ED5D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateRolelambda12D93D44",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateRolerespmodel56A0B0EC"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "201"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "CreateRole",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateRolemodelC684973C"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiroles25032CFE"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/POST/Resource"
   }
  },
  "sdextensiondeployapirolesGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETroles3660FF7B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListRoleslambda07097DF5",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/roles"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..roles"
   }
  },
  "sdextensiondeployapirolesGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETrolesAE6A30DB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListRoleslambda07097DF5",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/roles"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..roles"
   }
  },
  "sdextensiondeployapirolesGET031F9631": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListRoleslambda07097DF5",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListRolesrespmodelAE77328B"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "ListRoles",
    "ResourceId": {
     "Ref": "sdextensiondeployapiroles25032CFE"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/GET/Resource"
   }
  },
  "sdextensiondeployapirolesDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEroles7CA33A56": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteRoleslambdaCE7CB867",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/roles"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..roles"
   }
  },
  "sdextensiondeployapirolesDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEroles792481F6": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteRoleslambdaCE7CB867",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/roles"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..roles"
   }
  },
  "sdextensiondeployapirolesDELETEE45C7A67": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteRoleslambdaCE7CB867",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "DeleteRoles",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteRolesmodel44B0F205"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiroles25032CFE"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/roles/DELETE/Resource"
   }
  },
  "sdextensiondeployapiendpoints094BFA7E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "endpoints",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/Resource"
   }
  },
  "sdextensiondeployapiendpointsOPTIONS17167B46": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiendpoints094BFA7E"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiendpointsGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETendpoints20C1F5C1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListEndpointslambdaF82AC26A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/endpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..endpoints"
   }
  },
  "sdextensiondeployapiendpointsGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETendpoints4A5A0F06": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListEndpointslambdaF82AC26A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/endpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..endpoints"
   }
  },
  "sdextensiondeployapiendpointsGETA56FE750": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListEndpointslambdaF82AC26A",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListEndpointsrespmodel96F81C4F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "ListEndpoints",
    "RequestParameters": {
     "method.request.querystring.limit": false,
     "method.request.querystring.exclusive_start_key": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiendpoints094BFA7E"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/GET/Resource"
   }
  },
  "sdextensiondeployapiendpointsDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEendpoints0FF00C8B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteEndpointslambdaF5498B34",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/endpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..endpoints"
   }
  },
  "sdextensiondeployapiendpointsDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEendpoints91608620": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteEndpointslambdaF5498B34",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/endpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..endpoints"
   }
  },
  "sdextensiondeployapiendpointsDELETEBB35848A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteEndpointslambdaF5498B34",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "DeleteEndpoints",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteEndpointsmodel0D179DC1"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiendpoints094BFA7E"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/DELETE/Resource"
   }
  },
  "sdextensiondeployapiendpointsPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTendpoints903E49CB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateEndpointlambda9B92F5B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/endpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..endpoints"
   }
  },
  "sdextensiondeployapiendpointsPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTendpoints2435570D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateEndpointlambda9B92F5B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/endpoints"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..endpoints"
   }
  },
  "sdextensiondeployapiendpointsPOST326F95B5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateEndpointlambda9B92F5B4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateEndpointrespmodelF7E14284"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "CreateEndpoint",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateEndpointmodel3E3769CB"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiendpoints094BFA7E"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/endpoints/POST/Resource"
   }
  },
  "sdextensiondeployapiinferences12D38E37": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "inferences",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/Resource"
   }
  },
  "sdextensiondeployapiinferencesOPTIONS8CCB3CA5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferences12D38E37"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiinferencesidAAEAB462": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapiinferences12D38E37"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/Resource"
   }
  },
  "sdextensiondeployapiinferencesidOPTIONS411E2FA3": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferencesidAAEAB462"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiinferencesidstart0D314361": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapiinferencesidAAEAB462"
    },
    "PathPart": "start",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/start/Resource"
   }
  },
  "sdextensiondeployapiinferencesidstartOPTIONS2F608BA4": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferencesidstart0D314361"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/start/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiinferencesidstartPUTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTinferencesidstart8221E919": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "StartInferenceJoblambda2869BED7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/PUT/inferences/*/start"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/start/PUT/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..inferences.{id}.start"
   }
  },
  "sdextensiondeployapiinferencesidstartPUTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTinferencesidstart382FF1AF": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "StartInferenceJoblambda2869BED7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/PUT/inferences/*/start"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/start/PUT/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..inferences.{id}.start"
   }
  },
  "sdextensiondeployapiinferencesidstartPUT68683867": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "StartInferenceJoblambda2869BED7",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "StartInferenceJobrtrespmodel769E5E3B"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "StartInferenceJobrespmodel188C4505"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "StartInferences",
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferencesidstart0D314361"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/start/PUT/Resource"
   }
  },
  "sdextensiondeployapiinferencesidGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETinferencesidD9FC88C6": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetInferenceJoblambda4B931273",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/inferences/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..inferences.{id}"
   }
  },
  "sdextensiondeployapiinferencesidGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETinferencesidA1D9D3E2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetInferenceJoblambda4B931273",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/inferences/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..inferences.{id}"
   }
  },
  "sdextensiondeployapiinferencesidGET9B423093": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetInferenceJoblambda4B931273",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "GetInferenceJobrespmodel962C793C"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "GetInferenceJob",
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferencesidAAEAB462"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/{id}/GET/Resource"
   }
  },
  "sdextensiondeployapiinferencesPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTinferences027CD1E2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateInferenceJoblambda4723B759",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/inferences"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..inferences"
   }
  },
  "sdextensiondeployapiinferencesPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTinferencesDE8B1CC8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateInferenceJoblambda4723B759",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/inferences"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..inferences"
   }
  },
  "sdextensiondeployapiinferencesPOSTA002C849": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateInferenceJoblambda4723B759",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateInferenceJobrtrespmodel33FEC3D5"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateInferenceJobrespmodel1B21B14D"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "201"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateInferenceJobasyncrespmodel04D85D60"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "CreateInferenceJob",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateInferenceJobmodelEA4EB1DF"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferences12D38E37"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/POST/Resource"
   }
  },
  "sdextensiondeployapiinferencesGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETinferences77825087": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListInferenceJobslambda526B4AAA",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/inferences"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..inferences"
   }
  },
  "sdextensiondeployapiinferencesGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETinferences1C306E1E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListInferenceJobslambda526B4AAA",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/inferences"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..inferences"
   }
  },
  "sdextensiondeployapiinferencesGETCCFB7648": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListInferenceJobslambda526B4AAA",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListInferenceJobsrespmodelD9572698"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "ListInferences",
    "RequestParameters": {
     "method.request.querystring.limit": false,
     "method.request.querystring.exclusive_start_key": false,
     "method.request.querystring.type": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferences12D38E37"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/GET/Resource"
   }
  },
  "sdextensiondeployapiinferencesDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEinferences71CA5F25": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteInferenceJobslambdaEA7A157C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/inferences"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..inferences"
   }
  },
  "sdextensiondeployapiinferencesDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEinferences3037F08D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteInferenceJobslambdaEA7A157C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/inferences"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..inferences"
   }
  },
  "sdextensiondeployapiinferencesDELETE98C320D7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteInferenceJobslambdaEA7A157C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "DeleteInferenceJobs",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteInferenceJobsmodelC7FB385F"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiinferences12D38E37"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/inferences/DELETE/Resource"
   }
  },
  "sdextensiondeployapitrainings6310C1BF": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "trainings",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/Resource"
   }
  },
  "sdextensiondeployapitrainingsOPTIONS756F1BC2": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapitrainings6310C1BF"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapitrainingsGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETtrainings597D72CA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListTrainingJobslambda62A1D8F1",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/trainings"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..trainings"
   }
  },
  "sdextensiondeployapitrainingsGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETtrainings9C0C7621": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListTrainingJobslambda62A1D8F1",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/trainings"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..trainings"
   }
  },
  "sdextensiondeployapitrainingsGETAC8B507F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListTrainingJobslambda62A1D8F1",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListTrainingJobsrespmodel332BFAB7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "ListTrainings",
    "RequestParameters": {
     "method.request.querystring.limit": false,
     "method.request.querystring.exclusive_start_key": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapitrainings6310C1BF"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/GET/Resource"
   }
  },
  "sdextensiondeployapitrainingsPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTtrainingsF3F5C10A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateTrainingJoblambda0940FED7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/trainings"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..trainings"
   }
  },
  "sdextensiondeployapitrainingsPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTtrainings23CC1F53": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateTrainingJoblambda0940FED7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/trainings"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..trainings"
   }
  },
  "sdextensiondeployapitrainingsPOST7C7CF1C9": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateTrainingJoblambda0940FED7",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateTrainingJobrespmodel89BD8503"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "201"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "CreateTraining",
    "RequestModels": {
     "$default": {
      "Ref": "CreateTrainingJobmodel970E2BC9"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapitrainings6310C1BF"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/POST/Resource"
   }
  },
  "sdextensiondeployapitrainingsDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEtrainings0CC13C64": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteTrainingJobslambda99370039",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/trainings"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..trainings"
   }
  },
  "sdextensiondeployapitrainingsDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEtrainings0B9E3467": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteTrainingJobslambda99370039",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/trainings"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..trainings"
   }
  },
  "sdextensiondeployapitrainingsDELETE000C8F48": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteTrainingJobslambda99370039",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "DeleteTrainings",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteTrainingJobsmodelB77A2D58"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapitrainings6310C1BF"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/DELETE/Resource"
   }
  },
  "sdextensiondeployapitrainingsid1C682511": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapitrainings6310C1BF"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/{id}/Resource"
   }
  },
  "sdextensiondeployapitrainingsidOPTIONSE7261705": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapitrainingsid1C682511"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/{id}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapitrainingsidGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETtrainingsid2136BBDB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetTrainingJoblambdaEF701579",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/trainings/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/{id}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..trainings.{id}"
   }
  },
  "sdextensiondeployapitrainingsidGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETtrainingsid0DFB6264": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetTrainingJoblambdaEF701579",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/trainings/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/{id}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..trainings.{id}"
   }
  },
  "sdextensiondeployapitrainingsidGET701D2A24": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetTrainingJoblambdaEF701579",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "GetTrainingJobrespmodelC996A2ED"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "GetTraining",
    "ResourceId": {
     "Ref": "sdextensiondeployapitrainingsid1C682511"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/trainings/{id}/GET/Resource"
   }
  },
  "sdextensiondeployapiexecutesE7044A47": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "executes",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/Resource"
   }
  },
  "sdextensiondeployapiexecutesOPTIONS3BD23F0F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesE7044A47"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiexecutesidEFF22F5B": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapiexecutesE7044A47"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/Resource"
   }
  },
  "sdextensiondeployapiexecutesidOPTIONSF4175E50": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesidEFF22F5B"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiexecutesidGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETexecutesid3D4BCCA1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetExecutelambda150CA75A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/executes/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..executes.{id}"
   }
  },
  "sdextensiondeployapiexecutesidGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETexecutesid824A415D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetExecutelambda150CA75A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/executes/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..executes.{id}"
   }
  },
  "sdextensiondeployapiexecutesidGET9DD4F92F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetExecutelambda150CA75A",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "GetExecuterespmodel3901F0C0"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "GetExecute",
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesidEFF22F5B"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/GET/Resource"
   }
  },
  "sdextensiondeployapiexecutesidlogsC47449CF": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapiexecutesidEFF22F5B"
    },
    "PathPart": "logs",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/logs/Resource"
   }
  },
  "sdextensiondeployapiexecutesidlogsOPTIONSBBD3C49F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesidlogsC47449CF"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/logs/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiexecutesidlogsGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETexecutesidlogs9CEFFC0A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetExecuteLogslambdaB26E10D8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/executes/*/logs"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/logs/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..executes.{id}.logs"
   }
  },
  "sdextensiondeployapiexecutesidlogsGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETexecutesidlogs512C96FB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetExecuteLogslambdaB26E10D8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/executes/*/logs"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/logs/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..executes.{id}.logs"
   }
  },
  "sdextensiondeployapiexecutesidlogsGET9C4EA080": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetExecuteLogslambdaB26E10D8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "GetExecuteLogslogsrespmodelABB6CDB7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "GetExecuteLogs",
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesidlogsC47449CF"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/{id}/logs/GET/Resource"
   }
  },
  "sdextensiondeployapiexecutesPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTexecutes3D6874CD": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "Executelambda723A5B87",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/executes"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..executes"
   }
  },
  "sdextensiondeployapiexecutesPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTexecutes7627A153": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "Executelambda723A5B87",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/executes"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..executes"
   }
  },
  "sdextensiondeployapiexecutesPOST95161B01": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "Executelambda723A5B87",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "Executerespmodel341E04E6"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "201"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "Executerespmodel341E04E6"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model504C7085997"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "504"
     }
    ],
    "OperationName": "CreateExecute",
    "RequestModels": {
     "application/json": {
      "Ref": "Executemodel36C77011"
     }
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesE7044A47"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/POST/Resource"
   }
  },
  "sdextensiondeployapiexecutesDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEexecutes2CD320AB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteExecutesApilambda9F01B091",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/executes"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..executes"
   }
  },
  "sdextensiondeployapiexecutesDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEexecutesA5EF8F81": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteExecutesApilambda9F01B091",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/executes"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..executes"
   }
  },
  "sdextensiondeployapiexecutesDELETEF7D7EAEB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteExecutesApilambda9F01B091",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "DeleteExecutes",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteExecutesApimodel065B306E"
     }
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesE7044A47"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/DELETE/Resource"
   }
  },
  "sdextensiondeployapiexecutesGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETexecutesCD29622C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "QueryExecutelambda02DC055D",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/executes"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..executes"
   }
  },
  "sdextensiondeployapiexecutesGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETexecutes0CBAB44B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "QueryExecutelambda02DC055D",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/executes"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..executes"
   }
  },
  "sdextensiondeployapiexecutesGET2EA2E14F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "QueryExecutelambda02DC055D",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "QueryExecuterespmodel41A604C8"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "ListExecutes",
    "RequestParameters": {
     "method.request.querystring.limit": false,
     "method.request.querystring.exclusive_start_key": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiexecutesE7044A47"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/executes/GET/Resource"
   }
  },
  "sdextensiondeployapiprepareECD1D80D": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "prepare",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/Resource"
   }
  },
  "sdextensiondeployapiprepareOPTIONS80FE92EE": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiprepareECD1D80D"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiprepareidA2A5C23B": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapiprepareECD1D80D"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/{id}/Resource"
   }
  },
  "sdextensiondeployapiprepareidOPTIONS4F47DFD7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiprepareidA2A5C23B"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/{id}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiprepareidGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETprepareidBBD73338": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPreparelambda08CC9414",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/prepare/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/{id}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..prepare.{id}"
   }
  },
  "sdextensiondeployapiprepareidGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETprepareid17B9C87B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPreparelambda08CC9414",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/prepare/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/{id}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..prepare.{id}"
   }
  },
  "sdextensiondeployapiprepareidGET6893BE31": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetPreparelambda08CC9414",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "GetPrepare",
    "ResourceId": {
     "Ref": "sdextensiondeployapiprepareidA2A5C23B"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/{id}/GET/Resource"
   }
  },
  "sdextensiondeployapipreparePOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTprepareE3EB0AA8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PreparelambdaFDD8F005",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/prepare"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..prepare"
   }
  },
  "sdextensiondeployapipreparePOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTprepare04C733B6": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PreparelambdaFDD8F005",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/prepare"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..prepare"
   }
  },
  "sdextensiondeployapipreparePOST9A800D8E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "PreparelambdaFDD8F005",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "CreatePrepare",
    "RequestModels": {
     "application/json": {
      "Ref": "Preparemodel6EA19166"
     }
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiprepareECD1D80D"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/prepare/POST/Resource"
   }
  },
  "sdextensiondeployapisync51B71603": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "sync",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/Resource"
   }
  },
  "sdextensiondeployapisyncOPTIONS066DA2FA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapisync51B71603"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapisyncidE2E9BDF2": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapisync51B71603"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/{id}/Resource"
   }
  },
  "sdextensiondeployapisyncidOPTIONS06BF95F0": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapisyncidE2E9BDF2"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/{id}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapisyncidGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETsyncid84463FCD": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetSyncMsglambda9AC8490E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/sync/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/{id}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..sync.{id}"
   }
  },
  "sdextensiondeployapisyncidGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETsyncidDAD3FB01": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetSyncMsglambda9AC8490E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/sync/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/{id}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..sync.{id}"
   }
  },
  "sdextensiondeployapisyncidGETFB22FC92": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetSyncMsglambda9AC8490E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "GetSyncMessage",
    "ResourceId": {
     "Ref": "sdextensiondeployapisyncidE2E9BDF2"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/{id}/GET/Resource"
   }
  },
  "sdextensiondeployapisyncPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTsync5AAEEAFF": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SyncMsglambda50AF709E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/sync"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..sync"
   }
  },
  "sdextensiondeployapisyncPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTsync4AA6F3F0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SyncMsglambda50AF709E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/sync"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..sync"
   }
  },
  "sdextensiondeployapisyncPOSTF3761C55": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "SyncMsglambda50AF709E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "SyncMessage",
    "RequestModels": {
     "application/json": {
      "Ref": "SyncMsgmodel1FA2D2EE"
     }
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapisync51B71603"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/sync/POST/Resource"
   }
  },
  "sdextensiondeployapimerge97F8C42C": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "merge",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/merge/Resource"
   }
  },
  "sdextensiondeployapimergeOPTIONS09B70966": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapimerge97F8C42C"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/merge/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapimergePOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTmergeBC2E56B3": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "MergeExecutelambda6DF5275A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/merge"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/merge/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..merge"
   }
  },
  "sdextensiondeployapimergePOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTmergeD902F8F1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "MergeExecutelambda6DF5275A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/merge"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/merge/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..merge"
   }
  },
  "sdextensiondeployapimergePOSTCD1C02A1": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "MergeExecutelambda6DF5275A",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "MergeExecute",
    "RequestModels": {
     "application/json": {
      "Ref": "MergeExecutemodel4AA79B75"
     }
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapimerge97F8C42C"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/merge/POST/Resource"
   }
  },
  "sdextensiondeployapiworkflowsE6170A44": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "workflows",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/Resource"
   }
  },
  "sdextensiondeployapiworkflowsOPTIONS9FC9CDE4": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiworkflowsE6170A44"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiworkflowsPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTworkflows3E45FF98": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateWorkflowlambdaE824E189",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/workflows"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..workflows"
   }
  },
  "sdextensiondeployapiworkflowsPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTworkflowsFFC84E88": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateWorkflowlambdaE824E189",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/workflows"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..workflows"
   }
  },
  "sdextensiondeployapiworkflowsPOST219DF9CE": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateWorkflowlambdaE824E189",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateWorkflowrespmodelF09E2CD2"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "CreateWorkflow",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateWorkflowmodelC93E9CED"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiworkflowsE6170A44"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/POST/Resource"
   }
  },
  "sdextensiondeployapiworkflowsGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETworkflowsD994F58D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListWorkflowsJobslambda9D55641F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/workflows"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..workflows"
   }
  },
  "sdextensiondeployapiworkflowsGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETworkflowsA9BC3C86": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListWorkflowsJobslambda9D55641F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/workflows"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..workflows"
   }
  },
  "sdextensiondeployapiworkflowsGETBBBE1FDE": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListWorkflowsJobslambda9D55641F",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListWorkflowsJobsrespmodelF70EDC12"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "ListWorkflows",
    "RequestParameters": {
     "method.request.querystring.limit": false,
     "method.request.querystring.exclusive_start_key": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiworkflowsE6170A44"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/GET/Resource"
   }
  },
  "sdextensiondeployapiworkflowsDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEworkflowsE0685D9C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteWorkflowslambda35F462BE",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/workflows"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..workflows"
   }
  },
  "sdextensiondeployapiworkflowsDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEworkflows4D518D06": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteWorkflowslambda35F462BE",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/workflows"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..workflows"
   }
  },
  "sdextensiondeployapiworkflowsDELETEA4E090A5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteWorkflowslambda35F462BE",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model20226849A90"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "202"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "DeleteWorkflows",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteWorkflowsmodel4639EE85"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapiworkflowsE6170A44"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/DELETE/Resource"
   }
  },
  "sdextensiondeployapiworkflowsname8EC925EA": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapiworkflowsE6170A44"
    },
    "PathPart": "{name}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/{name}/Resource"
   }
  },
  "sdextensiondeployapiworkflowsnameOPTIONS415854C8": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapiworkflowsname8EC925EA"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/{name}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapiworkflowsnameGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETworkflowsname5AB09292": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetWorkflowlambda0E7C9F6C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/workflows/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/{name}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..workflows.{name}"
   }
  },
  "sdextensiondeployapiworkflowsnameGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETworkflowsname63506F0F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetWorkflowlambda0E7C9F6C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/workflows/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/{name}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..workflows.{name}"
   }
  },
  "sdextensiondeployapiworkflowsnameGETAF689641": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetWorkflowlambda0E7C9F6C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "GetWorkflowrespmodel09672583"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "GetWorkflow",
    "ResourceId": {
     "Ref": "sdextensiondeployapiworkflowsname8EC925EA"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/workflows/{name}/GET/Resource"
   }
  },
  "sdextensiondeployapischemasF0AA5066": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "PathPart": "schemas",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/Resource"
   }
  },
  "sdextensiondeployapischemasOPTIONS309ED882": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapischemasF0AA5066"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapischemasPOSTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTschemasEB45C26E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateSchemalambdaEBB53D1B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/POST/schemas"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/POST/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..schemas"
   }
  },
  "sdextensiondeployapischemasPOSTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225POSTschemas34107020": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateSchemalambdaEBB53D1B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/POST/schemas"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/POST/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.POST..schemas"
   }
  },
  "sdextensiondeployapischemasPOSTA0B6693D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateSchemalambdaEBB53D1B",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "CreateSchemarespmodel5F1842F8"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "CreateSchema",
    "RequestModels": {
     "application/json": {
      "Ref": "CreateSchemamodel86CC657A"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapischemasF0AA5066"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/POST/Resource"
   }
  },
  "sdextensiondeployapischemasGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETschemasCC6E2511": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListSchemaslambdaB4E56185",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/schemas"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..schemas"
   }
  },
  "sdextensiondeployapischemasGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETschemasE2DDFA0F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListSchemaslambdaB4E56185",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/schemas"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..schemas"
   }
  },
  "sdextensiondeployapischemasGET00AD0229": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListSchemaslambdaB4E56185",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "ListSchemasrespmodel11CA216C"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "ListSchemas",
    "RequestParameters": {
     "method.request.querystring.limit": false,
     "method.request.querystring.exclusive_start_key": false
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapischemasF0AA5066"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/GET/Resource"
   }
  },
  "sdextensiondeployapischemasDELETEApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEschemas58F4A0D2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteSchemaslambda53A34DE7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/DELETE/schemas"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/DELETE/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..schemas"
   }
  },
  "sdextensiondeployapischemasDELETEApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225DELETEschemas38581B62": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteSchemaslambda53A34DE7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/DELETE/schemas"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/DELETE/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.DELETE..schemas"
   }
  },
  "sdextensiondeployapischemasDELETE4D9CE0EF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteSchemaslambda53A34DE7",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model204246F72D1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "204"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model400C0FF62F1"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "DeleteSchemas",
    "RequestModels": {
     "application/json": {
      "Ref": "DeleteSchemasmodelB256AF99"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapischemasF0AA5066"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/DELETE/Resource"
   }
  },
  "sdextensiondeployapischemasname7281C9CC": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "sdextensiondeployapischemasF0AA5066"
    },
    "PathPart": "{name}",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/Resource"
   }
  },
  "sdextensiondeployapischemasnameOPTIONS9204BD61": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'*'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "sdextensiondeployapischemasname7281C9CC"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/OPTIONS/Resource"
   }
  },
  "sdextensiondeployapischemasnameGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETschemasnameAD9ED727": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetSchemalambda7EA93EF9",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/schemas/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..schemas.{name}"
   }
  },
  "sdextensiondeployapischemasnameGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETschemasnameA44CA620": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetSchemalambda7EA93EF9",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/schemas/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET..schemas.{name}"
   }
  },
  "sdextensiondeployapischemasnameGET8B3DC34C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetSchemalambda7EA93EF9",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "GetSchemarespmodel1BEBD6F4"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model404F3874FC7"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "404"
     }
    ],
    "OperationName": "GetSchema",
    "ResourceId": {
     "Ref": "sdextensiondeployapischemasname7281C9CC"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/GET/Resource"
   }
  },
  "sdextensiondeployapischemasnamePUTApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTschemasname0467058C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "UpdateSchemalambda128A9200",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/PUT/schemas/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/PUT/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..schemas.{name}"
   }
  },
  "sdextensiondeployapischemasnamePUTApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225PUTschemasname45CD8918": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "UpdateSchemalambda128A9200",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/PUT/schemas/*"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/PUT/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.PUT..schemas.{name}"
   }
  },
  "sdextensiondeployapischemasnamePUT57499A38": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "UpdateSchemalambda128A9200",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "UpdateSchemarespmodelCF1D9E91"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "UpdateSchema",
    "RequestModels": {
     "application/json": {
      "Ref": "UpdateSchemamodel2657A7AA"
     }
    },
    "RequestValidatorId": {
     "Ref": "esdapivalidatorB43244EF"
    },
    "ResourceId": {
     "Ref": "sdextensiondeployapischemasname7281C9CC"
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/schemas/{name}/PUT/Resource"
   }
  },
  "sdextensiondeployapiGETApiPermissionExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GETDE58CCA4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RootApilambdaA93AFF7C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/GET/"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/GET/ApiPermission.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET.."
   }
  },
  "sdextensiondeployapiGETApiPermissionTestExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225GET9268A8CB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RootApilambdaA93AFF7C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       "/test-invoke-stage/GET/"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/GET/ApiPermission.Test.ExtensionforStableDiffusiononAWSsdextensiondeployapiDC551225.GET.."
   }
  },
  "sdextensiondeployapiGET2E88816B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RootApilambdaA93AFF7C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "RootApirespmodelEC143A47"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model401AB3D433F"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "401"
     },
     {
      "ResponseModels": {
       "application/json": {
        "Ref": "model40314FF7085"
       }
      },
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "403"
     }
    ],
    "OperationName": "RootAPI",
    "ResourceId": {
     "Fn::GetAtt": [
      "sdextensiondeployapi34DC5501",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/Default/GET/Resource"
   }
  },
  "sdextensiondeployapiBADREQUESTBODY05FF7670": {
   "Type": "AWS::ApiGateway::GatewayResponse",
   "Properties": {
    "ResponseTemplates": {
     "application/json": "{\"statusCode\":400,\"message\":\"$context.error.validationErrorString\",\"requestId\":\"$context.extendedRequestId\"}"
    },
    "ResponseType": "BAD_REQUEST_BODY",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/BAD_REQUEST_BODY/Resource"
   }
  },
  "sdextensiondeployapiBADREQUESTPARAMETERS6B417F50": {
   "Type": "AWS::ApiGateway::GatewayResponse",
   "Properties": {
    "ResponseTemplates": {
     "application/json": "{\"statusCode\":400,\"message\":\"$context.error.validationErrorString\",\"requestId\":\"$context.extendedRequestId\"}"
    },
    "ResponseType": "BAD_REQUEST_PARAMETERS",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/BAD_REQUEST_PARAMETERS/Resource"
   }
  },
  "sdextensiondeployapiDEFAULT4XXB982CE33": {
   "Type": "AWS::ApiGateway::GatewayResponse",
   "Properties": {
    "ResponseTemplates": {
     "application/json": "{\"message\":\"$context.error.message\",\"requestId\":\"$context.extendedRequestId\"}"
    },
    "ResponseType": "DEFAULT_4XX",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/DEFAULT_4XX/Resource"
   }
  },
  "sdextensiondeployapiDEFAULT5XX94934491": {
   "Type": "AWS::ApiGateway::GatewayResponse",
   "Properties": {
    "ResponseTemplates": {
     "application/json": "{\"message\":\"$context.error.message\",\"requestId\":\"$context.extendedRequestId\"}"
    },
    "ResponseType": "DEFAULT_5XX",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/DEFAULT_5XX/Resource"
   }
  },
  "sdextensiondeployapisdextensionapikey6202CA72": {
   "Type": "AWS::ApiGateway::ApiKey",
   "Properties": {
    "Enabled": true,
    "Name": "sd-extension-api-key",
    "StageKeys": [
     {
      "RestApiId": {
       "Ref": "sdextensiondeployapi34DC5501"
      },
      "StageName": {
       "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
      }
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Value": {
     "Ref": "SdExtensionApiKey"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/sd-extension-api-key/Resource"
   }
  },
  "sdextensiondeployapisdextensionapiusageplan9ED7E976": {
   "Type": "AWS::ApiGateway::UsagePlan",
   "Properties": {
    "ApiStages": [
     {
      "ApiId": {
       "Ref": "sdextensiondeployapi34DC5501"
      },
      "Stage": {
       "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
      },
      "Throttle": {}
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager",
    "sdextensiondeployapisdextensionapikey6202CA72"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/sd-extension-api-usage-plan/Resource"
   }
  },
  "sdextensiondeployapisdextensionapiusageplanUsagePlanKeyResourceExtensionforStableDiffusiononAWSsdextensiondeployapisdextensionapikey0399F28C1CECF31F": {
   "Type": "AWS::ApiGateway::UsagePlanKey",
   "Properties": {
    "KeyId": {
     "Ref": "sdextensiondeployapisdextensionapikey6202CA72"
    },
    "KeyType": "API_KEY",
    "UsagePlanId": {
     "Ref": "sdextensiondeployapisdextensionapiusageplan9ED7E976"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "sdextensiondeployapisdextensionapikey6202CA72"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-extension-deploy-api/sd-extension-api-usage-plan/UsagePlanKeyResource:ExtensionforStableDiffusiononAWSsdextensiondeployapisdextensionapikey0399F28C"
   }
  },
  "model20226849A90": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "202 Model",
    "Name": "202",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "type": "object",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "Response Model 202",
     "description": "Schema for an API response with a 202 Accepted status. Since the 202 status indicates that the request has been accepted for processing, this schema does not define any properties for the response body.",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        202
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string"
      }
     },
     "required": [
      "statusCode",
      "debug",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/model-202/Resource"
   }
  },
  "model204246F72D1": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "204 Model",
    "Name": "204",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "type": "object",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "Response Model 204",
     "description": "Schema for an API response with a 204 No Content status. Since the 204 status indicates that there is no content in the response, this schema does not define any properties for the response body.",
     "properties": {},
     "additionalProperties": false
    }
   },
   "DependsOn": [
    "model20226849A90",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/model-204/Resource"
   }
  },
  "model400C0FF62F1": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "400 Model",
    "Name": "400",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "type": "object",
     "description": "Bad Request",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "Response Model 400",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        400
       ]
      },
      "requestId": {
       "type": "string",
       "description": "Request ID by API Gateway",
       "format": "uuid"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "statusCode",
      "message"
     ]
    }
   },
   "DependsOn": [
    "model204246F72D1",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/model-400/Resource"
   }
  },
  "model401AB3D433F": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "401 Model",
    "Name": "401",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "type": "object",
     "description": "Unauthorized",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "Response Model 401",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        401
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "enum": [
        "Unauthorized"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "message"
     ]
    }
   },
   "DependsOn": [
    "model400C0FF62F1",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/model-401/Resource"
   }
  },
  "model40314FF7085": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "403 Model",
    "Name": "403",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "type": "object",
     "description": "Forbidden",
     "title": "Response Model 403",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "properties": {
      "requestId": {
       "type": "string",
       "description": "Request ID by API Gateway",
       "format": "uuid"
      },
      "message": {
       "type": "string",
       "enum": [
        "Forbidden"
       ]
      }
     },
     "required": [
      "requestId",
      "message"
     ]
    }
   },
   "DependsOn": [
    "model401AB3D433F",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/model-403/Resource"
   }
  },
  "model404F3874FC7": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "404 Model",
    "Name": "404",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "type": "object",
     "description": "Not Found",
     "title": "Response Model 404",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        404
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "statusCode",
      "debug",
      "message"
     ]
    }
   },
   "DependsOn": [
    "model40314FF7085",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/model-404/Resource"
   }
  },
  "model504C7085997": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "504 Model",
    "Name": "504",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "type": "object",
     "description": "Gateway Timeout",
     "title": "Response Model 504",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "properties": {
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "requestId": {
       "type": "string",
       "description": "Request ID by API Gateway",
       "format": "uuid"
      }
     },
     "required": [
      "message",
      "requestId"
     ]
    }
   },
   "DependsOn": [
    "model404F3874FC7",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/model-504/Resource"
   }
  },
  "esdapivalidatorB43244EF": {
   "Type": "AWS::ApiGateway::RequestValidator",
   "Properties": {
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "ValidateRequestBody": true
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/esd-api-validator/Resource"
   }
  },
  "CreateRolerolePolicy44168BBA": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateRolerolePolicy44168BBA",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateRole-role/Policy/Resource"
   }
  },
  "CreateRolelambda12D93D44": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/48ffe24c42329933625692bf1664da31ddeef61ba11d99df566fb22ff4bbd9ce.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_role.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateRolerolePolicy44168BBA",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateRole-lambda/Resource",
    "aws:asset:path": "asset.48ffe24c42329933625692bf1664da31ddeef61ba11d99df566fb22ff4bbd9ce",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateRolemodelC684973C": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateRole",
    "Name": "CreateRoleRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateRole",
     "type": "object",
     "properties": {
      "role_name": {
       "type": "string",
       "minLength": 1,
       "description": "Role name"
      },
      "permissions": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1
       },
       "minItems": 1,
       "maxItems": 20,
       "description": "List of permissions"
      }
     },
     "required": [
      "role_name",
      "permissions"
     ]
    }
   },
   "DependsOn": [
    "model504C7085997",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateRole-model/Resource"
   }
  },
  "CreateRolerespmodel56A0B0EC": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateRoleResponse",
    "Name": "CreateRoleResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateRole",
     "type": "object",
     "properties": {
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "statusCode": {
       "type": "integer",
       "enum": [
        201
       ]
      }
     },
     "required": [
      "debug",
      "message",
      "statusCode"
     ]
    }
   },
   "DependsOn": [
    "CreateRolemodelC684973C",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateRole-resp-model/Resource"
   }
  },
  "ListRolesrolePolicy6E3F1213": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListRolesrolePolicy6E3F1213",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListRoles-role/Policy/Resource"
   }
  },
  "ListRoleslambda07097DF5": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/48ffe24c42329933625692bf1664da31ddeef61ba11d99df566fb22ff4bbd9ce.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_roles.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListRolesrolePolicy6E3F1213",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListRoles-lambda/Resource",
    "aws:asset:path": "asset.48ffe24c42329933625692bf1664da31ddeef61ba11d99df566fb22ff4bbd9ce",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListRolesrespmodelAE77328B": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListRolesResponse",
    "Name": "ListRolesResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "ListRoles",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "roles": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "role_name": {
            "type": "string"
           },
           "creator": {
            "type": "string",
            "description": "Creator of the dataset"
           },
           "permissions": {
            "type": "array",
            "items": {
             "type": "string"
            },
            "description": "Permissions for user"
           }
          },
          "required": [
           "role_name",
           "creator",
           "permissions"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "roles",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateRolerespmodel56A0B0EC",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListRoles-resp-model/Resource"
   }
  },
  "CreateUserrolePolicyDA6ED3D9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateUserrolePolicyDA6ED3D9",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateUser-role/Policy/Resource"
   }
  },
  "CreateUserlambda000FE6B1": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/42fceebb6ea5dd287679677800271c7a2c4f4f1ef5513d938b8634a85d2ac8bb.zip"
    },
    "Environment": {
     "Variables": {
      "KEY_ID": "alias/sd-extension-password-key",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_user.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateUserrolePolicyDA6ED3D9",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateUser-lambda/Resource",
    "aws:asset:path": "asset.42fceebb6ea5dd287679677800271c7a2c4f4f1ef5513d938b8634a85d2ac8bb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateUsermodel42A05A14": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateUser",
    "Name": "CreateUserRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateUser",
     "type": "object",
     "properties": {
      "username": {
       "type": "string",
       "minLength": 1,
       "description": "Username for user"
      },
      "password": {
       "type": "string",
       "description": "Password for user"
      },
      "roles": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1
       },
       "minItems": 1,
       "maxItems": 20,
       "description": "Roles for user"
      }
     },
     "required": [
      "username"
     ]
    }
   },
   "DependsOn": [
    "ListRolesrespmodelAE77328B",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateUser-model/Resource"
   }
  },
  "CreateUserrespmodel704ED8F4": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateUserResponse",
    "Name": "CreateUserResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateUser",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "debug",
      "message",
      "statusCode"
     ]
    }
   },
   "DependsOn": [
    "CreateUsermodel42A05A14",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateUser-resp-model/Resource"
   }
  },
  "DeleteUsersrolePolicy8BF482C9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteUsersrolePolicy8BF482C9",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteUsers-role/Policy/Resource"
   }
  },
  "DeleteUserslambda86471CA5": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/42fceebb6ea5dd287679677800271c7a2c4f4f1ef5513d938b8634a85d2ac8bb.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_users.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteUsersrolePolicy8BF482C9",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteUsers-lambda/Resource",
    "aws:asset:path": "asset.42fceebb6ea5dd287679677800271c7a2c4f4f1ef5513d938b8634a85d2ac8bb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteUsersmodel0B3B8742": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteUsers",
    "Name": "DeleteUsersRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteUsers",
     "type": "object",
     "properties": {
      "user_name_list": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1,
        "description": "Username for user"
       },
       "minItems": 1,
       "maxItems": 100
      }
     },
     "required": [
      "user_name_list"
     ]
    }
   },
   "DependsOn": [
    "CreateUserrespmodel704ED8F4",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteUsers-model/Resource"
   }
  },
  "ListUsersrolePolicy68EE4171": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListUsersrolePolicy68EE4171",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListUsers-role/Policy/Resource"
   }
  },
  "ListUserslambda4DDAE5BC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/42fceebb6ea5dd287679677800271c7a2c4f4f1ef5513d938b8634a85d2ac8bb.zip"
    },
    "Environment": {
     "Variables": {
      "KEY_ID": "alias/sd-extension-password-key",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_users.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListUsersrolePolicy68EE4171",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListUsers-lambda/Resource",
    "aws:asset:path": "asset.42fceebb6ea5dd287679677800271c7a2c4f4f1ef5513d938b8634a85d2ac8bb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListUsersrespmodelC16B5613": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListUsersResponse",
    "Name": "ListUsersResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "ListUsers",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "users": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "username": {
            "type": "string",
            "minLength": 1,
            "description": "Username for user"
           },
           "roles": {
            "type": "array",
            "items": {
             "type": "string",
             "minLength": 1
            },
            "minItems": 1,
            "maxItems": 20,
            "description": "Roles for user"
           },
           "creator": {
            "type": "string",
            "description": "Creator of the dataset"
           },
           "permissions": {
            "type": "array",
            "items": {
             "type": "string"
            },
            "description": "Permissions for user"
           },
           "password": {
            "type": "string",
            "description": "Password for user"
           }
          },
          "required": [
           "creator",
           "password",
           "permissions",
           "roles",
           "username"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "users",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "data",
      "debug",
      "message",
      "statusCode"
     ]
    }
   },
   "DependsOn": [
    "DeleteUsersmodel0B3B8742",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListUsers-resp-model/Resource"
   }
  },
  "DeleteRolesrolePolicyD2BDABD6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteRolesrolePolicyD2BDABD6",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteRoles-role/Policy/Resource"
   }
  },
  "DeleteRoleslambdaCE7CB867": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/48ffe24c42329933625692bf1664da31ddeef61ba11d99df566fb22ff4bbd9ce.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_roles.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteRolesrolePolicyD2BDABD6",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteRoles-lambda/Resource",
    "aws:asset:path": "asset.48ffe24c42329933625692bf1664da31ddeef61ba11d99df566fb22ff4bbd9ce",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteRolesmodel44B0F205": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteRoles",
    "Name": "DeleteRolesRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteRoles",
     "type": "object",
     "properties": {
      "role_name_list": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1
       },
       "minItems": 1,
       "maxItems": 100
      }
     },
     "required": [
      "role_name_list"
     ]
    }
   },
   "DependsOn": [
    "ListUsersrespmodelC16B5613",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteRoles-model/Resource"
   }
  },
  "RootApirolePolicyC9798F24": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RootApirolePolicyC9798F24",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/RootApi-role/Policy/Resource"
   }
  },
  "RootApilambdaA93AFF7C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/eac795f41c2e0f79b1c0532c5bdf318c62a2f2999c36f05c8b7cac6090899d55.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "root.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "RootApirolePolicyC9798F24"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/RootApi-lambda/Resource",
    "aws:asset:path": "asset.eac795f41c2e0f79b1c0532c5bdf318c62a2f2999c36f05c8b7cac6090899d55",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "RootApirespmodelEC143A47": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model RootAPIResponse",
    "Name": "RootAPIResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "RootApi",
     "type": "object",
     "description": "Response Model RootAPIResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "statusCode",
      "debug",
      "message"
     ]
    }
   },
   "DependsOn": [
    "DeleteRolesmodel44B0F205",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/RootApi-resp-model/Resource"
   }
  },
  "ApiDocoasroleA00F0C30": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ApiDoc-oas-role/Resource"
   }
  },
  "ApiDocoasroleDefaultPolicy7883B51E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":logs:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":log-group:*:*"
         ]
        ]
       }
      },
      {
       "Action": "apigateway:GET",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ApiDocoasroleDefaultPolicy7883B51E",
    "Roles": [
     {
      "Ref": "ApiDocoasroleA00F0C30"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ApiDoc-oas-role/DefaultPolicy/Resource"
   }
  },
  "ApiDoclambda652963C2": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/eac795f41c2e0f79b1c0532c5bdf318c62a2f2999c36f05c8b7cac6090899d55.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "oas.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "ApiDocoasroleA00F0C30",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ApiDocoasroleDefaultPolicy7883B51E",
    "ApiDocoasroleA00F0C30",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ApiDoc-lambda/Resource",
    "aws:asset:path": "asset.eac795f41c2e0f79b1c0532c5bdf318c62a2f2999c36f05c8b7cac6090899d55",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ApiDocrespmodelD0F8CDC6": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetApiOASResponse",
    "Name": "GetApiOASResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "ApiDoc",
     "type": "object",
     "description": "Response Model for OAS",
     "additionalProperties": true
    }
   },
   "DependsOn": [
    "ResourceManager",
    "RootApirespmodelEC143A47"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ApiDoc-resp-model/Resource"
   }
  },
  "PingrolePolicy95CB7FA9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PingrolePolicy95CB7FA9",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Ping-role/Policy/Resource"
   }
  },
  "Pinglambda324263A8": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/eac795f41c2e0f79b1c0532c5bdf318c62a2f2999c36f05c8b7cac6090899d55.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "ping.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "PingrolePolicy95CB7FA9",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Ping-lambda/Resource",
    "aws:asset:path": "asset.eac795f41c2e0f79b1c0532c5bdf318c62a2f2999c36f05c8b7cac6090899d55",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "Pingrespmodel9DBF51CB": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model Ping",
    "Name": "PingResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "PingResponse",
     "type": "object",
     "description": "Response Model for Ping API",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "statusCode",
      "debug",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ApiDocrespmodelD0F8CDC6",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Ping-resp-model/Resource"
   }
  },
  "sdsnsStableDiffusionSnsUserTopicTokenSubscription11F6D68FF": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Ref": "Email"
    },
    "Protocol": "email",
    "TopicArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":StableDiffusionSnsUserTopic"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/sd-sns-StableDiffusionSnsUserTopic/TokenSubscription:1/Resource"
   }
  },
  "CreateWorkflowrolePolicy2DFEDCA6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateWorkflowrolePolicy2DFEDCA6",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateWorkflow-role/Policy/Resource"
   }
  },
  "CreateWorkflowlambdaE824E189": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOWS_TABLE": "ComfyWorkflowsTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_workflow.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateWorkflowrolePolicy2DFEDCA6",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateWorkflow-lambda/Resource",
    "aws:asset:path": "asset.8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateWorkflowmodelC93E9CED": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateWorkflow",
    "Name": "CreateWorkflowRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateWorkflow",
     "type": "object",
     "properties": {
      "name": {
       "type": "string",
       "minLength": 1,
       "maxLength": 20,
       "pattern": "^[A-Za-z][A-Za-z0-9]*$",
       "description": "Name of workflow"
      },
      "size": {
       "type": "string"
      },
      "image_uri": {
       "type": "string",
       "minLength": 1
      },
      "payload_json": {
       "type": "string"
      }
     },
     "required": [
      "name",
      "size",
      "image_uri",
      "payload_json"
     ]
    }
   },
   "DependsOn": [
    "Pingrespmodel9DBF51CB",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateWorkflow-model/Resource"
   }
  },
  "CreateWorkflowrespmodelF09E2CD2": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateWorkflow",
    "Name": "CreateWorkflowResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "CreateWorkflowResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        202
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "name": {
         "type": "string",
         "minLength": 1,
         "maxLength": 20,
         "pattern": "^[A-Za-z][A-Za-z0-9]*$",
         "description": "Name of workflow"
        },
        "size": {
         "type": "string"
        },
        "status": {
         "type": "string"
        },
        "image_uri": {
         "type": "string",
         "minLength": 1
        },
        "payload_json": {
         "type": "string"
        }
       },
       "required": [
        "name",
        "size",
        "status",
        "image_uri",
        "payload_json"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateWorkflowmodelC93E9CED",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateWorkflow-resp-model/Resource"
   }
  },
  "ListWorkflowsJobsrolePolicy518BB75A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListWorkflowsJobsrolePolicy518BB75A",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListWorkflowsJobs-role/Policy/Resource"
   }
  },
  "ListWorkflowsJobslambda9D55641F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOWS_TABLE": "ComfyWorkflowsTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_workflows.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListWorkflowsJobsrolePolicy518BB75A",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListWorkflowsJobs-lambda/Resource",
    "aws:asset:path": "asset.8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListWorkflowsJobsrespmodelF70EDC12": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListWorkflowsJobs",
    "Name": "ListWorkflowsResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "ListWorkflowsResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "workflows": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 20,
            "pattern": "^[A-Za-z][A-Za-z0-9]*$",
            "description": "Name of workflow"
           },
           "size": {
            "type": "string"
           },
           "status": {
            "type": "string"
           },
           "image_uri": {
            "type": "string",
            "minLength": 1
           },
           "payload_json": {
            "type": "string"
           }
          },
          "required": [
           "name",
           "size",
           "status",
           "image_uri",
           "payload_json"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "workflows",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateWorkflowrespmodelF09E2CD2",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListWorkflowsJobs-resp-model/Resource"
   }
  },
  "DeleteWorkflowsrolePolicy9A9061BA": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteWorkflowsrolePolicy9A9061BA",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteWorkflows-role/Policy/Resource"
   }
  },
  "DeleteWorkflowshandlerlambda51DC8F3F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOWS_TABLE": "ComfyWorkflowsTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_workflow_handler.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteWorkflowsrolePolicy9A9061BA",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteWorkflows-handler-lambda/Resource",
    "aws:asset:path": "asset.8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteWorkflowslambda35F462BE": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOWS_TABLE": "ComfyWorkflowsTable",
      "HANDLER_NAME": {
       "Ref": "DeleteWorkflowshandlerlambda51DC8F3F"
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_workflows.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteWorkflowsrolePolicy9A9061BA",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteWorkflows-lambda/Resource",
    "aws:asset:path": "asset.8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteWorkflowsmodel4639EE85": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteWorkflows",
    "Name": "DeleteWorkflowsRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteWorkflows",
     "type": "object",
     "properties": {
      "workflow_name_list": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 20,
        "pattern": "^[A-Za-z][A-Za-z0-9]*$",
        "description": "Name of workflow"
       },
       "minItems": 1,
       "maxItems": 10
      }
     },
     "required": [
      "workflow_name_list"
     ]
    }
   },
   "DependsOn": [
    "ListWorkflowsJobsrespmodelF70EDC12",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteWorkflows-model/Resource"
   }
  },
  "GetWorkflowrolePolicy0BAA546A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetWorkflowrolePolicy0BAA546A",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetWorkflow-role/Policy/Resource"
   }
  },
  "GetWorkflowlambda0E7C9F6C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOWS_TABLE": "ComfyWorkflowsTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_workflow.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetWorkflowrolePolicy0BAA546A",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetWorkflow-lambda/Resource",
    "aws:asset:path": "asset.8f48469028decbdf9756831a54e53142cad30427da3becd92c00e04937118103",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetWorkflowrespmodel09672583": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetWorkflow",
    "Name": "GetWorkflowResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "GetWorkflow",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "name": {
         "type": "string",
         "minLength": 1,
         "maxLength": 20,
         "pattern": "^[A-Za-z][A-Za-z0-9]*$",
         "description": "Name of workflow"
        },
        "size": {
         "type": "string"
        },
        "status": {
         "type": "string"
        },
        "image_uri": {
         "type": "string",
         "minLength": 1
        },
        "payload_json": {
         "type": "string"
        }
       },
       "required": [
        "name",
        "size",
        "status",
        "image_uri",
        "payload_json"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "DeleteWorkflowsmodel4639EE85",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetWorkflow-resp-model/Resource"
   }
  },
  "CreateSchemarolePolicy378B14E4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateSchemarolePolicy378B14E4",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateSchema-role/Policy/Resource"
   }
  },
  "CreateSchemalambdaEBB53D1B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOW_SCHEMA_TABLE": "ComfyWorkflowsSchemasTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_schema.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateSchemarolePolicy378B14E4",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateSchema-lambda/Resource",
    "aws:asset:path": "asset.ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateSchemamodel86CC657A": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateSchema",
    "Name": "CreateSchemaRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateSchema",
     "type": "object",
     "properties": {
      "name": {
       "type": "string",
       "minLength": 1,
       "maxLength": 20,
       "pattern": "^[A-Za-z][A-Za-z0-9_]*$",
       "description": "Name of Workflow Schema"
      },
      "payload": {
       "type": "string",
       "description": "Payload JSON String of Schema",
       "minLength": 1
      },
      "workflow": {
       "type": "string"
      }
     },
     "required": [
      "name",
      "payload",
      "workflow"
     ]
    }
   },
   "DependsOn": [
    "GetWorkflowrespmodel09672583",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateSchema-model/Resource"
   }
  },
  "CreateSchemarespmodel5F1842F8": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateSchema",
    "Name": "CreateSchemaResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "CreateSchemaResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        202
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "name": {
         "type": "string",
         "minLength": 1,
         "maxLength": 20,
         "pattern": "^[A-Za-z][A-Za-z0-9_]*$",
         "description": "Name of Workflow Schema"
        },
        "payload": {
         "type": "string",
         "description": "Payload JSON String of Schema",
         "minLength": 1
        },
        "workflow": {
         "type": "string"
        },
        "create_time": {
         "type": "string"
        }
       },
       "required": [
        "name",
        "payload",
        "workflow",
        "create_time"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateSchemamodel86CC657A",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateSchema-resp-model/Resource"
   }
  },
  "ListSchemasrolePolicyD24CF301": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListSchemasrolePolicyD24CF301",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListSchemas-role/Policy/Resource"
   }
  },
  "ListSchemaslambdaB4E56185": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOW_SCHEMA_TABLE": "ComfyWorkflowsSchemasTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_schemas.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListSchemasrolePolicyD24CF301",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListSchemas-lambda/Resource",
    "aws:asset:path": "asset.ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListSchemasrespmodel11CA216C": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListSchemas",
    "Name": "ListSchemasResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "ListSchemasResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "schemas": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 20,
            "pattern": "^[A-Za-z][A-Za-z0-9_]*$",
            "description": "Name of Workflow Schema"
           },
           "payload": {
            "type": "string",
            "description": "Payload JSON String of Schema",
            "minLength": 1
           },
           "workflow": {
            "type": "string"
           },
           "create_time": {
            "type": "string"
           }
          },
          "required": [
           "name",
           "payload",
           "workflow",
           "create_time"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "schemas",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateSchemarespmodel5F1842F8",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListSchemas-resp-model/Resource"
   }
  },
  "DeleteSchemasrolePolicyFDCAA0D4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteSchemasrolePolicyFDCAA0D4",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteSchemas-role/Policy/Resource"
   }
  },
  "DeleteSchemaslambda53A34DE7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOW_SCHEMA_TABLE": "ComfyWorkflowsSchemasTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_schemas.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteSchemasrolePolicyFDCAA0D4",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteSchemas-lambda/Resource",
    "aws:asset:path": "asset.ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteSchemasmodelB256AF99": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteSchemas",
    "Name": "DeleteSchemasRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteSchemas",
     "type": "object",
     "properties": {
      "schema_name_list": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 20,
        "pattern": "^[A-Za-z][A-Za-z0-9_]*$",
        "description": "Name of Workflow Schema"
       },
       "minItems": 1,
       "maxItems": 10
      }
     },
     "required": [
      "schema_name_list"
     ]
    }
   },
   "DependsOn": [
    "ListSchemasrespmodel11CA216C",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteSchemas-model/Resource"
   }
  },
  "GetSchemarolePolicyB074484B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetSchemarolePolicyB074484B",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetSchema-role/Policy/Resource"
   }
  },
  "GetSchemalambda7EA93EF9": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOW_SCHEMA_TABLE": "ComfyWorkflowsSchemasTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_schema.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetSchemarolePolicyB074484B",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetSchema-lambda/Resource",
    "aws:asset:path": "asset.ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetSchemarespmodel1BEBD6F4": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetSchema",
    "Name": "GetSchemaResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "GetSchema",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "name": {
         "type": "string",
         "minLength": 1,
         "maxLength": 20,
         "pattern": "^[A-Za-z][A-Za-z0-9_]*$",
         "description": "Name of Workflow Schema"
        },
        "payload": {
         "type": "string",
         "description": "Payload JSON String of Schema",
         "minLength": 1
        },
        "workflow": {
         "type": "string"
        },
        "create_time": {
         "type": "string"
        }
       },
       "required": [
        "name",
        "payload",
        "workflow",
        "create_time"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "DeleteSchemasmodelB256AF99",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetSchema-resp-model/Resource"
   }
  },
  "UpdateSchemarolePolicy3C1109BE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "UpdateSchemarolePolicy3C1109BE",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateSchema-role/Policy/Resource"
   }
  },
  "UpdateSchemalambda128A9200": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5.zip"
    },
    "Environment": {
     "Variables": {
      "WORKFLOW_SCHEMA_TABLE": "ComfyWorkflowsSchemasTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "update_schema.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateSchemarolePolicy3C1109BE"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateSchema-lambda/Resource",
    "aws:asset:path": "asset.ba255414fffd27f29738eb1d3cc22f4703a4abb50173b53c6c89dbaf3710e0f5",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "UpdateSchemamodel2657A7AA": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model UpdateSchema",
    "Name": "UpdateSchemaRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "UpdateSchema",
     "type": "object",
     "properties": {
      "workflow": {
       "type": "string"
      },
      "payload": {
       "type": "string",
       "description": "Payload JSON String of Schema",
       "minLength": 1
      }
     },
     "required": [
      "workflow",
      "payload"
     ]
    }
   },
   "DependsOn": [
    "GetSchemarespmodel1BEBD6F4",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateSchema-model/Resource"
   }
  },
  "UpdateSchemarespmodelCF1D9E91": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model UpdateSchema",
    "Name": "UpdateSchemaResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "UpdateSchema",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "statusCode",
      "debug",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateSchemamodel2657A7AA"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateSchema-resp-model/Resource"
   }
  },
  "CreateInferenceJobrole34CE85DA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateInferenceJob-role/Resource"
   }
  },
  "CreateInferenceJobroleDefaultPolicyF63A1599": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDInferenceJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sagemaker:InvokeEndpointAsync",
        "sagemaker:InvokeEndpoint"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":endpoint/*"
         ]
        ]
       }
      },
      {
       "Action": "s3:PutObject",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*SageMaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*sagemaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "cloudwatch:PutMetricAlarm",
        "cloudwatch:PutMetricData",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateInferenceJobroleDefaultPolicyF63A1599",
    "Roles": [
     {
      "Ref": "CreateInferenceJobrole34CE85DA"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateInferenceJob-role/DefaultPolicy/Resource"
   }
  },
  "CreateInferenceJoblambda4723B759": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a.zip"
    },
    "Environment": {
     "Variables": {
      "INFERENCE_JOB_TABLE": "SDInferenceJobTable",
      "CHECKPOINT_TABLE": "CheckpointTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "create_inference_job.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "CreateInferenceJobrole34CE85DA",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateInferenceJobroleDefaultPolicyF63A1599",
    "CreateInferenceJobrole34CE85DA",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateInferenceJob-lambda/Resource",
    "aws:asset:path": "asset.0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateInferenceJobmodelEA4EB1DF": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateInferenceJob",
    "Name": "CreateInferenceJobRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateInferenceJob",
     "type": "object",
     "properties": {
      "task_type": {
       "type": "string",
       "minLength": 1
      },
      "custom_extensions": {
       "type": "string"
      },
      "inference_type": {
       "type": "string",
       "enum": [
        "Real-time",
        "Async"
       ],
       "description": "Inference type"
      },
      "workflow": {
       "type": "string",
       "description": "Workflow remark",
       "pattern": "^[A-Za-z][A-Za-z0-9_]*$"
      },
      "payload_string": {
       "type": "string"
      },
      "models": {
       "type": "object",
       "properties": {
        "embeddings": {
         "type": "array"
        }
       }
      }
     },
     "required": [
      "task_type",
      "inference_type",
      "models"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateSchemarespmodelCF1D9E91"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateInferenceJob-model/Resource"
   }
  },
  "CreateInferenceJobrtrespmodel33FEC3D5": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateInferenceJobRealtimeResponse",
    "Name": "CreateInferenceJobRealtimeResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateInferenceJobRealtimeResponse",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "img_presigned_urls": {
         "type": "array",
         "items": {
          "type": "string",
          "format": "uri"
         }
        },
        "output_presigned_urls": {
         "type": "array",
         "items": {
          "type": "string",
          "format": "uri"
         }
        },
        "startTime": {
         "type": "string",
         "format": "date-time"
        },
        "taskType": {
         "type": "string"
        },
        "image_names": {
         "type": "array",
         "items": {
          "type": "string",
          "pattern": "^.+\\.*$"
         }
        },
        "params": {
         "type": "object",
         "additionalProperties": true,
         "properties": {
          "input_body_presign_url": {
           "type": "string",
           "format": "uri"
          },
          "input_body_s3": {
           "type": "string",
           "format": "uri"
          },
          "output_path": {
           "type": "string"
          },
          "sagemaker_inference_instance_type": {
           "type": "string",
           "description": "Instance Type"
          },
          "sagemaker_inference_endpoint_id": {
           "type": "string",
           "description": "ID of Endpoint",
           "pattern": "^[a-f0-9\\-]{36}$"
          },
          "sagemaker_inference_endpoint_name": {
           "type": "string",
           "description": "Name of endpoint"
          }
         },
         "required": [
          "input_body_s3",
          "sagemaker_inference_instance_type",
          "sagemaker_inference_endpoint_id",
          "sagemaker_inference_endpoint_name"
         ]
        },
        "InferenceJobId": {
         "type": "string",
         "format": "uuid"
        },
        "status": {
         "type": "string"
        },
        "createTime": {
         "type": "string",
         "format": "date-time"
        },
        "owner_group_or_role": {
         "type": "array",
         "items": {
          "type": "string"
         }
        },
        "sagemakerRaw": {
         "type": "object"
        },
        "payload_string": {
         "type": "string"
        }
       }
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateInferenceJobmodelEA4EB1DF",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateInferenceJob-rt-resp-model/Resource"
   }
  },
  "CreateInferenceJobrespmodel1B21B14D": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateInferenceJob",
    "Name": "CreateInferenceJobResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateInferenceJobResponse",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "inference": {
         "type": "object",
         "additionalProperties": true,
         "properties": {
          "id": {
           "type": "string",
           "format": "uuid"
          },
          "type": {
           "type": "string"
          },
          "workflow": {
           "type": "string",
           "description": "Workflow remark",
           "pattern": "^[A-Za-z][A-Za-z0-9_]*$"
          },
          "api_params_s3_location": {
           "type": "string",
           "format": "uri"
          },
          "api_params_s3_upload_url": {
           "type": "string",
           "format": "uri"
          },
          "models": {
           "type": "array",
           "items": {
            "type": "object",
            "properties": {
             "id": {
              "type": "string",
              "format": "uuid"
             },
             "name": {
              "type": "array",
              "items": {
               "type": "string"
              }
             },
             "type": {
              "type": "string"
             }
            },
            "required": [
             "id",
             "name",
             "type"
            ]
           }
          }
         },
         "required": [
          "id",
          "type",
          "api_params_s3_location",
          "api_params_s3_upload_url"
         ]
        }
       },
       "required": [
        "inference"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateInferenceJobrtrespmodel33FEC3D5",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateInferenceJob-resp-model/Resource"
   }
  },
  "CreateInferenceJobasyncrespmodel04D85D60": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateInferenceJobAsyncResponse",
    "Name": "CreateInferenceJobAsyncResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateInferenceJobAsyncResponse",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "InferenceJobId": {
         "type": "string",
         "format": "uuid"
        },
        "status": {
         "type": "string"
        }
       },
       "required": [
        "InferenceJobId",
        "status"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateInferenceJobrespmodel1B21B14D",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateInferenceJob-async-resp-model/Resource"
   }
  },
  "StartInferenceJobrole3ED837C0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/StartInferenceJob-role/Resource"
   }
  },
  "StartInferenceJobroleDefaultPolicy5C5C0680": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDInferenceJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sagemaker:InvokeEndpointAsync",
        "sagemaker:InvokeEndpoint"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":endpoint/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:ListBuckets",
        "s3:CreateBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*sagemaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "cloudwatch:PutMetricData",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "StartInferenceJobroleDefaultPolicy5C5C0680",
    "Roles": [
     {
      "Ref": "StartInferenceJobrole3ED837C0"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/StartInferenceJob-role/DefaultPolicy/Resource"
   }
  },
  "StartInferenceJoblambda2869BED7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a.zip"
    },
    "Environment": {
     "Variables": {
      "INFERENCE_JOB_TABLE": "SDInferenceJobTable",
      "CHECKPOINT_TABLE": "CheckpointTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "start_inference_job.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "StartInferenceJobrole3ED837C0",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "StartInferenceJobroleDefaultPolicy5C5C0680",
    "StartInferenceJobrole3ED837C0"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/StartInferenceJob-lambda/Resource",
    "aws:asset:path": "asset.0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "StartInferenceJobrtrespmodel769E5E3B": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model StartInferenceJobRealtime",
    "Name": "StartInferenceJobRealtimeResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "StartInferenceJob",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "img_presigned_urls": {
         "type": "array",
         "items": {
          "type": "string",
          "format": "uri"
         }
        },
        "output_presigned_urls": {
         "type": "array",
         "items": {
          "type": "string",
          "format": "uri"
         }
        },
        "startTime": {
         "type": "string",
         "format": "date-time"
        },
        "taskType": {
         "type": "string"
        },
        "image_names": {
         "type": "array",
         "items": {
          "type": "string",
          "pattern": "^.+\\.*$"
         }
        },
        "params": {
         "type": "object",
         "additionalProperties": true,
         "properties": {
          "input_body_presign_url": {
           "type": "string",
           "format": "uri"
          },
          "input_body_s3": {
           "type": "string",
           "format": "uri"
          },
          "output_path": {
           "type": "string"
          },
          "sagemaker_inference_instance_type": {
           "type": "string",
           "description": "Instance Type"
          },
          "sagemaker_inference_endpoint_id": {
           "type": "string",
           "description": "ID of Endpoint",
           "pattern": "^[a-f0-9\\-]{36}$"
          },
          "sagemaker_inference_endpoint_name": {
           "type": "string",
           "description": "Name of endpoint"
          }
         },
         "required": [
          "input_body_s3",
          "sagemaker_inference_instance_type",
          "sagemaker_inference_endpoint_id",
          "sagemaker_inference_endpoint_name"
         ]
        },
        "InferenceJobId": {
         "type": "string",
         "format": "uuid"
        },
        "status": {
         "type": "string"
        },
        "createTime": {
         "type": "string",
         "format": "date-time"
        },
        "owner_group_or_role": {
         "type": "array",
         "items": {
          "type": "string"
         }
        },
        "sagemakerRaw": {
         "type": "object"
        },
        "payload_string": {
         "type": "string"
        }
       }
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateInferenceJobasyncrespmodel04D85D60",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/StartInferenceJob-rt-resp-model/Resource"
   }
  },
  "StartInferenceJobrespmodel188C4505": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model StartInferenceJobAsync",
    "Name": "StartInferenceJobAsyncResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "StartInferenceJobAsyncResponse",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "InferenceJobId": {
         "type": "string",
         "format": "uuid"
        },
        "status": {
         "type": "string"
        }
       },
       "required": [
        "InferenceJobId",
        "status"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "StartInferenceJobrtrespmodel769E5E3B"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/StartInferenceJob-resp-model/Resource"
   }
  },
  "ListInferenceJobsrole32336FF2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListInferenceJobs-role/Resource"
   }
  },
  "ListInferenceJobsroleDefaultPolicyDA5DF588": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDInferenceJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDInferenceJobTable/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListInferenceJobsroleDefaultPolicyDA5DF588",
    "Roles": [
     {
      "Ref": "ListInferenceJobsrole32336FF2"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListInferenceJobs-role/DefaultPolicy/Resource"
   }
  },
  "ListInferenceJobslambda526B4AAA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a.zip"
    },
    "Environment": {
     "Variables": {
      "INFERENCE_JOB_TABLE": "SDInferenceJobTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_inferences.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "ListInferenceJobsrole32336FF2",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListInferenceJobsroleDefaultPolicyDA5DF588",
    "ListInferenceJobsrole32336FF2",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListInferenceJobs-lambda/Resource",
    "aws:asset:path": "asset.0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListInferenceJobsrespmodelD9572698": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListInferences",
    "Name": "ListInferencesResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "ListInferenceJobs",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "inferences": {
         "type": "array",
         "items": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
           "InferenceJobId": {
            "type": "string",
            "format": "uuid"
           },
           "status": {
            "type": "string"
           },
           "taskType": {
            "type": "string"
           },
           "owner_group_or_role": {
            "type": "array",
            "items": {
             "type": "string"
            }
           },
           "startTime": {
            "type": "string",
            "format": "date-time"
           },
           "createTime": {
            "type": "string",
            "format": "date-time"
           },
           "image_names": {
            "type": "array",
            "items": {
             "type": "string",
             "pattern": "^.+\\.*$"
            }
           },
           "params": {
            "type": "object",
            "additionalProperties": true,
            "properties": {
             "input_body_presign_url": {
              "type": "string",
              "format": "uri"
             },
             "input_body_s3": {
              "type": "string",
              "format": "uri"
             },
             "output_path": {
              "type": "string"
             },
             "sagemaker_inference_instance_type": {
              "type": "string",
              "description": "Instance Type"
             },
             "sagemaker_inference_endpoint_id": {
              "type": "string",
              "description": "ID of Endpoint",
              "pattern": "^[a-f0-9\\-]{36}$"
             },
             "sagemaker_inference_endpoint_name": {
              "type": "string",
              "description": "Name of endpoint"
             }
            },
            "required": [
             "input_body_s3",
             "sagemaker_inference_instance_type",
             "sagemaker_inference_endpoint_id",
             "sagemaker_inference_endpoint_name"
            ]
           },
           "inference_type": {
            "type": "string",
            "enum": [
             "Real-time",
             "Async"
            ],
            "description": "Inference type"
           }
          },
          "required": [
           "InferenceJobId",
           "status",
           "taskType",
           "owner_group_or_role",
           "startTime",
           "createTime",
           "image_names",
           "params",
           "inference_type"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "inferences",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "StartInferenceJobrespmodel188C4505"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListInferenceJobs-resp-model/Resource"
   }
  },
  "GetInferenceJobrole339128B7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetInferenceJob-role/Resource"
   }
  },
  "GetInferenceJobroleDefaultPolicyDD854C40": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDInferenceJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:GetObject",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":s3:::",
          {
           "Fn::GetAtt": [
            "ResourceManager",
            "BucketName"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":logs:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":log-group:*:*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetInferenceJobroleDefaultPolicyDD854C40",
    "Roles": [
     {
      "Ref": "GetInferenceJobrole339128B7"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetInferenceJob-role/DefaultPolicy/Resource"
   }
  },
  "GetInferenceJoblambda4B931273": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a.zip"
    },
    "Environment": {
     "Variables": {
      "INFERENCE_JOB_TABLE": "SDInferenceJobTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_inference_job.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "GetInferenceJobrole339128B7",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetInferenceJobroleDefaultPolicyDD854C40",
    "GetInferenceJobrole339128B7",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetInferenceJob-lambda/Resource",
    "aws:asset:path": "asset.0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetInferenceJobrespmodel962C793C": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetInferenceJob",
    "Name": "GetInferenceJobResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "GetInferenceJob",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "img_presigned_urls": {
         "type": "array",
         "items": {
          "type": "string",
          "format": "uri"
         }
        },
        "output_presigned_urls": {
         "type": "array",
         "items": {
          "type": "string",
          "format": "uri"
         }
        },
        "startTime": {
         "type": "string",
         "format": "date-time"
        },
        "taskType": {
         "type": "string"
        },
        "image_names": {
         "type": "array",
         "items": {
          "type": "string",
          "pattern": "^.+\\.*$"
         }
        },
        "params": {
         "type": "object",
         "additionalProperties": true,
         "properties": {
          "input_body_presign_url": {
           "type": "string",
           "format": "uri"
          },
          "input_body_s3": {
           "type": "string",
           "format": "uri"
          },
          "output_path": {
           "type": "string"
          },
          "sagemaker_inference_instance_type": {
           "type": "string",
           "description": "Instance Type"
          },
          "sagemaker_inference_endpoint_id": {
           "type": "string",
           "description": "ID of Endpoint",
           "pattern": "^[a-f0-9\\-]{36}$"
          },
          "sagemaker_inference_endpoint_name": {
           "type": "string",
           "description": "Name of endpoint"
          }
         },
         "required": [
          "input_body_s3",
          "sagemaker_inference_instance_type",
          "sagemaker_inference_endpoint_id",
          "sagemaker_inference_endpoint_name"
         ]
        },
        "InferenceJobId": {
         "type": "string",
         "format": "uuid"
        },
        "status": {
         "type": "string"
        },
        "createTime": {
         "type": "string",
         "format": "date-time"
        },
        "owner_group_or_role": {
         "type": "array",
         "items": {
          "type": "string"
         }
        },
        "sagemakerRaw": {
         "type": "object"
        },
        "payload_string": {
         "type": "string"
        }
       },
       "required": [
        "img_presigned_urls",
        "output_presigned_urls",
        "startTime",
        "taskType",
        "params",
        "InferenceJobId",
        "status",
        "inference_type",
        "image_names",
        "createTime",
        "owner_group_or_role"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ListInferenceJobsrespmodelD9572698",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetInferenceJob-resp-model/Resource"
   }
  },
  "DeleteInferenceJobsroleEAC53D01": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteInferenceJobs-role/Resource"
   }
  },
  "DeleteInferenceJobsroleDefaultPolicy95660CFA": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:DeleteItem",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDInferenceJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:DeleteObject",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":s3:::",
          {
           "Fn::GetAtt": [
            "ResourceManager",
            "BucketName"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":logs:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":log-group:*:*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteInferenceJobsroleDefaultPolicy95660CFA",
    "Roles": [
     {
      "Ref": "DeleteInferenceJobsroleEAC53D01"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteInferenceJobs-role/DefaultPolicy/Resource"
   }
  },
  "DeleteInferenceJobslambdaEA7A157C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a.zip"
    },
    "Environment": {
     "Variables": {
      "INFERENCE_JOB_TABLE": "SDInferenceJobTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_inference_jobs.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "DeleteInferenceJobsroleEAC53D01",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteInferenceJobsroleDefaultPolicy95660CFA",
    "DeleteInferenceJobsroleEAC53D01",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteInferenceJobs-lambda/Resource",
    "aws:asset:path": "asset.0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteInferenceJobsmodelC7FB385F": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteInferenceJobs",
    "Name": "DeleteInferenceJobsRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteInferenceJobs",
     "type": "object",
     "properties": {
      "inference_id_list": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1
       },
       "minItems": 1,
       "maxItems": 100
      }
     },
     "required": [
      "inference_id_list"
     ]
    }
   },
   "DependsOn": [
    "GetInferenceJobrespmodel962C793C",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteInferenceJobs-model/Resource"
   }
  },
  "InferenceResultNotificationServiceRole077F0813": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/ServiceRole/Resource"
   }
  },
  "InferenceResultNotificationServiceRoleDefaultPolicy0779EFB5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "s3:Get*",
        "s3:List*",
        "s3:PutObject",
        "s3:GetObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*sagemaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:PutItem",
        "dynamodb:DeleteItem",
        "dynamodb:UpdateItem",
        "dynamodb:Describe*",
        "dynamodb:List*",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDInferenceJobTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sns:Publish",
        "sns:ListTopics"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":sns:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":StableDiffusionSnsUserTopic"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":sns:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":ReceiveSageMakerInferenceError"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":sns:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":ReceiveSageMakerInferenceSuccess"
          ]
         ]
        }
       ]
      },
      {
       "Action": "cloudwatch:PutMetricData",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "InferenceResultNotificationServiceRoleDefaultPolicy0779EFB5",
    "Roles": [
     {
      "Ref": "InferenceResultNotificationServiceRole077F0813"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "InferenceResultNotificationDC2B020B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a.zip"
    },
    "Environment": {
     "Variables": {
      "INFERENCE_JOB_TABLE": "SDInferenceJobTable",
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "REGION_NAME": {
       "Ref": "AWS::Region"
      },
      "SNS_INFERENCE_SUCCESS": "ReceiveSageMakerInferenceSuccess",
      "SNS_INFERENCE_ERROR": "ReceiveSageMakerInferenceError",
      "NOTICE_SNS_TOPIC": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":StableDiffusionSnsUserTopic"
        ]
       ]
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "inference_async_events.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "InferenceResultNotificationServiceRole077F0813",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "InferenceResultNotificationServiceRoleDefaultPolicy0779EFB5",
    "InferenceResultNotificationServiceRole077F0813",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/Resource",
    "aws:asset:path": "asset.0e80894a60ee861a8291815da5b2cfb82f382867f99c87deaabab7197dafa01a",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "InferenceResultNotificationLogRetentionA8E2A0C1": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "InferenceResultNotificationDC2B020B"
       }
      ]
     ]
    },
    "RetentionInDays": 7
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/LogRetention/Resource"
   }
  },
  "InferenceResultNotificationAllowInvokeExtensionforStableDiffusiononAWSsdsnsReceiveSageMakerInferenceSuccessEB03D2DC2539E216": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "InferenceResultNotificationDC2B020B",
      "Arn"
     ]
    },
    "Principal": "sns.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":ReceiveSageMakerInferenceSuccess"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/AllowInvoke:ExtensionforStableDiffusiononAWSsdsnsReceiveSageMakerInferenceSuccessEB03D2DC"
   }
  },
  "InferenceResultNotificationsdsnsReceiveSageMakerInferenceSuccessE20EE683": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Fn::GetAtt": [
      "InferenceResultNotificationDC2B020B",
      "Arn"
     ]
    },
    "Protocol": "lambda",
    "Region": {
     "Ref": "AWS::Region"
    },
    "TopicArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":ReceiveSageMakerInferenceSuccess"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/sd-sns-ReceiveSageMakerInferenceSuccess/Resource"
   }
  },
  "InferenceResultNotificationAllowInvokeExtensionforStableDiffusiononAWSsdsnsReceiveSageMakerInferenceError0A07C4B060BD9F29": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "InferenceResultNotificationDC2B020B",
      "Arn"
     ]
    },
    "Principal": "sns.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":ReceiveSageMakerInferenceError"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/AllowInvoke:ExtensionforStableDiffusiononAWSsdsnsReceiveSageMakerInferenceError0A07C4B0"
   }
  },
  "InferenceResultNotificationsdsnsReceiveSageMakerInferenceError485E5091": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Fn::GetAtt": [
      "InferenceResultNotificationDC2B020B",
      "Arn"
     ]
    },
    "Protocol": "lambda",
    "Region": {
     "Ref": "AWS::Region"
    },
    "TopicArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":ReceiveSageMakerInferenceError"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/InferenceResultNotification/sd-sns-ReceiveSageMakerInferenceError/Resource"
   }
  },
  "ListCheckPointsrole92FBE3A2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListCheckPoints-role/Resource"
   }
  },
  "ListCheckPointsroleDefaultPolicy8C24169D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListCheckPointsroleDefaultPolicy8C24169D",
    "Roles": [
     {
      "Ref": "ListCheckPointsrole92FBE3A2"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListCheckPoints-role/DefaultPolicy/Resource"
   }
  },
  "ListCheckPointslambda52E5746A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e.zip"
    },
    "Environment": {
     "Variables": {
      "CHECKPOINT_TABLE": "CheckpointTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_checkpoints.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "ListCheckPointsrole92FBE3A2",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListCheckPointsroleDefaultPolicy8C24169D",
    "ListCheckPointsrole92FBE3A2",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListCheckPoints-lambda/Resource",
    "aws:asset:path": "asset.6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListCheckPointsrespmodel6CE97E27": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListCheckPoints",
    "Name": "ListCheckpointsResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "title": "ListCheckpointsResponse",
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "page": {
         "type": "integer"
        },
        "per_page": {
         "type": "integer"
        },
        "pages": {
         "type": "integer"
        },
        "total": {
         "type": "integer"
        },
        "checkpoints": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "id": {
            "type": "string",
            "format": "uuid",
            "description": "ID of checkpoint"
           },
           "s3Location": {
            "type": "string"
           },
           "type": {
            "type": "string",
            "description": "Type of checkpoint",
            "enum": [
             "Stable-diffusion",
             "embeddings",
             "Lora",
             "hypernetworks",
             "ControlNet",
             "VAE",
             "Comfy"
            ]
           },
           "status": {
            "type": "string",
            "description": "Status of checkpoint"
           },
           "name": {
            "type": "array",
            "items": {
             "type": "string"
            }
           },
           "created": {
            "type": "string"
           },
           "allowed_roles_or_users": {
            "type": "array",
            "items": {
             "type": "string"
            }
           },
           "target_path": {
            "oneOf": [
             {
              "type": "null"
             },
             {
              "type": "string"
             }
            ]
           },
           "source_path": {
            "oneOf": [
             {
              "type": "null"
             },
             {
              "type": "string"
             }
            ]
           }
          },
          "required": [
           "allowed_roles_or_users",
           "created",
           "id",
           "name",
           "s3Location",
           "status",
           "type"
          ]
         }
        }
       },
       "required": [
        "checkpoints",
        "page",
        "pages",
        "per_page",
        "total"
       ]
      }
     },
     "required": [
      "data",
      "debug",
      "message",
      "statusCode"
     ]
    }
   },
   "DependsOn": [
    "DeleteInferenceJobsmodelC7FB385F",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListCheckPoints-resp-model/Resource"
   }
  },
  "CreateCheckPointrole6EAA5186": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateCheckPoint-role/Resource"
   }
  },
  "CreateCheckPointroleDefaultPolicy82FCE2AB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:AbortMultipartUpload",
        "s3:ListMultipartUploadParts",
        "s3:ListBucketMultipartUploads"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*SageMaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "lambda:invokeFunction",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":lambda:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":function:*CreateCheckPoint*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateCheckPointroleDefaultPolicy82FCE2AB",
    "Roles": [
     {
      "Ref": "CreateCheckPointrole6EAA5186"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateCheckPoint-role/DefaultPolicy/Resource"
   }
  },
  "CreateCheckPointurllambda5D991728": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e.zip"
    },
    "Environment": {
     "Variables": {
      "CHECKPOINT_TABLE": "CheckpointTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "FunctionName": "CreateCheckPoint-create-checkpoint-by-url",
    "Handler": "update_checkpoint_by_url.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "CreateCheckPointrole6EAA5186",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateCheckPointroleDefaultPolicy82FCE2AB",
    "CreateCheckPointrole6EAA5186",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateCheckPoint-url-lambda/Resource",
    "aws:asset:path": "asset.6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateCheckPointlambdaF7965573": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e.zip"
    },
    "Environment": {
     "Variables": {
      "CHECKPOINT_TABLE": "CheckpointTable",
      "UPLOAD_BY_URL_LAMBDA_NAME": {
       "Ref": "CreateCheckPointurllambda5D991728"
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_checkpoint.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "CreateCheckPointrole6EAA5186",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateCheckPointroleDefaultPolicy82FCE2AB",
    "CreateCheckPointrole6EAA5186",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateCheckPoint-lambda/Resource",
    "aws:asset:path": "asset.6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateCheckPointmodelF6F23349": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateCheckPoint",
    "Name": "CreateCheckPointRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateCheckPoint",
     "type": "object",
     "properties": {
      "checkpoint_type": {
       "type": "string",
       "description": "Type of checkpoint",
       "enum": [
        "Stable-diffusion",
        "embeddings",
        "Lora",
        "hypernetworks",
        "ControlNet",
        "VAE",
        "Comfy"
       ]
      },
      "filenames": {
       "type": "array",
       "items": {
        "type": "object",
        "properties": {
         "filename": {
          "type": "string",
          "minLength": 1
         },
         "parts_number": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100
         }
        }
       },
       "minItems": 1,
       "maxItems": 20
      },
      "urls": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1
       },
       "minItems": 1,
       "maxItems": 20
      },
      "params": {
       "type": "object",
       "properties": {
        "message": {
         "type": "string"
        }
       }
      },
      "target_path": {
       "type": "string"
      },
      "source_path": {
       "type": "string"
      }
     },
     "required": [
      "checkpoint_type"
     ]
    }
   },
   "DependsOn": [
    "ListCheckPointsrespmodel6CE97E27",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateCheckPoint-model/Resource"
   }
  },
  "CreateCheckPointupdatemodelCB7E5EDA": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateCheckPoint",
    "Name": "CreateCheckpointResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "CreateCheckpointResponse",
     "properties": {
      "statusCode": {
       "type": "integer"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "data": {
       "type": "object",
       "properties": {
        "checkpoint": {
         "type": "object",
         "additionalProperties": true,
         "properties": {
          "id": {
           "type": "string",
           "format": "uuid",
           "description": "ID of checkpoint"
          },
          "type": {
           "type": "string",
           "description": "Type of checkpoint",
           "enum": [
            "Stable-diffusion",
            "embeddings",
            "Lora",
            "hypernetworks",
            "ControlNet",
            "VAE",
            "Comfy"
           ]
          },
          "s3_location": {
           "type": "string",
           "description": "S3 location of the checkpoint"
          },
          "status": {
           "type": "string",
           "description": "Status of checkpoint"
          },
          "params": {
           "type": "object",
           "additionalProperties": true,
           "properties": {
            "message": {
             "type": "string"
            },
            "creator": {
             "type": "string"
            },
            "created": {
             "type": "string"
            },
            "multipart_upload": {
             "type": "object",
             "properties": {
              ".*": {
               "type": "object",
               "properties": {
                "upload_id": {
                 "type": "string"
                },
                "bucket": {
                 "type": "string"
                },
                "key": {
                 "type": "string"
                }
               },
               "required": [
                "bucket",
                "key",
                "upload_id"
               ]
              }
             }
            }
           },
           "required": [
            "created",
            "creator",
            "message",
            "multipart_upload"
           ]
          },
          "source_path": {
           "oneOf": [
            {
             "type": "null"
            },
            {
             "type": "string"
            }
           ]
          },
          "target_path": {
           "oneOf": [
            {
             "type": "null"
            },
            {
             "type": "string"
            }
           ]
          }
         },
         "required": [
          "id",
          "params",
          "s3_location",
          "status",
          "type"
         ]
        },
        "s3PresignUrl": {
         "type": "object",
         "properties": {
          ".*": {
           "type": "array",
           "items": {
            "type": "string"
           }
          }
         }
        }
       },
       "required": [
        "checkpoint",
        "s3PresignUrl"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "data",
      "debug",
      "message",
      "statusCode"
     ]
    }
   },
   "DependsOn": [
    "CreateCheckPointmodelF6F23349",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateCheckPoint-update-model/Resource"
   }
  },
  "CreateCheckPointurlmodelA073EBC6": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateCheckPoint",
    "Name": "CreateCheckpointUrlResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "debug",
      "message",
      "statusCode"
     ]
    }
   },
   "DependsOn": [
    "CreateCheckPointupdatemodelCB7E5EDA",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateCheckPoint-url-model/Resource"
   }
  },
  "UpdateCheckPointupdaterole869A6B65": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateCheckPoint-update-role/Resource"
   }
  },
  "UpdateCheckPointupdateroleDefaultPolicyC7FC5710": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "s3:CopyObject",
        "s3:DeleteObject"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":s3:::",
          {
           "Fn::GetAtt": [
            "ResourceManager",
            "BucketName"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:CopyObject",
        "s3:AbortMultipartUpload",
        "s3:ListMultipartUploadParts",
        "s3:ListBucketMultipartUploads"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*SageMaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:invokeFunction",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":lambda:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":function:*UpdateCheckPoint*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "UpdateCheckPointupdateroleDefaultPolicyC7FC5710",
    "Roles": [
     {
      "Ref": "UpdateCheckPointupdaterole869A6B65"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateCheckPoint-update-role/DefaultPolicy/Resource"
   }
  },
  "UpdateCheckPointrenamelambdaBEC78E97": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e.zip"
    },
    "Environment": {
     "Variables": {
      "CHECKPOINT_TABLE": "CheckpointTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "update_checkpoint_rename.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "UpdateCheckPointupdaterole869A6B65",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateCheckPointupdateroleDefaultPolicyC7FC5710",
    "UpdateCheckPointupdaterole869A6B65"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateCheckPoint-rename-lambda/Resource",
    "aws:asset:path": "asset.6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "UpdateCheckPointlambdaB0714034": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e.zip"
    },
    "Environment": {
     "Variables": {
      "CHECKPOINT_TABLE": "CheckpointTable",
      "RENAME_LAMBDA_NAME": {
       "Ref": "UpdateCheckPointrenamelambdaBEC78E97"
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "update_checkpoint.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "UpdateCheckPointupdaterole869A6B65",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateCheckPointupdateroleDefaultPolicyC7FC5710",
    "UpdateCheckPointupdaterole869A6B65"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateCheckPoint-lambda/Resource",
    "aws:asset:path": "asset.6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "UpdateCheckPointmodelC3EDC1E5": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model UpdateCheckPoint",
    "Name": "UpdateCheckPointRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "UpdateCheckPoint",
     "type": "object",
     "properties": {
      "status": {
       "type": "string",
       "description": "Status of checkpoint"
      },
      "name": {
       "type": "string",
       "minLength": 1,
       "maxLength": 20,
       "pattern": "^[A-Za-z][A-Za-z0-9_-]*$"
      },
      "multi_parts_tags": {
       "type": "object"
      }
     }
    }
   },
   "DependsOn": [
    "CreateCheckPointurlmodelA073EBC6",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateCheckPoint-model/Resource"
   }
  },
  "UpdateCheckPointupdatemodel8BD91451": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model UpdateCheckPoint",
    "Name": "UpdateCheckpointResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "UpdateCheckpointResponse",
     "properties": {
      "statusCode": {
       "type": "number"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "checkpoint": {
         "type": "object",
         "properties": {
          "id": {
           "type": "string",
           "format": "uuid",
           "description": "ID of checkpoint"
          },
          "type": {
           "type": "string",
           "description": "Type of checkpoint",
           "enum": [
            "Stable-diffusion",
            "embeddings",
            "Lora",
            "hypernetworks",
            "ControlNet",
            "VAE",
            "Comfy"
           ]
          },
          "s3_location": {
           "type": "string",
           "format": "uri"
          },
          "status": {
           "type": "string",
           "description": "Status of checkpoint"
          },
          "params": {
           "type": "object",
           "properties": {
            "creator": {
             "type": "string"
            },
            "multipart_upload": {
             "type": "object",
             "patternProperties": {
              ".*": {
               "type": "object",
               "properties": {
                "bucket": {
                 "type": "string"
                },
                "upload_id": {
                 "type": "string"
                },
                "key": {
                 "type": "string"
                }
               },
               "required": [
                "bucket",
                "upload_id",
                "key"
               ]
              }
             }
            },
            "message": {
             "type": "string"
            },
            "created": {
             "type": "string",
             "format": "date-time"
            }
           },
           "required": [
            "creator",
            "multipart_upload",
            "message",
            "created"
           ]
          }
         },
         "required": [
          "id",
          "type",
          "s3_location",
          "status",
          "params"
         ]
        }
       },
       "required": [
        "checkpoint"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateCheckPointmodelC3EDC1E5"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateCheckPoint-update-model/Resource"
   }
  },
  "UpdateCheckPointrenamemodelEE368B4B": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model UpdateCheckPoint",
    "Name": "UpdateCheckpointNameResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "number",
       "description": "The HTTP status code of the response."
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      }
     },
     "required": [
      "statusCode",
      "debug",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateCheckPointupdatemodel8BD91451"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateCheckPoint-rename-model/Resource"
   }
  },
  "DeleteCheckpointsroleCCD4086F": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteCheckpoints-role/Resource"
   }
  },
  "DeleteCheckpointsroleDefaultPolicyDC34D4A4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:DeleteItem",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:ListBucket",
        "s3:DeleteObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":logs:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":log-group:*:*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteCheckpointsroleDefaultPolicyDC34D4A4",
    "Roles": [
     {
      "Ref": "DeleteCheckpointsroleCCD4086F"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteCheckpoints-role/DefaultPolicy/Resource"
   }
  },
  "DeleteCheckpointslambdaE2D0C125": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e.zip"
    },
    "Environment": {
     "Variables": {
      "CHECKPOINTS_TABLE": "CheckpointTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_checkpoints.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "DeleteCheckpointsroleCCD4086F",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteCheckpointsroleDefaultPolicyDC34D4A4",
    "DeleteCheckpointsroleCCD4086F",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteCheckpoints-lambda/Resource",
    "aws:asset:path": "asset.6c9feb9b3405809204d21aef585df59deb26c1346a53dade2a68bbad0a9da92e",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteCheckpointsmodel5CCD2761": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteCheckpoints",
    "Name": "DeleteCheckpointsRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteCheckpoints",
     "type": "object",
     "properties": {
      "checkpoint_id_list": {
       "type": "array",
       "items": {
        "type": "string",
        "format": "uuid",
        "description": "ID of checkpoint"
       },
       "minItems": 1,
       "maxItems": 100
      }
     },
     "required": [
      "checkpoint_id_list"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateCheckPointrenamemodelEE368B4B"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteCheckpoints-model/Resource"
   }
  },
  "SyncComfyMsgJobQueueActual93CB31DB": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "ContentBasedDeduplication": true,
    "FifoQueue": true,
    "QueueName": "comfy-aws-extension-SyncComfyMsgJob.fifo",
    "SqsManagedSseEnabled": true,
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "VisibilityTimeout": 900
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncComfyMsgJobQueueActual/Resource"
   }
  },
  "SyncComfyMsgJobQueueActualPolicy4E608F25": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": "*"
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:SetQueueAttributes"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::",
           {
            "Ref": "AWS::AccountId"
           },
           ":root"
          ]
         ]
        }
       },
       "Resource": {
        "Fn::GetAtt": [
         "SyncComfyMsgJobQueueActual93CB31DB",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "SyncComfyMsgJobQueueActual93CB31DB"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncComfyMsgJobQueueActual/Policy/Resource"
   }
  },
  "SyncComfyMergeJobQueueActualEF077A24": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "ContentBasedDeduplication": true,
    "FifoQueue": true,
    "QueueName": "comfy-aws-extension-SyncComfyMergeJob.fifo",
    "SqsManagedSseEnabled": true,
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "VisibilityTimeout": 900
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncComfyMergeJobQueueActual/Resource"
   }
  },
  "SyncComfyMergeJobQueueActualPolicy46423FE5": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": "*"
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:SetQueueAttributes"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::",
           {
            "Ref": "AWS::AccountId"
           },
           ":root"
          ]
         ]
        }
       },
       "Resource": {
        "Fn::GetAtt": [
         "SyncComfyMergeJobQueueActualEF077A24",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "SyncComfyMergeJobQueueActualEF077A24"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncComfyMergeJobQueueActual/Policy/Resource"
   }
  },
  "ComfyInferenceLambdaRole6F86E8E5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "sagemaker.amazonaws.com"
       }
      },
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceLambdaRole/Resource"
   }
  },
  "GetSyncMsgrole4DB8D11A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetSyncMsg-role/Resource"
   }
  },
  "GetSyncMsgroleDefaultPolicy25FABAEC": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":dynamodb:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":table/ComfyMessageTable"
         ]
        ]
       }
      },
      {
       "Action": [
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:BatchWriteItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":dynamodb:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":table/ComfyMessageTable"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":s3:::",
          {
           "Fn::GetAtt": [
            "ResourceManager",
            "BucketName"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetSyncMsgroleDefaultPolicy25FABAEC",
    "Roles": [
     {
      "Ref": "GetSyncMsgrole4DB8D11A"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetSyncMsg-role/DefaultPolicy/Resource"
   }
  },
  "GetSyncMsglambda9AC8490E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "MSG_TABLE": "ComfyMessageTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_sync_msg.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "GetSyncMsgrole4DB8D11A",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetSyncMsgroleDefaultPolicy25FABAEC",
    "GetSyncMsgrole4DB8D11A",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetSyncMsg-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "SyncMsgroleAD14D256": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncMsg-role/Resource"
   }
  },
  "SyncMsgroleDefaultPolicyECBD4682": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":dynamodb:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":table/ComfyMessageTable"
         ]
        ]
       }
      },
      {
       "Action": [
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:BatchWriteItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":dynamodb:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":table/ComfyMessageTable"
         ]
        ]
       }
      },
      {
       "Action": "sqs:ReceiveMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "SyncComfyMsgJobQueueActual93CB31DB",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":s3:::",
          {
           "Fn::GetAtt": [
            "ResourceManager",
            "BucketName"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "SyncComfyMsgJobQueueActual93CB31DB",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SyncMsgroleDefaultPolicyECBD4682",
    "Roles": [
     {
      "Ref": "SyncMsgroleAD14D256"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncMsg-role/DefaultPolicy/Resource"
   }
  },
  "SyncMsglambda50AF709E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "MSG_TABLE": "ComfyMessageTable",
      "SQS_URL": {
       "Ref": "SyncComfyMsgJobQueueActual93CB31DB"
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "sync_msg.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "SyncMsgroleAD14D256",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "SyncMsgroleDefaultPolicyECBD4682",
    "SyncMsgroleAD14D256"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncMsg-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "SyncMsglambdaSqsEventSourceExtensionforStableDiffusiononAWSSyncComfyMsgJobQueueActualA1B03312AF478219": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "EventSourceArn": {
     "Fn::GetAtt": [
      "SyncComfyMsgJobQueueActual93CB31DB",
      "Arn"
     ]
    },
    "FunctionName": {
     "Ref": "SyncMsglambda50AF709E"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncMsg-lambda/SqsEventSource:ExtensionforStableDiffusiononAWSSyncComfyMsgJobQueueActualA1B03312/Resource"
   }
  },
  "SyncMsgmodel1FA2D2EE": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model SyncMsg",
    "Name": "SyncMsgRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "SyncMsg",
     "type": "object",
     "additionalProperties": true
    }
   },
   "DependsOn": [
    "DeleteCheckpointsmodel5CCD2761",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SyncMsg-model/Resource"
   }
  },
  "Executerole2FCDC0E6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Execute-role/Resource"
   }
  },
  "ExecuteroleDefaultPolicyF5517F0F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyExecuteTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sagemaker:InvokeEndpointAsync",
        "sagemaker:InvokeEndpoint"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":endpoint/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:CreateBucket"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "cloudwatch:PutMetricAlarm",
        "cloudwatch:PutMetricData"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "SyncComfyMergeJobQueueActualEF077A24",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ExecuteroleDefaultPolicyF5517F0F",
    "Roles": [
     {
      "Ref": "Executerole2FCDC0E6"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Execute-role/DefaultPolicy/Resource"
   }
  },
  "Executelambda723A5B87": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "EXECUTE_TABLE": "ComfyExecuteTable",
      "MERGE_SQS_URL": {
       "Ref": "SyncComfyMergeJobQueueActualEF077A24"
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "execute.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "Executerole2FCDC0E6",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ExecuteroleDefaultPolicyF5517F0F",
    "Executerole2FCDC0E6",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Execute-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "Executerespmodel341E04E6": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model Execute",
    "Name": "CreateExecuteResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "CreateExecuteResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200,
        201
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "prompt_id": {
         "type": "string"
        },
        "endpoint_name": {
         "type": "string",
         "description": "Name of endpoint"
        },
        "inference_type": {
         "type": "string",
         "enum": [
          "Real-time",
          "Async"
         ],
         "description": "Inference type"
        },
        "need_sync": {
         "type": "boolean"
        },
        "status": {
         "type": "string"
        },
        "number": {
         "type": "integer"
        },
        "front": {
         "type": "string"
        },
        "extra_data": {
         "type": "object",
         "additionalProperties": true
        },
        "client_id": {
         "type": "string"
        },
        "instance_id": {
         "type": "string"
        },
        "prompt_path": {
         "type": "string"
        },
        "create_time": {
         "type": "string",
         "format": "date-time"
        },
        "start_time": {
         "type": "string",
         "format": "date-time"
        },
        "output_path": {
         "type": "string"
        },
        "output_files": {
         "type": "array",
         "items": {
          "type": "string"
         }
        },
        "temp_path": {
         "type": "string"
        },
        "temp_files": {
         "type": "array",
         "items": {
          "type": "object"
         }
        }
       },
       "required": [
        "prompt_id",
        "endpoint_name",
        "inference_type",
        "need_sync",
        "status",
        "create_time",
        "start_time",
        "output_path"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "SyncMsgmodel1FA2D2EE"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Execute-resp-model/Resource"
   }
  },
  "Executemodel36C77011": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model Execute",
    "Name": "ExecuteRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "Execute",
     "type": "object",
     "properties": {
      "prompt_id": {
       "type": "string",
       "description": "Prompt ID",
       "format": "uuid"
      },
      "prompt": {
       "type": "object",
       "minItems": 1,
       "additionalProperties": true
      },
      "endpoint_name": {
       "type": "string",
       "description": "Name of endpoint"
      },
      "need_sync": {
       "type": "boolean",
       "description": "Need Sync"
      },
      "workflow": {
       "type": "string",
       "description": "Workflow remark",
       "pattern": "^[A-Za-z][A-Za-z0-9_]*$"
      },
      "number": {
       "type": "string",
       "minLength": 1
      },
      "front": {
       "type": "boolean",
       "minLength": 1
      },
      "extra_data": {
       "type": "object",
       "minLength": 1,
       "additionalProperties": true
      },
      "client_id": {
       "type": "string",
       "minLength": 1
      },
      "need_prepare": {
       "type": "boolean",
       "minLength": 1
      },
      "prepare_props": {
       "type": "object",
       "minItems": 1,
       "additionalProperties": true
      },
      "multi_async": {
       "type": "boolean",
       "minLength": 1
      },
      "workflow_name": {
       "type": "string"
      }
     },
     "required": [
      "prompt_id",
      "prompt",
      "need_sync",
      "endpoint_name"
     ]
    }
   },
   "DependsOn": [
    "Executerespmodel341E04E6",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Execute-model/Resource"
   }
  },
  "DeleteExecutesApiroleE1D881CB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteExecutesApi-role/Resource"
   }
  },
  "DeleteExecutesApiroleDefaultPolicy81A88C8E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":dynamodb:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":table/ComfyExecuteTable"
         ]
        ]
       }
      },
      {
       "Action": [
        "sagemaker:InvokeEndpointAsync",
        "sagemaker:InvokeEndpoint"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":endpoint/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteExecutesApiroleDefaultPolicy81A88C8E",
    "Roles": [
     {
      "Ref": "DeleteExecutesApiroleE1D881CB"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteExecutesApi-role/DefaultPolicy/Resource"
   }
  },
  "DeleteExecutesApilambda9F01B091": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "EXECUTE_TABLE": "ComfyExecuteTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "delete_executes.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "DeleteExecutesApiroleE1D881CB",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteExecutesApiroleDefaultPolicy81A88C8E",
    "DeleteExecutesApiroleE1D881CB",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteExecutesApi-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteExecutesApimodel065B306E": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteExecutesApi",
    "Name": "DeleteExecutesApiRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteExecutesApi",
     "type": "object",
     "properties": {
      "execute_id_list": {
       "type": "array",
       "items": {
        "type": "string",
        "minLength": 1
       },
       "minItems": 1,
       "maxItems": 20
      }
     },
     "required": [
      "execute_id_list"
     ]
    }
   },
   "DependsOn": [
    "Executemodel36C77011",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteExecutesApi-model/Resource"
   }
  },
  "QueryExecuterole6A6F83A8": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/QueryExecute-role/Resource"
   }
  },
  "QueryExecuteroleDefaultPolicyE7BD93E4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":dynamodb:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":table/ComfyExecuteTable"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "QueryExecuteroleDefaultPolicyE7BD93E4",
    "Roles": [
     {
      "Ref": "QueryExecuterole6A6F83A8"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/QueryExecute-role/DefaultPolicy/Resource"
   }
  },
  "QueryExecutelambda02DC055D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "EXECUTE_TABLE": "ComfyExecuteTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "query_execute.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "QueryExecuterole6A6F83A8",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "QueryExecuteroleDefaultPolicyE7BD93E4",
    "QueryExecuterole6A6F83A8",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/QueryExecute-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "QueryExecuterespmodel41A604C8": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model QueryExecute",
    "Name": "ListExecutesResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "ListExecutesResponse",
     "properties": {
      "statusCode": {
       "type": "integer"
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "executes": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "prompt_id": {
            "type": "string",
            "description": "Prompt ID",
            "format": "uuid"
           },
           "endpoint_name": {
            "type": "string",
            "description": "Name of endpoint"
           },
           "status": {
            "type": "string",
            "description": "Status of Execute"
           },
           "need_sync": {
            "type": "boolean",
            "description": "Need Sync"
           },
           "create_time": {
            "type": "string",
            "format": "date-time"
           },
           "start_time": {
            "type": "string",
            "format": "date-time"
           },
           "output_path": {
            "type": "string"
           },
           "output_files": {
            "type": "array"
           },
           "temp_path": {
            "type": "string"
           },
           "temp_files": {
            "type": "array"
           }
          },
          "additionalProperties": true,
          "required": [
           "prompt_id",
           "endpoint_name",
           "status",
           "create_time",
           "start_time",
           "need_sync"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "executes",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "DeleteExecutesApimodel065B306E",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/QueryExecute-resp-model/Resource"
   }
  },
  "MergeExecuterole3013F403": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/MergeExecute-role/Resource"
   }
  },
  "MergeExecuteroleDefaultPolicyCDBEAC13": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyExecuteTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyExecuteTable/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sagemaker:InvokeEndpointAsync",
        "sagemaker:InvokeEndpoint"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":endpoint/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:CreateBucket"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "sqs:ReceiveMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "SyncComfyMergeJobQueueActualEF077A24",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "SyncComfyMergeJobQueueActualEF077A24",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "MergeExecuteroleDefaultPolicyCDBEAC13",
    "Roles": [
     {
      "Ref": "MergeExecuterole3013F403"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/MergeExecute-role/DefaultPolicy/Resource"
   }
  },
  "MergeExecutelambda6DF5275A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "EXECUTE_TABLE": "ComfyExecuteTable",
      "MERGE_SQS_URL": {
       "Ref": "SyncComfyMergeJobQueueActualEF077A24"
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "merge_execute.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "MergeExecuterole3013F403",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "MergeExecuteroleDefaultPolicyCDBEAC13",
    "MergeExecuterole3013F403",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/MergeExecute-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "MergeExecutelambdaSqsEventSourceExtensionforStableDiffusiononAWSSyncComfyMergeJobQueueActual2DA25F3929196F50": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "EventSourceArn": {
     "Fn::GetAtt": [
      "SyncComfyMergeJobQueueActualEF077A24",
      "Arn"
     ]
    },
    "FunctionName": {
     "Ref": "MergeExecutelambda6DF5275A"
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/MergeExecute-lambda/SqsEventSource:ExtensionforStableDiffusiononAWSSyncComfyMergeJobQueueActual2DA25F39/Resource"
   }
  },
  "MergeExecutemodel4AA79B75": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model MergeExecute",
    "Name": "MergeExecuteRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "MergeExecute",
     "type": "object",
     "additionalProperties": true
    }
   },
   "DependsOn": [
    "QueryExecuterespmodel41A604C8",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/MergeExecute-model/Resource"
   }
  },
  "Preparerole7091C422": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Prepare-role/Resource"
   }
  },
  "PrepareroleDefaultPolicy4B19DA21": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfySyncTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyInstanceMonitorTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sagemaker:InvokeEndpointAsync",
        "sagemaker:InvokeEndpoint"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":endpoint/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:CreateBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PrepareroleDefaultPolicy4B19DA21",
    "Roles": [
     {
      "Ref": "Preparerole7091C422"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Prepare-role/DefaultPolicy/Resource"
   }
  },
  "PreparelambdaFDD8F005": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "SYNC_TABLE": "ComfySyncTable",
      "INSTANCE_MONITOR_TABLE": "ComfyInstanceMonitorTable",
      "ENDPOINT_TABLE": "SDEndpointDeploymentJobTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "prepare.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "Preparerole7091C422",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "PrepareroleDefaultPolicy4B19DA21",
    "Preparerole7091C422",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Prepare-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "Preparemodel6EA19166": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model Prepare",
    "Name": "PrepareRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "Prepare",
     "type": "object",
     "properties": {
      "prepare_id": {
       "type": "string"
      },
      "endpoint_name": {
       "type": "string",
       "description": "Name of endpoint"
      },
      "s3_source_path": {
       "type": "string",
       "minLength": 1
      },
      "local_target_path": {
       "type": "string",
       "minLength": 1
      },
      "prepare_type": {
       "type": "string",
       "enum": [
        "default",
        "inputs",
        "nodes",
        "models",
        "custom",
        "other"
       ]
      },
      "need_reboot": {
       "type": "boolean"
      },
      "sync_script": {
       "type": "string",
       "minLength": 1
      }
     },
     "required": [
      "endpoint_name",
      "need_reboot"
     ]
    }
   },
   "DependsOn": [
    "MergeExecutemodel4AA79B75",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Prepare-model/Resource"
   }
  },
  "GetExecuterole6C022C68": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecute-role/Resource"
   }
  },
  "GetExecuteroleDefaultPolicyB01774A7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":dynamodb:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":table/ComfyExecuteTable"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetExecuteroleDefaultPolicyB01774A7",
    "Roles": [
     {
      "Ref": "GetExecuterole6C022C68"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecute-role/DefaultPolicy/Resource"
   }
  },
  "GetExecutelambda150CA75A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "EXECUTE_TABLE": "ComfyExecuteTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_execute.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "GetExecuterole6C022C68",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetExecuteroleDefaultPolicyB01774A7",
    "GetExecuterole6C022C68",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecute-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetExecuterespmodel3901F0C0": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetExecute",
    "Name": "GetExecuteResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "GetExecuteResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "prompt_id": {
         "type": "string",
         "description": "Prompt ID",
         "format": "uuid"
        },
        "need_sync": {
         "type": "boolean",
         "description": "Need Sync"
        },
        "prompt_path": {
         "type": "string",
         "description": "Prompt Path"
        },
        "endpoint_name": {
         "type": "string",
         "description": "Name of endpoint"
        },
        "status": {
         "type": "string",
         "description": "Status of Execute"
        },
        "inference_type": {
         "type": "string",
         "enum": [
          "Real-time",
          "Async"
         ],
         "description": "Inference type"
        },
        "create_time": {
         "type": "string",
         "format": "date-time"
        },
        "start_time": {
         "type": "string",
         "format": "date-time"
        },
        "prompt_params": {
         "type": "object",
         "additionalProperties": true
        },
        "output_path": {
         "type": "string"
        }
       },
       "required": [
        "prompt_id",
        "need_sync",
        "prompt_path",
        "endpoint_name",
        "status",
        "create_time",
        "inference_type",
        "start_time",
        "prompt_params",
        "output_path"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "Preparemodel6EA19166",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecute-resp-model/Resource"
   }
  },
  "GetExecuteLogsroleA1908E77": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecuteLogs-role/Resource"
   }
  },
  "GetExecuteLogsroleDefaultPolicy83274696": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "dynamodb:GetItem",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyExecuteTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyExecuteTable/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "logs:StartQuery",
        "logs:GetQueryResults",
        "logs:DescribeLogGroups"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetExecuteLogsroleDefaultPolicy83274696",
    "Roles": [
     {
      "Ref": "GetExecuteLogsroleA1908E77"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecuteLogs-role/DefaultPolicy/Resource"
   }
  },
  "GetExecuteLogslambdaB26E10D8": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "EXECUTE_TABLE": "ComfyExecuteTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_execute_logs.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "GetExecuteLogsroleA1908E77",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetExecuteLogsroleDefaultPolicy83274696",
    "GetExecuteLogsroleA1908E77",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecuteLogs-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetExecuteLogslogsrespmodelABB6CDB7": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetExecuteLogs",
    "Name": "GetExecuteLogsResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "GetExecuteLogsResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "results": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "timestamp": {
            "type": "string"
           },
           "message": {
            "type": "string"
           },
           "logStream": {
            "type": "string"
           }
          }
         }
        }
       }
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "GetExecuterespmodel3901F0C0",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetExecuteLogs-logs-resp-model/Resource"
   }
  },
  "GetPreparerole703AAA32": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetPrepare-role/Resource"
   }
  },
  "GetPrepareroleDefaultPolicy9DBB4480": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfySyncTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyInstanceMonitorTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetPrepareroleDefaultPolicy9DBB4480",
    "Roles": [
     {
      "Ref": "GetPreparerole703AAA32"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetPrepare-role/DefaultPolicy/Resource"
   }
  },
  "GetPreparelambda08CC9414": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "SYNC_TABLE": "ComfySyncTable",
      "INSTANCE_MONITOR_TABLE": "ComfyInstanceMonitorTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_prepare.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "GetPreparerole703AAA32",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetPrepareroleDefaultPolicy9DBB4480",
    "GetPreparerole703AAA32",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetPrepare-lambda/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ComfyInferenceResultNotificationServiceRole327FFC14": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/ServiceRole/Resource"
   }
  },
  "ComfyInferenceResultNotificationServiceRoleDefaultPolicy4A8D08C6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "s3:Get*",
        "s3:List*",
        "s3:PutObject",
        "s3:GetObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*sagemaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:PutItem",
        "dynamodb:DeleteItem",
        "dynamodb:UpdateItem",
        "dynamodb:Describe*",
        "dynamodb:List*",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfyExecuteTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/ComfySyncTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sns:Publish",
        "sns:ListTopics"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":sns:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":StableDiffusionSnsUserTopic"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":sns:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":comfyExecuteSuccess"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":sns:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":comfyExecuteFail"
          ]
         ]
        }
       ]
      },
      {
       "Action": "cloudwatch:PutMetricData",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ComfyInferenceResultNotificationServiceRoleDefaultPolicy4A8D08C6",
    "Roles": [
     {
      "Ref": "ComfyInferenceResultNotificationServiceRole327FFC14"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ComfyInferenceResultNotification77ECDAAA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb.zip"
    },
    "Environment": {
     "Variables": {
      "EXECUTE_TABLE": "ComfyExecuteTable",
      "NOTICE_SNS_TOPIC": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":StableDiffusionSnsUserTopic"
        ]
       ]
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "execute_async_events.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "ComfyInferenceResultNotificationServiceRole327FFC14",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ComfyInferenceResultNotificationServiceRoleDefaultPolicy4A8D08C6",
    "ComfyInferenceResultNotificationServiceRole327FFC14",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/Resource",
    "aws:asset:path": "asset.3b46270143b973e4859a585d9ac4d11ffb8aace16bf8fd55083213338d48b2cb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ComfyInferenceResultNotificationLogRetention777ACBF1": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ComfyInferenceResultNotification77ECDAAA"
       }
      ]
     ]
    },
    "RetentionInDays": 7
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/LogRetention/Resource"
   }
  },
  "ComfyInferenceResultNotificationAllowInvokeExtensionforStableDiffusiononAWSsdsnscomfyExecuteSuccess75DC4E3E50E63659": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ComfyInferenceResultNotification77ECDAAA",
      "Arn"
     ]
    },
    "Principal": "sns.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":comfyExecuteSuccess"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/AllowInvoke:ExtensionforStableDiffusiononAWSsdsnscomfyExecuteSuccess75DC4E3E"
   }
  },
  "ComfyInferenceResultNotificationsdsnscomfyExecuteSuccess1064DF8D": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Fn::GetAtt": [
      "ComfyInferenceResultNotification77ECDAAA",
      "Arn"
     ]
    },
    "Protocol": "lambda",
    "Region": {
     "Ref": "AWS::Region"
    },
    "TopicArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":comfyExecuteSuccess"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/sd-sns-comfyExecuteSuccess/Resource"
   }
  },
  "ComfyInferenceResultNotificationAllowInvokeExtensionforStableDiffusiononAWSsdsnscomfyExecuteFailC3A97D8AAD9C3839": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ComfyInferenceResultNotification77ECDAAA",
      "Arn"
     ]
    },
    "Principal": "sns.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":comfyExecuteFail"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/AllowInvoke:ExtensionforStableDiffusiononAWSsdsnscomfyExecuteFailC3A97D8A"
   }
  },
  "ComfyInferenceResultNotificationsdsnscomfyExecuteFailE9635ECC": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Fn::GetAtt": [
      "ComfyInferenceResultNotification77ECDAAA",
      "Arn"
     ]
    },
    "Protocol": "lambda",
    "Region": {
     "Ref": "AWS::Region"
    },
    "TopicArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":sns:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":comfyExecuteFail"
      ]
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ComfyInferenceResultNotification/sd-sns-comfyExecuteFail/Resource"
   }
  },
  "ListEndpointsrolePolicy2D3EB003": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListEndpointsrolePolicy2D3EB003",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListEndpoints-role/Policy/Resource"
   }
  },
  "ListEndpointslambdaF82AC26A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_endpoints.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListEndpointsrolePolicy2D3EB003",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListEndpoints-lambda/Resource",
    "aws:asset:path": "asset.db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListEndpointsrespmodel96F81C4F": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListEndpoints",
    "Name": "ListEndpointsResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "ListEndpointsResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "endpoints": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "EndpointDeploymentJobId": {
            "type": "string",
            "description": "ID of Endpoint",
            "pattern": "^[a-f0-9\\-]{36}$"
           },
           "autoscaling": {
            "type": "boolean",
            "description": "Autoscaling"
           },
           "max_instance_number": {
            "type": "string",
            "description": "Maximum number of instances",
            "pattern": "^[0-9]+$"
           },
           "startTime": {
            "type": "string",
            "description": "Start Time of Endpoint",
            "format": "date-time"
           },
           "instance_type": {
            "type": "string",
            "description": "Instance Type"
           },
           "current_instance_count": {
            "type": "string",
            "description": "Current number of instances",
            "pattern": "^[0-9]+$"
           },
           "endpoint_status": {
            "type": "string",
            "description": "Status of Endpoint"
           },
           "endpoint_name": {
            "type": "string",
            "description": "Name of endpoint"
           },
           "endpoint_type": {
            "type": "string",
            "description": "Endpoint Type",
            "enum": [
             "Real-time",
             "Async"
            ]
           },
           "service_type": {
            "type": "string",
            "description": "Service Type",
            "enum": [
             "sd",
             "comfy"
            ]
           },
           "owner_group_or_role": {
            "type": "array",
            "description": "Owner Group or Role",
            "items": {
             "type": "string"
            }
           },
           "min_instance_number": {
            "type": "string",
            "pattern": "^[0-9]+$",
            "description": "Minimum number of instances"
           },
           "custom_extensions": {
            "type": "string",
            "description": "Custom Extensions"
           }
          },
          "required": [
           "EndpointDeploymentJobId",
           "autoscaling",
           "max_instance_number",
           "startTime",
           "instance_type",
           "current_instance_count",
           "endpoint_status",
           "endpoint_name",
           "endpoint_type",
           "owner_group_or_role",
           "min_instance_number",
           "service_type"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "endpoints",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "GetExecuteLogslogsrespmodelABB6CDB7",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListEndpoints-resp-model/Resource"
   }
  },
  "DeleteEndpointsrolePolicyE75704A2": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteEndpointsrolePolicyE75704A2",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteEndpoints-role/Policy/Resource"
   }
  },
  "DeleteEndpointslambdaF5498B34": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_endpoints.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteEndpointsrolePolicyE75704A2",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteEndpoints-lambda/Resource",
    "aws:asset:path": "asset.db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteEndpointsmodel0D179DC1": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteEndpoints",
    "Name": "DeleteEndpointsRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteEndpoints",
     "type": "object",
     "properties": {
      "endpoint_name_list": {
       "type": "array",
       "items": {
        "type": "string",
        "description": "Name of endpoint"
       },
       "minItems": 1,
       "maxItems": 10
      }
     },
     "required": [
      "endpoint_name_list"
     ]
    }
   },
   "DependsOn": [
    "ListEndpointsrespmodel96F81C4F",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteEndpoints-model/Resource"
   }
  },
  "EndpointsCloudwatchEventsroleB80AC44D": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointsCloudwatchEvents-role/Resource"
   }
  },
  "EndpointsCloudwatchEventsroleDefaultPolicy104ABA5C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "dynamodb:Scan",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "cloudwatch:GetDashboard",
        "cloudwatch:PutDashboard",
        "cloudwatch:DeleteDashboards",
        "cloudwatch:ListDashboards",
        "cloudwatch:ListMetrics",
        "sagemaker:DescribeEndpoint",
        "s3:Get*",
        "s3:List*",
        "s3:DeleteObject",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "EndpointsCloudwatchEventsroleDefaultPolicy104ABA5C",
    "Roles": [
     {
      "Ref": "EndpointsCloudwatchEventsroleB80AC44D"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointsCloudwatchEvents-role/DefaultPolicy/Resource"
   }
  },
  "EndpointsCloudwatchEventslambda8E107031": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "cloudwatch_event.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "EndpointsCloudwatchEventsroleB80AC44D",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "EndpointsCloudwatchEventsroleDefaultPolicy104ABA5C",
    "EndpointsCloudwatchEventsroleB80AC44D",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointsCloudwatchEvents-lambda/Resource",
    "aws:asset:path": "asset.db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "EndpointsCloudwatchEventsrule38D5F40E": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "ScheduleExpression": "rate(1 minute)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "EndpointsCloudwatchEventslambda8E107031",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointsCloudwatchEvents-rule/Resource"
   }
  },
  "EndpointsCloudwatchEventsruleAllowEventRuleExtensionforStableDiffusiononAWSEndpointsCloudwatchEventslambda650C429FE943FEA3": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "EndpointsCloudwatchEventslambda8E107031",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "EndpointsCloudwatchEventsrule38D5F40E",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointsCloudwatchEvents-rule/AllowEventRuleExtensionforStableDiffusiononAWSEndpointsCloudwatchEventslambda650C429F"
   }
  },
  "EndpointEventsrole2F227940": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointEvents-role/Resource"
   }
  },
  "EndpointEventsroleDefaultPolicy432F5746": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:UpdateItem",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/SDEndpointDeploymentJobTable/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sagemaker:DeleteModel",
        "sagemaker:DeleteEndpoint",
        "sagemaker:DeleteEndpointConfig",
        "sagemaker:DescribeEndpoint",
        "sagemaker:DescribeEndpointConfig",
        "sagemaker:UpdateEndpointWeightsAndCapacities",
        "cloudwatch:DeleteAlarms",
        "cloudwatch:DescribeAlarms",
        "cloudwatch:PutMetricAlarm",
        "cloudwatch:PutMetricData",
        "cloudwatch:UpdateMetricAlarm",
        "cloudwatch:DeleteDashboards",
        "application-autoscaling:PutScalingPolicy",
        "application-autoscaling:RegisterScalableTarget",
        "iam:CreateServiceLinkedRole",
        "s3:Get*",
        "s3:List*",
        "s3:DeleteObject"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "logs:DeleteLogGroup"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "EndpointEventsroleDefaultPolicy432F5746",
    "Roles": [
     {
      "Ref": "EndpointEventsrole2F227940"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointEvents-role/DefaultPolicy/Resource"
   }
  },
  "EndpointEventslambda29E03E33": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "endpoint_event.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "EndpointEventsrole2F227940",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "EndpointEventsroleDefaultPolicy432F5746",
    "EndpointEventsrole2F227940",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointEvents-lambda/Resource",
    "aws:asset:path": "asset.db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "EndpointEventsrule6E71C6AA": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventPattern": {
     "source": [
      "aws.sagemaker"
     ],
     "detail-type": [
      "SageMaker Endpoint State Change"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "EndpointEventslambda29E03E33",
        "Arn"
       ]
      },
      "Id": "Target0"
     },
     {
      "Arn": {
       "Fn::GetAtt": [
        "EndpointsCloudwatchEventslambda8E107031",
        "Arn"
       ]
      },
      "Id": "Target1"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointEvents-rule/Resource"
   }
  },
  "EndpointEventsruleAllowEventRuleExtensionforStableDiffusiononAWSEndpointEventslambda540CEE14E3BF979F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "EndpointEventslambda29E03E33",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "EndpointEventsrule6E71C6AA",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointEvents-rule/AllowEventRuleExtensionforStableDiffusiononAWSEndpointEventslambda540CEE14"
   }
  },
  "EndpointEventsruleAllowEventRuleExtensionforStableDiffusiononAWSEndpointsCloudwatchEventslambda650C429F2120318E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "EndpointsCloudwatchEventslambda8E107031",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "EndpointEventsrule6E71C6AA",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/EndpointEvents-rule/AllowEventRuleExtensionforStableDiffusiononAWSEndpointsCloudwatchEventslambda650C429F"
   }
  },
  "CreateEndpointrolePolicy16E1EDF5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateEndpointrolePolicy16E1EDF5",
    "Roles": [
     {
      "Fn::Join": [
       "",
       [
        "ESDRole-",
        {
         "Ref": "AWS::Region"
        }
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateEndpoint-role/Policy/Resource"
   }
  },
  "CreateEndpointlambda9B92F5B4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811.zip"
    },
    "Environment": {
     "Variables": {
      "COMFY_QUEUE_URL": {
       "Ref": "SyncComfyMsgJobQueueActual93CB31DB"
      },
      "COMFY_SYNC_TABLE": "ComfySyncTable",
      "COMFY_INSTANCE_MONITOR_TABLE": "ComfyInstanceMonitorTable",
      "SNS_INFERENCE_SUCCESS": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":ReceiveSageMakerInferenceSuccess"
        ]
       ]
      },
      "SNS_INFERENCE_ERROR": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":ReceiveSageMakerInferenceError"
        ]
       ]
      },
      "COMFY_SNS_INFERENCE_SUCCESS": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":comfyExecuteFail"
        ]
       ]
      },
      "COMFY_SNS_INFERENCE_ERROR": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":comfyExecuteSuccess"
        ]
       ]
      },
      "WORKFLOWS_TABLE": "ComfyWorkflowsTable",
      "EXECUTION_ROLE_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":iam::",
         {
          "Ref": "AWS::AccountId"
         },
         ":role/ESDRole-",
         {
          "Ref": "AWS::Region"
         }
        ]
       ]
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_endpoint.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/ESDRole-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateEndpointrolePolicy16E1EDF5",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateEndpoint-lambda/Resource",
    "aws:asset:path": "asset.db90eb1bd98f650778e1713da9f53ca11b1fe5e12003f5c527ea2330efdef811",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateEndpointmodel3E3769CB": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateEndpoint",
    "Name": "CreateEndpointRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateEndpoint",
     "type": "object",
     "properties": {
      "endpoint_name": {
       "type": "string",
       "description": "Name of endpoint"
      },
      "custom_docker_image_uri": {
       "type": "string"
      },
      "endpoint_type": {
       "type": "string",
       "description": "Endpoint Type",
       "enum": [
        "Real-time",
        "Async"
       ]
      },
      "workflow_name": {
       "type": "string",
       "minLength": 1,
       "maxLength": 20,
       "pattern": "^[A-Za-z][A-Za-z0-9]*$",
       "description": "Name of workflow"
      },
      "service_type": {
       "type": "string",
       "enum": [
        "sd",
        "comfy"
       ]
      },
      "instance_type": {
       "type": "string",
       "description": "Instance Type"
      },
      "initial_instance_count": {
       "type": "number",
       "minimum": 1
      },
      "min_instance_number": {
       "type": "number",
       "minimum": 0
      },
      "max_instance_number": {
       "type": "number"
      },
      "autoscaling_enabled": {
       "type": "boolean"
      },
      "assign_to_roles": {
       "type": "array",
       "items": {
        "type": "string"
       },
       "minItems": 1,
       "maxItems": 10
      }
     },
     "required": [
      "endpoint_type",
      "instance_type",
      "initial_instance_count",
      "autoscaling_enabled",
      "assign_to_roles"
     ]
    }
   },
   "DependsOn": [
    "DeleteEndpointsmodel0D179DC1",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateEndpoint-model/Resource"
   }
  },
  "CreateEndpointrespmodelF7E14284": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateEndpoint",
    "Name": "CreateEndpointResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "CreateEndpointResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        202
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "EndpointDeploymentJobId": {
         "type": "string",
         "description": "ID of Endpoint",
         "pattern": "^[a-f0-9\\-]{36}$"
        },
        "autoscaling": {
         "type": "boolean",
         "description": "Autoscaling"
        },
        "max_instance_number": {
         "type": "string",
         "description": "Maximum number of instances",
         "pattern": "^[0-9]+$"
        },
        "startTime": {
         "type": "string",
         "description": "Start Time of Endpoint",
         "format": "date-time"
        },
        "instance_type": {
         "type": "string",
         "description": "Instance Type"
        },
        "current_instance_count": {
         "type": "string",
         "description": "Current number of instances",
         "pattern": "^[0-9]+$"
        },
        "endpoint_status": {
         "type": "string",
         "description": "Status of Endpoint"
        },
        "endpoint_name": {
         "type": "string",
         "description": "Name of endpoint"
        },
        "endpoint_type": {
         "type": "string",
         "description": "Endpoint Type",
         "enum": [
          "Real-time",
          "Async"
         ]
        },
        "service_type": {
         "type": "string",
         "description": "Service Type",
         "enum": [
          "sd",
          "comfy"
         ]
        },
        "owner_group_or_role": {
         "type": "array",
         "description": "Owner Group or Role",
         "items": {
          "type": "string"
         }
        },
        "min_instance_number": {
         "type": "string",
         "pattern": "^[0-9]+$",
         "description": "Minimum number of instances"
        },
        "custom_extensions": {
         "type": "string",
         "description": "Custom Extensions"
        }
       },
       "required": [
        "EndpointDeploymentJobId",
        "autoscaling",
        "max_instance_number",
        "startTime",
        "instance_type",
        "current_instance_count",
        "endpoint_status",
        "endpoint_name",
        "endpoint_type",
        "owner_group_or_role",
        "min_instance_number",
        "custom_extensions",
        "service_type"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateEndpointmodel3E3769CB",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateEndpoint-resp-model/Resource"
   }
  },
  "DeployLocalFileAwsCliLayer8DA079C4": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3322b7049fb0ed2b7cbb644a2ada8d1116ff80c32dca89e6ada846b5de26f961"
    },
    "Description": "/opt/awscli/aws"
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeployLocalFile/AwsCliLayer/Resource",
    "aws:asset:path": "asset.3322b7049fb0ed2b7cbb644a2ada8d1116ff80c32dca89e6ada846b5de26f961.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "DeployLocalFileCustomResource84A5C383": {
   "Type": "Custom::CDKBucketDeployment",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536",
      "Arn"
     ]
    },
    "SourceBucketNames": [
     {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     }
    ],
    "SourceObjectKeys": [
     "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/b551456b6957d0d636def1e5d045a7ebb96875d805056b3c027c9508b32f6e28"
    ],
    "DestinationBucketName": {
     "Fn::GetAtt": [
      "ResourceManager",
      "BucketName"
     ]
    },
    "DestinationBucketKeyPrefix": "data/",
    "RetainOnDelete": false,
    "Prune": true
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeployLocalFile/CustomResource/Default"
   }
  },
  "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource"
   }
  },
  "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF",
    "Roles": [
     {
      "Ref": "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/0158f40002a8c211635388a87874fd4dcc3d68f525fe08a0fe0f014069ae539c.zip"
    },
    "Environment": {
     "Variables": {
      "AWS_CA_BUNDLE": "/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "index.handler",
    "Layers": [
     {
      "Ref": "DeployLocalFileAwsCliLayer8DA079C4"
     }
    ],
    "Role": {
     "Fn::GetAtt": [
      "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265",
      "Arn"
     ]
    },
    "Runtime": "python3.9",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF",
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource",
    "aws:asset:path": "asset.0158f40002a8c211635388a87874fd4dcc3d68f525fe08a0fe0f014069ae539c",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DeployApiTemplateAwsCliLayerF18BBBBF": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/3322b7049fb0ed2b7cbb644a2ada8d1116ff80c32dca89e6ada846b5de26f961"
    },
    "Description": "/opt/awscli/aws"
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeployApiTemplate/AwsCliLayer/Resource",
    "aws:asset:path": "asset.3322b7049fb0ed2b7cbb644a2ada8d1116ff80c32dca89e6ada846b5de26f961.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "DeployApiTemplateCustomResourceD44CB84F": {
   "Type": "Custom::CDKBucketDeployment",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536",
      "Arn"
     ]
    },
    "SourceBucketNames": [
     {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     }
    ],
    "SourceObjectKeys": [
     "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/5fe49aadf6bbbf8854759bb61d293cbfe0d829e8d1c5b710266df3b5a2d2c169.zip"
    ],
    "DestinationBucketName": {
     "Fn::GetAtt": [
      "ResourceManager",
      "BucketName"
     ]
    },
    "DestinationBucketKeyPrefix": "template",
    "Prune": true
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeployApiTemplate/CustomResource/Default"
   }
  },
  "ListTrainingJobsrole9ABFC3C7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListTrainingJobs-role/Resource"
   }
  },
  "ListTrainingJobsroleDefaultPolicyC15E190A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/TrainingTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListTrainingJobsroleDefaultPolicyC15E190A",
    "Roles": [
     {
      "Ref": "ListTrainingJobsrole9ABFC3C7"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListTrainingJobs-role/DefaultPolicy/Resource"
   }
  },
  "ListTrainingJobslambda62A1D8F1": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1.zip"
    },
    "Environment": {
     "Variables": {
      "TRAIN_TABLE": "TrainingTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_training_jobs.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "ListTrainingJobsrole9ABFC3C7",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListTrainingJobsroleDefaultPolicyC15E190A",
    "ListTrainingJobsrole9ABFC3C7",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListTrainingJobs-lambda/Resource",
    "aws:asset:path": "asset.8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListTrainingJobsrespmodel332BFAB7": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListTrainingsResponse",
    "Name": "ListTrainingsResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "ListTrainingJobs",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "trainings": {
         "type": "array",
         "items": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
           "id": {
            "type": "string",
            "pattern": "^[a-f0-9\\-]{36}$",
            "description": "ID of training job"
           },
           "modelName": {
            "type": "string",
            "description": "Model Name"
           },
           "status": {
            "type": "string",
            "description": "Status of training job"
           },
           "trainType": {
            "type": "string",
            "description": "Training Type"
           },
           "created": {
            "type": "string",
            "description": "Created Time of Training Job"
           },
           "sagemakerTrainName": {
            "type": "string",
            "description": "Name of SageMaker Training Job"
           },
           "params": {
            "type": "object",
            "description": "Training Parameters",
            "additionalProperties": true,
            "properties": {
             "config_params": {
              "type": "object",
              "description": "Training Configuration Parameters",
              "properties": {
               "output_name": {
                "type": "string",
                "description": "Output Model Name",
                "minLength": 1
               }
              },
              "required": [
               "output_name"
              ],
              "additionalProperties": true
             },
             "training_params": {
              "type": "object",
              "description": "Training Parameters"
             },
             "training_type": {
              "type": "string",
              "description": "Training Type"
             }
            },
            "required": [
             "training_params",
             "training_type",
             "config_params"
            ]
           }
          },
          "required": [
           "id",
           "modelName",
           "status",
           "trainType",
           "created",
           "sagemakerTrainName",
           "params"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "trainings",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateEndpointrespmodelF7E14284",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListTrainingJobs-resp-model/Resource"
   }
  },
  "CreateTrainingJobtrainroleE5A5B624": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "sagemaker.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AmazonSageMakerFullAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateTrainingJob-train-role/Resource"
   }
  },
  "CreateTrainingJobtrainroleDefaultPolicy94E56480": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:List*",
        "s3:Head*"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "kms:Decrypt",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateTrainingJobtrainroleDefaultPolicy94E56480",
    "Roles": [
     {
      "Ref": "CreateTrainingJobtrainroleE5A5B624"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateTrainingJob-train-role/DefaultPolicy/Resource"
   }
  },
  "CreateTrainingJobroleC6D79D05": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateTrainingJob-role/Resource"
   }
  },
  "CreateTrainingJobroleDefaultPolicy6B54EF0E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/TrainingTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetInfoTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": "sagemaker:CreateTrainingJob",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":training-job/*"
         ]
        ]
       }
      },
      {
       "Action": "iam:PassRole",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CreateTrainingJobtrainroleE5A5B624",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:CreateBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*sagemaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateTrainingJobroleDefaultPolicy6B54EF0E",
    "Roles": [
     {
      "Ref": "CreateTrainingJobroleC6D79D05"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateTrainingJob-role/DefaultPolicy/Resource"
   }
  },
  "CreateTrainingJoblambda0940FED7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1.zip"
    },
    "Environment": {
     "Variables": {
      "TRAIN_TABLE": "TrainingTable",
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "CHECKPOINT_TABLE": "CheckpointTable",
      "INSTANCE_TYPE": "ml.g4dn.2xlarge",
      "TRAIN_JOB_ROLE": {
       "Fn::GetAtt": [
        "CreateTrainingJobtrainroleE5A5B624",
        "Arn"
       ]
      },
      "USER_EMAIL_TOPIC_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":StableDiffusionSnsUserTopic"
        ]
       ]
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_training_job.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "CreateTrainingJobroleC6D79D05",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateTrainingJobroleDefaultPolicy6B54EF0E",
    "CreateTrainingJobroleC6D79D05",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateTrainingJob-lambda/Resource",
    "aws:asset:path": "asset.8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateTrainingJobmodel970E2BC9": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateTrainingJob",
    "Name": "CreateTrainingJobRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateTrainingJob",
     "type": "object",
     "properties": {
      "lora_train_type": {
       "type": "string",
       "minLength": 1
      },
      "params": {
       "type": "object",
       "properties": {
        "enable_wd14_tagger": {
         "type": "boolean",
         "default": false,
         "description": "Enable WD14 Tagger"
        },
        "wd14_tagger_params": {
         "type": "object",
         "properties": {
          "general_threshold": {
           "type": "string",
           "default": "0",
           "description": "General threshold"
          },
          "character_threshold": {
           "type": "string",
           "default": "0",
           "description": "Character threshold"
          }
         },
         "additionalProperties": true
        },
        "training_params": {
         "type": "object",
         "properties": {
          "training_instance_type": {
           "type": "string",
           "description": "Training instance type"
          },
          "model": {
           "type": "string",
           "description": "Model"
          },
          "dataset": {
           "type": "string",
           "description": "Dataset"
          },
          "fm_type": {
           "type": "string",
           "description": "FM type"
          }
         },
         "required": [
          "training_instance_type",
          "model",
          "dataset",
          "fm_type"
         ]
        },
        "config_params": {
         "type": "object",
         "description": "Training Configuration Parameters",
         "properties": {
          "output_name": {
           "type": "string",
           "description": "Output Model Name",
           "minLength": 1
          }
         },
         "required": [
          "output_name"
         ],
         "additionalProperties": true
        }
       },
       "required": [
        "training_params",
        "config_params"
       ]
      }
     },
     "required": [
      "lora_train_type",
      "params"
     ]
    }
   },
   "DependsOn": [
    "ListTrainingJobsrespmodel332BFAB7",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateTrainingJob-model/Resource"
   }
  },
  "CreateTrainingJobrespmodel89BD8503": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateTrainResponse",
    "Name": "CreateTrainResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateTrainingJob",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        201
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "statusCode": {
         "type": "integer"
        },
        "debug": {
         "type": "object",
         "title": "Response Model Debug",
         "$schema": "http://json-schema.org/draft-07/schema#",
         "description": "Debugging information for Lambda Function",
         "properties": {
          "function_url": {
           "type": "string",
           "format": "uri",
           "description": "URL to Lambda Function"
          },
          "log_url": {
           "type": "string",
           "format": "uri",
           "description": "URL to CloudWatch Logs"
          },
          "trace_url": {
           "type": "string",
           "format": "uri",
           "description": "URL to X-Ray Trace"
          }
         },
         "required": [
          "function_url",
          "log_url",
          "trace_url"
         ]
        },
        "data": {
         "type": "object",
         "properties": {
          "id": {
           "type": "string",
           "pattern": "^[a-f0-9\\-]{36}$",
           "description": "ID of training job"
          },
          "status": {
           "type": "string",
           "description": "Status of training job"
          },
          "created": {
           "type": "string",
           "description": "Created Time of Training Job"
          },
          "params": {
           "type": "object",
           "properties": {
            "config_params": {
             "type": "object",
             "additionalProperties": true
            },
            "training_params": {
             "type": "object",
             "properties": {
              "s3_data_path": {
               "type": "string"
              },
              "training_instance_type": {
               "type": "string"
              },
              "s3_model_path": {
               "type": "string"
              },
              "fm_type": {
               "type": "string"
              },
              "s3_toml_path": {
               "type": "string"
              }
             },
             "required": [
              "s3_data_path",
              "training_instance_type",
              "s3_model_path",
              "fm_type",
              "s3_toml_path"
             ]
            },
            "training_type": {
             "type": "string",
             "description": "Training Type"
            }
           },
           "required": [
            "config_params",
            "training_params",
            "training_type"
           ]
          },
          "input_location": {
           "type": "string"
          },
          "output_location": {
           "type": "string"
          }
         },
         "required": [
          "id",
          "status",
          "created",
          "params",
          "input_location",
          "output_location"
         ]
        },
        "message": {
         "type": "string"
        }
       }
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateTrainingJobmodel970E2BC9",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateTrainingJob-resp-model/Resource"
   }
  },
  "DeleteTrainingJobsrole0395871E": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteTrainingJobs-role/Resource"
   }
  },
  "DeleteTrainingJobsroleDefaultPolicy9A925656": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:DeleteItem",
        "dynamodb:BatchGetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/TrainingTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:ListBucket",
        "s3:DeleteObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "sagemaker:StopTrainingJob",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":training-job/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":logs:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":log-group:*:*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteTrainingJobsroleDefaultPolicy9A925656",
    "Roles": [
     {
      "Ref": "DeleteTrainingJobsrole0395871E"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteTrainingJobs-role/DefaultPolicy/Resource"
   }
  },
  "DeleteTrainingJobslambda99370039": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1.zip"
    },
    "Environment": {
     "Variables": {
      "TRAINING_JOB_TABLE": "TrainingTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_training_jobs.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "DeleteTrainingJobsrole0395871E",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteTrainingJobsroleDefaultPolicy9A925656",
    "DeleteTrainingJobsrole0395871E",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteTrainingJobs-lambda/Resource",
    "aws:asset:path": "asset.8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteTrainingJobsmodelB77A2D58": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteTrainingJobs",
    "Name": "DeleteTrainingJobsRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteTrainingJobs",
     "type": "object",
     "properties": {
      "training_id_list": {
       "type": "array",
       "items": {
        "type": "string",
        "pattern": "^[a-f0-9\\-]{36}$",
        "description": "ID of training job"
       },
       "minItems": 1,
       "maxItems": 100
      }
     },
     "required": [
      "training_id_list"
     ]
    }
   },
   "DependsOn": [
    "CreateTrainingJobrespmodel89BD8503",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteTrainingJobs-model/Resource"
   }
  },
  "GetTrainingJobrole81F7C500": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetTrainingJob-role/Resource"
   }
  },
  "GetTrainingJobroleDefaultPolicy8C137AEE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:BatchGetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/TrainingTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":logs:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":log-group:*:*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetTrainingJobroleDefaultPolicy8C137AEE",
    "Roles": [
     {
      "Ref": "GetTrainingJobrole81F7C500"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetTrainingJob-role/DefaultPolicy/Resource"
   }
  },
  "GetTrainingJoblambdaEF701579": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1.zip"
    },
    "Environment": {
     "Variables": {
      "TRAINING_JOB_TABLE": "TrainingTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_training_job.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "GetTrainingJobrole81F7C500",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetTrainingJobroleDefaultPolicy8C137AEE",
    "GetTrainingJobrole81F7C500",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetTrainingJob-lambda/Resource",
    "aws:asset:path": "asset.8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetTrainingJobrespmodelC996A2ED": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetTrainResponse",
    "Name": "GetTrainResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "GetTrainingJob",
     "type": "object",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "additionalProperties": true,
       "properties": {
        "id": {
         "type": "string",
         "pattern": "^[a-f0-9\\-]{36}$",
         "description": "ID of training job"
        },
        "job_status": {
         "type": "string",
         "description": "Status of training job"
        },
        "params": {
         "type": "object",
         "description": "Training Parameters",
         "additionalProperties": true,
         "properties": {
          "config_params": {
           "type": "object",
           "description": "Training Configuration Parameters",
           "properties": {
            "output_name": {
             "type": "string",
             "description": "Output Model Name",
             "minLength": 1
            }
           },
           "required": [
            "output_name"
           ],
           "additionalProperties": true
          },
          "training_params": {
           "type": "object",
           "description": "Training Parameters"
          },
          "training_type": {
           "type": "string",
           "description": "Training Type"
          }
         },
         "required": [
          "training_params",
          "training_type",
          "config_params"
         ]
        },
        "train_type": {
         "type": "string",
         "description": "Training Type"
        }
       }
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "DeleteTrainingJobsmodelB77A2D58",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetTrainingJob-resp-model/Resource"
   }
  },
  "SagemakerTrainingEventsrole02933484": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SagemakerTrainingEvents-role/Resource"
   }
  },
  "SagemakerTrainingEventsroleDefaultPolicyB3A2CD25": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:UpdateItem",
        "dynamodb:Scan",
        "dynamodb:PutItem",
        "dynamodb:GetItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/TrainingTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/CheckpointTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sagemaker:DeleteEndpoint",
        "sagemaker:DescribeEndpoint",
        "sagemaker:DescribeEndpointConfig",
        "sagemaker:UpdateEndpointWeightsAndCapacities",
        "cloudwatch:DeleteAlarms",
        "cloudwatch:DescribeAlarms",
        "cloudwatch:PutMetricAlarm",
        "cloudwatch:PutMetricData",
        "application-autoscaling:PutScalingPolicy",
        "application-autoscaling:RegisterScalableTarget"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "sns:Publish",
        "sns:GetTopicAttributes",
        "sns:SetTopicAttributes",
        "sns:Subscribe",
        "sns:ListSubscriptionsByTopic",
        "sns:Receive"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sns:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":StableDiffusionSnsUserTopic"
         ]
        ]
       }
      },
      {
       "Action": "sagemaker:DescribeTrainingJob",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sagemaker:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":training-job/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*sagemaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "sns:Publish",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":sns:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":StableDiffusionSnsUserTopic"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SagemakerTrainingEventsroleDefaultPolicyB3A2CD25",
    "Roles": [
     {
      "Ref": "SagemakerTrainingEventsrole02933484"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SagemakerTrainingEvents-role/DefaultPolicy/Resource"
   }
  },
  "SagemakerTrainingEventslambdaDCA9F199": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1.zip"
    },
    "Environment": {
     "Variables": {
      "TRAINING_JOB_TABLE": "TrainingTable",
      "CHECKPOINT_TABLE": "CheckpointTable",
      "USER_EMAIL_TOPIC_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":sns:",
         {
          "Ref": "AWS::Region"
         },
         ":",
         {
          "Ref": "AWS::AccountId"
         },
         ":StableDiffusionSnsUserTopic"
        ]
       ]
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "training_event.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "SagemakerTrainingEventsrole02933484",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "SagemakerTrainingEventsroleDefaultPolicyB3A2CD25",
    "SagemakerTrainingEventsrole02933484"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SagemakerTrainingEvents-lambda/Resource",
    "aws:asset:path": "asset.8b49e7bf2811092cc07b190dad456c14320112d573faf03d51ff9ee43cb4c5c1",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "SagemakerTrainingEventsrule9075D3A1": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventPattern": {
     "source": [
      "aws.sagemaker"
     ],
     "detail-type": [
      "SageMaker Training Job State Change"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "SagemakerTrainingEventslambdaDCA9F199",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SagemakerTrainingEvents-rule/Resource"
   }
  },
  "SagemakerTrainingEventsruleAllowEventRuleExtensionforStableDiffusiononAWSSagemakerTrainingEventslambdaAFD9D57B2C041C71": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SagemakerTrainingEventslambdaDCA9F199",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "SagemakerTrainingEventsrule9075D3A1",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/SagemakerTrainingEvents-rule/AllowEventRuleExtensionforStableDiffusiononAWSSagemakerTrainingEventslambdaAFD9D57B"
   }
  },
  "CreateDatasetroleBCE8FE4F": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateDataset-role/Resource"
   }
  },
  "CreateDatasetroleDefaultPolicyD3B5C505": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetItemTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetInfoTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:ListBucket",
        "s3:DeleteObject",
        "s3:AbortMultipartUpload",
        "s3:ListMultipartUploadParts",
        "s3:ListBucketMultipartUploads"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*SageMaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateDatasetroleDefaultPolicyD3B5C505",
    "Roles": [
     {
      "Ref": "CreateDatasetroleBCE8FE4F"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateDataset-role/DefaultPolicy/Resource"
   }
  },
  "CreateDatasetlambdaE4C5E2A4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459.zip"
    },
    "Environment": {
     "Variables": {
      "DATASET_ITEM_TABLE": "DatasetItemTable",
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "create_dataset.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "CreateDatasetroleBCE8FE4F",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateDatasetroleDefaultPolicyD3B5C505",
    "CreateDatasetroleBCE8FE4F",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateDataset-lambda/Resource",
    "aws:asset:path": "asset.705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateDatasetmodelE6CFAAD2": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CreateDataset",
    "Name": "CreateDatasetRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CreateDataset",
     "type": "object",
     "properties": {
      "dataset_name": {
       "type": "string",
       "minLength": 1,
       "maxLength": 20,
       "pattern": "^[A-Za-z][A-Za-z0-9_-]*$"
      },
      "content": {
       "type": "array",
       "items": {
        "type": "object",
        "properties": {
         "filename": {
          "type": "string",
          "minLength": 1
         },
         "name": {
          "type": "string",
          "minLength": 1
         },
         "type": {
          "type": "string",
          "minLength": 1
         },
         "params": {
          "type": "object"
         }
        }
       },
       "minItems": 1,
       "maxItems": 500
      },
      "creator": {
       "type": "string",
       "minLength": 1
      },
      "prefix": {
       "type": "string",
       "minLength": 0
      },
      "params": {
       "type": "object",
       "properties": {
        "description": {
         "type": "string"
        }
       }
      }
     },
     "required": [
      "dataset_name",
      "content",
      "creator",
      "prefix"
     ]
    }
   },
   "DependsOn": [
    "GetTrainingJobrespmodelC996A2ED",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateDataset-model/Resource"
   }
  },
  "CreateDatasetrespmodel59B1C852": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CreateDataset",
    "Name": "CreateDatasetResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "CreateDatasetResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        201
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "datasetName": {
         "type": "string",
         "description": "Name of dataset"
        },
        "s3PresignUrl": {
         "type": "object",
         "patternProperties": {
          ".*": {
           "type": "string",
           "format": "uri",
           "description": "S3 Presign URL"
          }
         }
        }
       },
       "required": [
        "datasetName",
        "s3PresignUrl"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CreateDatasetmodelE6CFAAD2",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CreateDataset-resp-model/Resource"
   }
  },
  "UpdateDatasetupdaterole03D60815": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateDataset-update-role/Resource"
   }
  },
  "UpdateDatasetupdateroleDefaultPolicyBE487D3F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetItemTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetInfoTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:AbortMultipartUpload",
        "s3:ListMultipartUploadParts",
        "s3:ListBucketMultipartUploads"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*SageMaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "UpdateDatasetupdateroleDefaultPolicyBE487D3F",
    "Roles": [
     {
      "Ref": "UpdateDatasetupdaterole03D60815"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateDataset-update-role/DefaultPolicy/Resource"
   }
  },
  "UpdateDatasetlambda285EA6F4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459.zip"
    },
    "Environment": {
     "Variables": {
      "DATASET_ITEM_TABLE": "DatasetItemTable",
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "update_dataset.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "UpdateDatasetupdaterole03D60815",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateDatasetupdateroleDefaultPolicyBE487D3F",
    "UpdateDatasetupdaterole03D60815"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateDataset-lambda/Resource",
    "aws:asset:path": "asset.705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "UpdateDatasetmodelB5FE867C": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model UpdateDataset",
    "Name": "UpdateDatasetRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "UpdateDataset",
     "type": "object",
     "properties": {
      "status": {
       "type": "string",
       "minLength": 1
      }
     },
     "required": [
      "status"
     ]
    }
   },
   "DependsOn": [
    "CreateDatasetrespmodel59B1C852",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateDataset-model/Resource"
   }
  },
  "UpdateDatasetrespmodel0F902480": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model UpdateDataset",
    "Name": "UpdateDatasetsResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "UpdateDatasetsResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "datasetName": {
         "type": "string",
         "description": "Name of dataset"
        },
        "status": {
         "type": "string",
         "description": "Status of dataset"
        }
       },
       "required": [
        "datasetName",
        "status"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateDatasetmodelB5FE867C"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/UpdateDataset-resp-model/Resource"
   }
  },
  "ListDatasetsrole507B9B89": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListDatasets-role/Resource"
   }
  },
  "ListDatasetsroleDefaultPolicy2B741D2B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetInfoTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListDatasetsroleDefaultPolicy2B741D2B",
    "Roles": [
     {
      "Ref": "ListDatasetsrole507B9B89"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListDatasets-role/DefaultPolicy/Resource"
   }
  },
  "ListDatasetslambda67F22742": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459.zip"
    },
    "Environment": {
     "Variables": {
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "list_datasets.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "ListDatasetsrole507B9B89",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListDatasetsroleDefaultPolicy2B741D2B",
    "ListDatasetsrole507B9B89",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListDatasets-lambda/Resource",
    "aws:asset:path": "asset.705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListDatasetsrespmodelC11FD768": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model ListDatasets",
    "Name": "ListDatasetsResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "ListDatasetsResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "datasets": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "datasetName": {
            "type": "string",
            "description": "Name of dataset"
           },
           "s3": {
            "type": "string",
            "format": "uri",
            "description": "S3 location of dataset"
           },
           "status": {
            "type": "string",
            "description": "Status of dataset"
           },
           "timestamp": {
            "type": "string",
            "description": "Timestamp of dataset"
           },
           "description": {
            "type": "string",
            "description": "Description of dataset"
           }
          },
          "required": [
           "datasetName",
           "s3",
           "status",
           "timestamp",
           "description"
          ]
         }
        },
        "last_evaluated_key": {
         "oneOf": [
          {
           "type": "null",
           "description": "Last Key for Pagination"
          },
          {
           "type": "string",
           "description": "Last Key for Pagination"
          }
         ]
        }
       },
       "required": [
        "datasets",
        "last_evaluated_key"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ResourceManager",
    "UpdateDatasetrespmodel0F902480"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ListDatasets-resp-model/Resource"
   }
  },
  "GetDatasetrole99B9CBFA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetDataset-role/Resource"
   }
  },
  "GetDatasetroleDefaultPolicy5F92DB9C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetInfoTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetItemTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*SageMaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetDatasetroleDefaultPolicy5F92DB9C",
    "Roles": [
     {
      "Ref": "GetDatasetrole99B9CBFA"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetDataset-role/DefaultPolicy/Resource"
   }
  },
  "GetDatasetlambda5273A45E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459.zip"
    },
    "Environment": {
     "Variables": {
      "DATASET_ITEM_TABLE": "DatasetItemTable",
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "get_dataset.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "GetDatasetrole99B9CBFA",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "GetDatasetroleDefaultPolicy5F92DB9C",
    "GetDatasetrole99B9CBFA",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetDataset-lambda/Resource",
    "aws:asset:path": "asset.705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetDatasetrespmodel08BFD8B8": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model GetDataset",
    "Name": "GetDatasetResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "GetDatasetResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        200
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "dataset_name": {
         "type": "string",
         "description": "Name of dataset"
        },
        "datasetName": {
         "type": "string",
         "description": "Name of dataset"
        },
        "prefix": {
         "type": "string",
         "description": "Prefix of dataset"
        },
        "s3": {
         "type": "string",
         "format": "uri",
         "description": "S3 location of dataset"
        },
        "status": {
         "type": "string",
         "description": "Status of dataset"
        },
        "timestamp": {
         "type": "string",
         "description": "Timestamp of dataset"
        },
        "data": {
         "type": "array",
         "items": {
          "type": "object",
          "properties": {
           "key": {
            "type": "string"
           },
           "name": {
            "type": "string"
           },
           "type": {
            "type": "string"
           },
           "preview_url": {
            "type": "string",
            "format": "uri"
           },
           "dataStatus": {
            "type": "string"
           },
           "original_file_name": {
            "type": "string"
           }
          },
          "required": [
           "key",
           "name",
           "type",
           "preview_url",
           "dataStatus",
           "original_file_name"
          ]
         }
        },
        "description": {
         "type": "string",
         "description": "Description of dataset"
        }
       },
       "required": [
        "dataset_name",
        "datasetName",
        "prefix",
        "s3",
        "status",
        "timestamp",
        "data",
        "description"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "ListDatasetsrespmodelC11FD768",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/GetDataset-resp-model/Resource"
   }
  },
  "CropDatasetrole43D08B8B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CropDataset-role/Resource"
   }
  },
  "CropDatasetroleDefaultPolicy0852C6F3": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:PutItem",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetInfoTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetItemTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:invokeFunction",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":lambda:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":function:*CropDataset*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:ListBucket",
        "s3:PutObject",
        "s3:HeadObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::*SageMaker*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "kms:Decrypt"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CropDatasetroleDefaultPolicy0852C6F3",
    "Roles": [
     {
      "Ref": "CropDatasetrole43D08B8B"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CropDataset-role/DefaultPolicy/Resource"
   }
  },
  "CropDatasetcroplambdaE7FE439C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459.zip"
    },
    "Environment": {
     "Variables": {
      "DATASET_ITEM_TABLE": "DatasetItemTable",
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "crop_dataset_handler.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "CropDatasetrole43D08B8B",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CropDatasetroleDefaultPolicy0852C6F3",
    "CropDatasetrole43D08B8B",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CropDataset-crop-lambda/Resource",
    "aws:asset:path": "asset.705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CropDatasetlambda3D2CD9C3": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459.zip"
    },
    "Environment": {
     "Variables": {
      "DATASET_ITEM_TABLE": "DatasetItemTable",
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "CROP_LAMBDA_NAME": {
       "Ref": "CropDatasetcroplambdaE7FE439C"
      },
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "crop_dataset.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "CropDatasetrole43D08B8B",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CropDatasetroleDefaultPolicy0852C6F3",
    "CropDatasetrole43D08B8B",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CropDataset-lambda/Resource",
    "aws:asset:path": "asset.705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CropDatasetmodel2E943C9D": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model CropDataset",
    "Name": "CropDatasetRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "CropDataset",
     "type": "object",
     "properties": {
      "max_resolution": {
       "type": "string",
       "description": "Max resolution of the image, like: 512x512",
       "pattern": "^[1-9]\\d*x[1-9]\\d*$"
      }
     },
     "required": [
      "max_resolution"
     ]
    }
   },
   "DependsOn": [
    "GetDatasetrespmodel08BFD8B8",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CropDataset-model/Resource"
   }
  },
  "CropDatasetrespmodel7E953A77": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Response Model CropDataset",
    "Name": "CropDatasetResponse",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "type": "object",
     "title": "CropDatasetResponse",
     "properties": {
      "statusCode": {
       "type": "integer",
       "enum": [
        202
       ]
      },
      "debug": {
       "type": "object",
       "title": "Response Model Debug",
       "$schema": "http://json-schema.org/draft-07/schema#",
       "description": "Debugging information for Lambda Function",
       "properties": {
        "function_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to Lambda Function"
        },
        "log_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to CloudWatch Logs"
        },
        "trace_url": {
         "type": "string",
         "format": "uri",
         "description": "URL to X-Ray Trace"
        }
       },
       "required": [
        "function_url",
        "log_url",
        "trace_url"
       ]
      },
      "message": {
       "type": "string",
       "description": "API Operate Message"
      },
      "data": {
       "type": "object",
       "properties": {
        "dataset_name": {
         "type": "string",
         "description": "Name of dataset"
        }
       },
       "required": [
        "dataset_name"
       ]
      }
     },
     "required": [
      "statusCode",
      "debug",
      "data",
      "message"
     ]
    }
   },
   "DependsOn": [
    "CropDatasetmodel2E943C9D",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CropDataset-resp-model/Resource"
   }
  },
  "DeleteDatasetsroleC7E5718B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteDatasets-role/Resource"
   }
  },
  "DeleteDatasetsroleDefaultPolicy6AB4AB75": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:Query",
        "dynamodb:DeleteItem",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetInfoTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/DatasetItemTable"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":dynamodb:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":table/MultiUserTable"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:ListBucket",
        "s3:DeleteObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::",
           {
            "Fn::GetAtt": [
             "ResourceManager",
             "BucketName"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":logs:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":log-group:*:*"
         ]
        ]
       }
      },
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteDatasetsroleDefaultPolicy6AB4AB75",
    "Roles": [
     {
      "Ref": "DeleteDatasetsroleC7E5718B"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteDatasets-role/DefaultPolicy/Resource"
   }
  },
  "DeleteDatasetslambda4ED0BD09": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459.zip"
    },
    "Environment": {
     "Variables": {
      "DATASET_INFO_TABLE": "DatasetInfoTable",
      "DATASET_ITEM_TABLE": "DatasetItemTable",
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "delete_datasets.handler",
    "Layers": [
     {
      "Ref": "sdcommonlayercommonlayer24D6FB4D"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "DeleteDatasetsroleC7E5718B",
      "Arn"
     ]
    },
    "Runtime": "python3.10",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "DeleteDatasetsroleDefaultPolicy6AB4AB75",
    "DeleteDatasetsroleC7E5718B",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteDatasets-lambda/Resource",
    "aws:asset:path": "asset.705ec208f4041f5d974cc5e3467dfe97055ff38915e03e888f2f39068f269459",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DeleteDatasetsmodel197FBE84": {
   "Type": "AWS::ApiGateway::Model",
   "Properties": {
    "ContentType": "application/json",
    "Description": "Request Model DeleteDatasets",
    "Name": "DeleteDatasetsRequest",
    "RestApiId": {
     "Ref": "sdextensiondeployapi34DC5501"
    },
    "Schema": {
     "$schema": "http://json-schema.org/draft-07/schema#",
     "title": "DeleteDatasets",
     "type": "object",
     "properties": {
      "dataset_name_list": {
       "type": "array",
       "items": {
        "type": "string",
        "description": "Name of dataset"
       },
       "minItems": 1,
       "maxItems": 10
      }
     },
     "required": [
      "dataset_name_list"
     ]
    }
   },
   "DependsOn": [
    "CropDatasetrespmodel7E953A77",
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/DeleteDatasets-model/Resource"
   }
  },
  "ResourcesWaiterHandler8A1EC5E9": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/22408b7395799a3b352401d47e831008e6eae7611165d36e1e942e9f429b3877.zip"
    },
    "Environment": {
     "Variables": {
      "ESD_VERSION": "v1.7.0-e2d48cf",
      "ESD_COMMIT_ID": "e2d48cf8c044ea29aa9648628327ff0c78a7688b",
      "LOG_LEVEL": {
       "Ref": "LogLevel"
      },
      "S3_BUCKET_NAME": {
       "Ref": "Bucket"
      },
      "MULTI_USER_TABLE": "MultiUserTable",
      "ENDPOINT_TABLE_NAME": "SDEndpointDeploymentJobTable",
      "URL_SUFFIX": {
       "Ref": "AWS::URLSuffix"
      },
      "ACCOUNT_ID": {
       "Fn::If": [
        "IsChina",
        "753680513547",
        "366590864501"
       ]
      },
      "POWERTOOLS_SERVICE_NAME": "ESD",
      "POWERTOOLS_TRACE_DISABLED": "false",
      "POWERTOOLS_TRACER_CAPTURE_RESPONSE": "true",
      "POWERTOOLS_TRACER_CAPTURE_ERROR": "true"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 3000,
    "Role": {
     "Fn::GetAtt": [
      "ResourcesProviderdeploycheckrole166E5860",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ResourceManager",
    "ResourcesProviderdeploycheckroleDefaultPolicyBDBBFD3D",
    "ResourcesProviderdeploycheckrole166E5860"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterHandler/Resource",
    "aws:asset:path": "asset.22408b7395799a3b352401d47e831008e6eae7611165d36e1e942e9f429b3877",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ResourcesWaiterProviderframeworkonEventServiceRoleA29CDC25": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterProvider/framework-onEvent/ServiceRole/Resource"
   }
  },
  "ResourcesWaiterProviderframeworkonEventServiceRoleDefaultPolicy30C39F72": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ResourcesWaiterHandler8A1EC5E9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ResourcesWaiterHandler8A1EC5E9",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ResourcesWaiterProviderframeworkonEventServiceRoleDefaultPolicy30C39F72",
    "Roles": [
     {
      "Ref": "ResourcesWaiterProviderframeworkonEventServiceRoleA29CDC25"
     }
    ]
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ResourcesWaiterProviderframeworkonEvent64F4AB48": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "aws-gcr-solutions-${AWS::Region}"
     },
     "S3Key": "stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/d9861ea7a45affd23e47a614acb2fddc6e45c20a891284c958187dafbf9ee36b.zip"
    },
    "Description": "AWS CDK resource provider framework - onEvent (Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterProvider)",
    "Environment": {
     "Variables": {
      "USER_ON_EVENT_FUNCTION_ARN": {
       "Fn::GetAtt": [
        "ResourcesWaiterHandler8A1EC5E9",
        "Arn"
       ]
      }
     }
    },
    "Handler": "framework.onEvent",
    "Role": {
     "Fn::GetAtt": [
      "ResourcesWaiterProviderframeworkonEventServiceRoleA29CDC25",
      "Arn"
     ]
    },
    "Runtime": {
     "Fn::FindInMap": [
      "LatestNodeRuntimeMap",
      {
       "Ref": "AWS::Region"
      },
      "value"
     ]
    },
    "Tags": [
     {
      "Key": "stackName",
      "Value": "Extension-for-Stable-Diffusion-on-AWS"
     },
     {
      "Key": "version",
      "Value": "v1.7.0-e2d48cf"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "ResourceManager",
    "ResourcesWaiterProviderframeworkonEventServiceRoleDefaultPolicy30C39F72",
    "ResourcesWaiterProviderframeworkonEventServiceRoleA29CDC25"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterProvider/framework-onEvent/Resource",
    "aws:asset:path": "asset.d9861ea7a45affd23e47a614acb2fddc6e45c20a891284c958187dafbf9ee36b",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ResourcesWaiterProviderframeworkonEventLogRetentionD8A193AA": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ResourcesWaiterProviderframeworkonEvent64F4AB48"
       }
      ]
     ]
    },
    "RetentionInDays": 1
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterProvider/framework-onEvent/LogRetention/Resource"
   }
  },
  "ResourcesWaiterCustomResource1": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "ResourcesWaiterProviderframeworkonEvent64F4AB48",
      "Arn"
     ]
    },
    "apiUrl": {
     "Fn::Join": [
      "",
      [
       "https://",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       ".execute-api.",
       {
        "Ref": "AWS::Region"
       },
       ".",
       {
        "Ref": "AWS::URLSuffix"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/"
      ]
     ]
    },
    "apiKey": {
     "Ref": "SdExtensionApiKey"
    },
    "timestamp": "2024-07-25T06:30:13.493Z",
    "apiEndpointType": {
     "Ref": "ApiEndpointType"
    },
    "name": "Waiter1"
   },
   "DependsOn": [
    "ResourceManager"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterCustomResource1/Default"
   }
  },
  "ResourcesWaiterCustomResource2": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "ResourcesWaiterProviderframeworkonEvent64F4AB48",
      "Arn"
     ]
    },
    "apiUrl": {
     "Fn::Join": [
      "",
      [
       "https://",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       ".execute-api.",
       {
        "Ref": "AWS::Region"
       },
       ".",
       {
        "Ref": "AWS::URLSuffix"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/"
      ]
     ]
    },
    "apiKey": {
     "Ref": "SdExtensionApiKey"
    },
    "timestamp": "2024-07-25T06:30:13.493Z",
    "apiEndpointType": {
     "Ref": "ApiEndpointType"
    },
    "name": "Waiter2"
   },
   "DependsOn": [
    "ResourceManager",
    "ResourcesWaiterCustomResource1"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterCustomResource2/Default"
   }
  },
  "ResourcesWaiterCustomResource3": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "ResourcesWaiterProviderframeworkonEvent64F4AB48",
      "Arn"
     ]
    },
    "apiUrl": {
     "Fn::Join": [
      "",
      [
       "https://",
       {
        "Ref": "sdextensiondeployapi34DC5501"
       },
       ".execute-api.",
       {
        "Ref": "AWS::Region"
       },
       ".",
       {
        "Ref": "AWS::URLSuffix"
       },
       "/",
       {
        "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
       },
       "/"
      ]
     ]
    },
    "apiKey": {
     "Ref": "SdExtensionApiKey"
    },
    "timestamp": "2024-07-25T06:30:13.493Z",
    "apiEndpointType": {
     "Ref": "ApiEndpointType"
    },
    "name": "Waiter3"
   },
   "DependsOn": [
    "ResourceManager",
    "ResourcesWaiterCustomResource2"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/ResourcesWaiterCustomResource3/Default"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/21TS3PaMBD+LbkbhUd7L6FtDgmtC2mujJA3RCBLih4wHo//e1drYaCTi3a/fb80Ze3k65iN7/jJj0R1GCm5Ze06cHEoFm+65I7XEMAlsDC6kkEaXaDxppW8Zu3KKEg6oqVRUjTkR1xXKF5vK77RpoK9Z7+I/IxaUBQ/27TcewiezRMpKrDKNDXowB6iOED4Pgg6tM7CB+4hB2Yt5hriDQwKn3kD7hWcz7gEV0tP6McR461NdAKW3Fqpd8ngE+kaHwXBDBmwH7PzrH02uxUORVMyBI/OREtZM98VVaN5baote+FbBVQyt3LHA5x4g2MDH+ZW0uQu7FwIE3UoLm0n6RXCvexo3D2DrlQwhV9CeDdVUmburM1Jev6xrwCxNdqT7n8RFvMEtMXM/fWYrFScBvk5SGZL3K6i/MSs4CNia69cyYoH4/oybmW4VY3zfDFWCmpiHbdeOGnPa7zGaPyBxn8iRKq7Z+i9HN4V7ApIO0WXVcxHirTrLoOhq0ujTNsW0QdTb1xWelY6c5QVuJv5pfbOR0MO15rfMdgYzkev0glu8KsIJdn85BdK0lV2xWQ2ZeMRV/ad48/7lr/efaK978g2uEKdTdqS0M1J96LhMLsifTG29/fHyRc2nbDZ3d5LOXJ4TrIGturpP6NxUDvuAwAA"
   },
   "Metadata": {
    "aws:cdk:path": "Extension-for-Stable-Diffusion-on-AWS/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Mappings": {
  "LatestNodeRuntimeMap": {
   "af-south-1": {
    "value": "nodejs20.x"
   },
   "ap-east-1": {
    "value": "nodejs20.x"
   },
   "ap-northeast-1": {
    "value": "nodejs20.x"
   },
   "ap-northeast-2": {
    "value": "nodejs20.x"
   },
   "ap-northeast-3": {
    "value": "nodejs20.x"
   },
   "ap-south-1": {
    "value": "nodejs20.x"
   },
   "ap-south-2": {
    "value": "nodejs20.x"
   },
   "ap-southeast-1": {
    "value": "nodejs20.x"
   },
   "ap-southeast-2": {
    "value": "nodejs20.x"
   },
   "ap-southeast-3": {
    "value": "nodejs20.x"
   },
   "ap-southeast-4": {
    "value": "nodejs20.x"
   },
   "ap-southeast-5": {
    "value": "nodejs20.x"
   },
   "ap-southeast-7": {
    "value": "nodejs20.x"
   },
   "ca-central-1": {
    "value": "nodejs20.x"
   },
   "ca-west-1": {
    "value": "nodejs20.x"
   },
   "cn-north-1": {
    "value": "nodejs18.x"
   },
   "cn-northwest-1": {
    "value": "nodejs18.x"
   },
   "eu-central-1": {
    "value": "nodejs20.x"
   },
   "eu-central-2": {
    "value": "nodejs20.x"
   },
   "eu-isoe-west-1": {
    "value": "nodejs18.x"
   },
   "eu-north-1": {
    "value": "nodejs20.x"
   },
   "eu-south-1": {
    "value": "nodejs20.x"
   },
   "eu-south-2": {
    "value": "nodejs20.x"
   },
   "eu-west-1": {
    "value": "nodejs20.x"
   },
   "eu-west-2": {
    "value": "nodejs20.x"
   },
   "eu-west-3": {
    "value": "nodejs20.x"
   },
   "il-central-1": {
    "value": "nodejs20.x"
   },
   "me-central-1": {
    "value": "nodejs20.x"
   },
   "me-south-1": {
    "value": "nodejs20.x"
   },
   "mx-central-1": {
    "value": "nodejs20.x"
   },
   "sa-east-1": {
    "value": "nodejs20.x"
   },
   "us-east-1": {
    "value": "nodejs20.x"
   },
   "us-east-2": {
    "value": "nodejs20.x"
   },
   "us-gov-east-1": {
    "value": "nodejs18.x"
   },
   "us-gov-west-1": {
    "value": "nodejs18.x"
   },
   "us-iso-east-1": {
    "value": "nodejs18.x"
   },
   "us-iso-west-1": {
    "value": "nodejs18.x"
   },
   "us-isob-east-1": {
    "value": "nodejs18.x"
   },
   "us-west-1": {
    "value": "nodejs20.x"
   },
   "us-west-2": {
    "value": "nodejs20.x"
   }
  }
 },
 "Outputs": {
  "sdextensiondeployapiEndpoint7DE80613": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "sdextensiondeployapi34DC5501"
      },
      ".execute-api.",
      {
       "Ref": "AWS::Region"
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
      },
      "/"
     ]
    ]
   }
  },
  "EsdVersion": {
   "Description": "ESD Version",
   "Value": "v1.7.0-e2d48cf"
  },
  "EsdReleaseTime": {
   "Description": "ESD Release Time",
   "Value": "2024-07-25T06:30:13.666Z"
  },
  "ApiGatewayUrl": {
   "Description": "API Gateway URL",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "sdextensiondeployapi34DC5501"
      },
      ".execute-api.",
      {
       "Ref": "AWS::Region"
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "sdextensiondeployapiDeploymentStageprod6D37142C"
      },
      "/"
     ]
    ]
   }
  },
  "ApiGatewayUrlToken": {
   "Description": "API Gateway Token",
   "Value": {
    "Ref": "SdExtensionApiKey"
   }
  },
  "S3BucketName": {
   "Description": "S3 Bucket Name",
   "Value": {
    "Ref": "Bucket"
   }
  },
  "EndpointType": {
   "Description": "API Endpoint Type",
   "Value": {
    "Ref": "ApiEndpointType"
   }
  },
  "SNSTopicName": {
   "Description": "SNS Topic Name to get train and inference result notification",
   "Value": "StableDiffusionSnsUserTopic"
  },
  "DashboardURL": {
   "Description": "CloudWatch Dashboard URL",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "AWS::Region"
      },
      ".console.",
      {
       "Fn::If": [
        "IsChina",
        "amazonaws.cn",
        "aws.amazon.com"
       ]
      },
      "/cloudwatch/home?region=",
      {
       "Ref": "AWS::Region"
      },
      "#dashboards/dashboard/ESD"
     ]
    ]
   }
  },
  "ApiDoc": {
   "Description": "API Doc - OAS3",
   "Value": "https://aws-gcr-solutions.s3.amazonaws.com/extension-for-stable-diffusion-on-aws/oas_v1.7.0-e2d48cf.json"
  },
  "TemplateForSDOnEC2": {
   "Description": "Create New or Update EC2 Stack for SD (Global Only)",
   "Value": "https://aws-gcr-solutions.s3.amazonaws.com/extension-for-stable-diffusion-on-aws/sd_v1.7.0-e2d48cf.yaml"
  },
  "TemplateForComfyOnEC2": {
   "Description": "Create New or Update EC2 Stack for Comfy (Global Only)",
   "Value": "https://aws-gcr-solutions.s3.amazonaws.com/extension-for-stable-diffusion-on-aws/comfy_v1.7.0-e2d48cf.yaml"
  },
  "TemplateForCurrentStack": {
   "Description": "Current stack template source",
   "Value": "https://aws-gcr-solutions.s3.amazonaws.com/stable-diffusion-aws-extension-github-mainline/v1.7.0-e2d48cf/custom-domain/Extension-for-Stable-Diffusion-on-AWS.template.json"
  }
 }
}